"use strict";var yv=Object.create;var Kn=Object.defineProperty;var gv=Object.getOwnPropertyDescriptor;var vv=Object.getOwnPropertyNames;var _v=Object.getPrototypeOf,bv=Object.prototype.hasOwnProperty;var Sv=(r,e,t)=>e in r?Kn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var H=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),pa=(r,e)=>{for(var t in e)Kn(r,t,{get:e[t],enumerable:!0})},Lc=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of vv(e))!bv.call(r,s)&&s!==t&&Kn(r,s,{get:()=>e[s],enumerable:!(n=gv(e,s))||n.enumerable});return r};var He=(r,e,t)=>(t=r!=null?yv(_v(r)):{},Lc(e||!r||!r.__esModule?Kn(t,"default",{value:r,enumerable:!0}):t,r)),Tv=r=>Lc(Kn({},"__esModule",{value:!0}),r);var p=(r,e,t)=>(Sv(r,typeof e!="symbol"?e+"":e,t),t);var bl=H(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});function Xu(r){return"source"in r&&"destination"in r?[r.source,r.destination]:[r,r]}var ed=Symbol.for("__strategy__"),td=Symbol.for("__mappings__"),rd=Symbol.for("__metadata_map__"),nd=Symbol.for("__metadata_object_map__"),sd=Symbol.for("__error_handler__"),id=Symbol.for("__naming_conventions__"),od=Symbol.for("__recursive_depth__"),ad=Symbol.for("__recursive_count__"),ld=Symbol.for("__profile_configuration_context__"),cS=Symbol.for("nodejs.util.inspect.custom");function ml(r){return r[sd]}function cd(r){return r[td]}function ro(r){return r[rd]}function ud(r){return r[nd]}function uS(r){let e=r[id];if(!!e)return Xu(e)}function dd(r){return r[od]}function dS(r){return r[ad]}function yl(r){return r[ed]}function cl(r){return r[ld]}function fS(r,e,t,n,s,i){let o=Object.keys(e).reduce((d,c)=>{let h=c in r,f=t.some(g=>g===c),_=Object.getOwnPropertyDescriptor(e,c)?.writable===!0;return!f&&!h&&_&&r[c]===void 0&&d.push(c),d},[]),a=Zu(n),l=Zu(s);if(o.length){let d=`${a} -> ${l}`;i.handle(`
Unmapped properties for ${d}:
-------------------
${o.join(`,
`)}
`)}}function Zu(r){let e=r.toString();return r.name&&(e=r.name),e}function on(r,e=[]){if(!e.length)return;let t,n=e.length;for(t=0;t<n&&r!=null;t++)r=r[e[t]];return t&&t==n?r:void 0}function Ut(r,e,t,n=!1){let s=typeof e=="string"?Symbol.for(e):e,i=typeof t=="string"?Symbol.for(t):t,o=cd(r).get(s)?.get(i);if(o==null&&!n){let a=typeof e=="function"&&e.name||String(e),l=typeof t=="function"&&t.name||String(t),d=ml(r),c=`Mapping is not found for ${a} and ${l}`;throw d.handle(c),new Error(c)}return o}function sn(r){return Object.getPrototypeOf(r)===Date||r===Date}function gl(r){return Array.isArray(r)?!r.length:typeof r!="object"&&typeof r!="function"?!r:!Object.keys(r).length}function no(r,e){return r.length!==e.length?!1:r.every((t,n)=>e[n]===t)}function yr(r){if(r==null)return!0;let e=Object.getPrototypeOf(r);return e===String||e===Number||e===Boolean||r===String||r===Number||r===Boolean}function vl(r,e,t){let{decomposedPath:n,base:s}=fd(e);return s===void 0?r:(pd(r,s),t=n.length<=1?t:vl(r[s],n.slice(1),t),Object.assign(r,{[s]:t}))}function kt(r,e,t){let{decomposedPath:n,base:s}=fd(e);s!==void 0&&(pd(r,s),n.length<=1?r[s]=t:kt(r[s],n.slice(1),t))}function fd(r){if(r.length<1)return{base:"",decomposedPath:[]};let e=r;return{base:r[0],decomposedPath:e}}function pd(r,e){r.hasOwnProperty(e)||(r[e]={})}function hd(r,e,t,n,s,i,o,a){let l,d=r[0],c=r[1],h=!(yr(o)||yr(a)||sn(o)||sn(a));switch(d){case 1:l=c(e);break;case 3:l=c();break;case 4:l=c(e,i,s?{extraArgs:()=>s}:void 0);break;case 5:l=c(e);break;case 2:case 7:case 8:l=c(e,n),h&&l!=null&&(l=Array.isArray(l)?i.mapArray(l,o,a):i.map(l,o,a));break;case 9:l=c(e,s||{});break;case 10:l=hd(c(e),e,t,n,s,i,o,a);break}return l}function md(r,e){return t=>{e&&(e=vl(e,r,t))}}function ul(r,e,t,n=!1){return eo({mapping:r,sourceObject:e,options:t,setMemberFn:md,isMapArray:n})}function yd(r){return e=>t=>{t!==void 0&&kt(r,e,t)}}function gd(r){return e=>on(r,e)}function Ju(r,e,t,n,s=!1){eo({sourceObject:e,mapping:r,setMemberFn:yd(t),getMemberFn:gd(t),options:n,isMapArray:s})}function eo({mapping:r,sourceObject:e,options:t,setMemberFn:n,getMemberFn:s,isMapArray:i=!1}){let[[o,a],[,l],d,,c,h,,[f,_]=[]]=r,{beforeMap:g,afterMap:v,destinationConstructor:x=h,extraArgs:T}=t??{},M=ml(c),E=ro(c),A=x(e,a),N=T?.(r,A),Q=[];if(!i){let R=g??f;R&&R(e,A,N)}for(let R=0,q=d.length;R<q;R++){let[z,[,[P,[K,G=void 0]=[]]],[U,Y]=[]]=d[R],se=!yr(U)&&!sn(U)&&!yr(Y)&&!sn(Y)&&Y===U;se&&(se=!Ut(c,Y,U,!0));let ae=ke=>{try{return n(z,A)(ke())}catch(O){let D=`
Error at "${z}" on ${a.prototype?.constructor?.name||a.toString()} (${JSON.stringify(A)})
---------------------------------------------------------------------
Original error: ${O}`;throw M.handle(D),new Error(D)}};if(Q.push(z[0]),K&&!K(e)){ae(()=>G);continue}if(P[0]===6){let ke=E.get(a),O=ke&&ke.find(ie=>no(ie[0],z))===null,D=P[1](e),te=P[2];if(D==null||D instanceof Date||Object.prototype.toString.call(D).slice(8,-1)==="File"||O||se||te){ae(()=>D);continue}if(Array.isArray(D)){let[ie]=D;if(typeof ie!="object"||ie instanceof Date||Object.prototype.toString.call(ie).slice(8,-1)==="File"){ae(()=>D.slice());continue}if(gl(ie)){ae(()=>[]);continue}if(yr(U))continue;ae(()=>D.map(ge=>ul(Ut(c,Y,U),ge,{extraArgs:T})));continue}if(typeof D=="object"){let ie=Ut(c,Y,U);if(s){let ge=s(z);ge!==void 0&&eo({sourceObject:D,mapping:ie,options:{extraArgs:T},setMemberFn:yd(ge),getMemberFn:gd(ge)});continue}ae(()=>eo({mapping:ie,sourceObject:D,options:{extraArgs:T},setMemberFn:md}));continue}ae(()=>D);continue}ae(()=>hd(P,e,A,z,N,c,Y,U))}if(!i){let R=v??_;R&&R(e,A,N)}return fS(A,l,Q,o,a,M),A}var Bt=class{static configure(e={}){this.configured||(this.configured=!0,Object.entries(e).forEach(([t,n])=>{n!==void 0&&(this[t]=n)}))}static log(e){console.log.bind(console,this.AUTOMAPPER_PREFIX,e)}static warn(e){console.warn.bind(console,this.AUTOMAPPER_PREFIX,e)}static error(e){console.error.bind(console,this.AUTOMAPPER_PREFIX,e)}static info(e){console.info.bind(console,this.AUTOMAPPER_PREFIX,e)}};Bt.AUTOMAPPER_PREFIX="[AutoMapper]: ";Bt.configured=!1;function pS({strategyInitializer:r,errorHandler:e,namingConventions:t}){let n,s,i,o,a,l,d;function c(h,f,_){if(f&&_)return{destinationIdentifier:f,mapOptions:_};let g=h;if(f&&!_){let v=typeof f;v==="string"||v==="function"?g=f:_=f}return{destinationIdentifier:g,mapOptions:_}}return new Proxy({[cS](){return`
Mapper {} is an empty Object as a Proxy. The following methods are available to use with a Mapper:
- Mapper#map(Array)(Async), Mapper#mutate(Array)(Async)
- createMap()
- addProfile()
- getMapping()
- getMappings()
        `}},{get(h,f,_){return f===ed?(n||(n=r(_)),n):f===ld?(d||(d=new Set),d):f===td?(s||(s=new Map),s):f===rd?(i||(i=new Map),i):f===nd?(o||(o=new Map),o):f===sd?(e||(e={handle:Bt.error?Bt.error.bind(Bt):()=>{}}),e):f===id?t:f===od?(a||(a=new Map),a):f===ad?(l||(l=new Map),l):f==="dispose"?()=>{s?.clear(),o?.clear(),a?.clear(),l?.clear(),d?.clear()}:f==="map"?(g,v,x,T)=>{if(g==null)return g;let{destinationIdentifier:M,mapOptions:E}=c(v,x,T),A=Ut(_,v,M);g=n.preMap(g,A);let N=ul(A,g,E||{});return n.postMap(g,N,A)}:f==="mapAsync"?(g,v,x,T)=>{let M=_.map(g,v,x,T);return new Promise(E=>{setTimeout(E,0,M)})}:f==="mapArray"?(g,v,x,T)=>{if(!g.length)return[];let{destinationIdentifier:M,mapOptions:E}=c(v,x,T),A=Ut(_,v,M),{beforeMap:N,afterMap:Q,extraArgs:R}=E||{};N&&N(g,[]);let q=[];for(let z=0,P=g.length;z<P;z++){let K=g[z];K=n.preMap(K,A);let G=ul(A,K,{extraArgs:R},!0);q.push(n.postMap(K,G,A))}return Q&&Q(g,q),q}:f==="mapArrayAsync"?(g,v,x,T)=>{let M=_.mapArray(g,v,x,T);return new Promise(E=>{setTimeout(E,0,M)})}:f==="mutate"?(g,v,x,T,M)=>{if(g==null)return;let{destinationIdentifier:E,mapOptions:A}=c(x,T,M),N=Ut(_,x,E);g=n.preMap(g,N),Ju(N,g,v,A||{}),n.postMap(g,v,N)}:f==="mutateAsync"?(g,v,x,T,M)=>new Promise(E=>{_.mutate(g,v,x,T,M),setTimeout(E,0)}):f==="mutateArray"?(g,v,x,T,M)=>{if(!g.length)return;let{destinationIdentifier:E,mapOptions:A}=c(x,T,M),N=Ut(_,x,E),{beforeMap:Q,afterMap:R,extraArgs:q}=A||{};Q&&Q(g,v);for(let z=0,P=g.length;z<P;z++){let K=g[z];K=n.preMap(K,N),Ju(N,K,v[z]||{},{extraArgs:q},!0),n.postMap(K,v[z],N)}R&&R(g,v)}:f==="mutateArrayAsync"?(g,v,x,T,M)=>new Promise(E=>{_.mutateArray(g,v,x,T,M),setTimeout(E,0)}):Reflect.get(h,f,_)}})}var _l=Symbol("__recursive_data__");function dl(r,e,t){let n=r.get(e);return n?mS(n,t):void 0}function to(r,e,t,n){if(!r.has(e)){r.set(e,Yu(new Map,t,n));return}let s=r.get(e);hS(s,t)||Yu(s,t,n)}function Yu(r,e,t){let n=r;for(let s of e){let i=n.get(s);i||(i=new Map,n.set(s,i)),n=i}return n.set(_l,t),r}function hS(r,e){let t=r;for(let n of e){let s=t.get(n);if(s)t=s;else return!1}return t.has(_l)}function mS(r,e){let t=r;for(let n of e)if(t=t.get(n),!t)return;return t.get(_l)}function yS(r){let e=r.mapper,t=ro(e),n=ud(e),s=dS(e),i=dd(e);function o(a,l,d=!0,c=!1){let h=t.get(a),f={};if(gl(h)||!h)return f;for(let _=0,g=h.length;_<g;_++){let v=h[_][0],x=h[_][1],T=h[_][2];if(h[_][3]&&l===1)continue;let E=x();if(T){kt(f,v,[]);continue}if(yr(E)||E===null){kt(f,v,void 0);continue}if(sn(E)){kt(f,v,new Date);continue}let A=dl(i,a,v),N=dl(s,a,v)||0;if(A===0){kt(f,v,{});continue}if(A===N){(d||!c)&&to(s,a,v,0),kt(f,v,{});continue}to(s,a,v,N+1);let R=n.get(E)?.[l]||o(E,l,!1,E===a);kt(f,v,R)}return(d||!c)&&s.get(a)?.clear(),f}return o}var gS={applyMetadata:yS,preMap(r){return r},postMap(r,e){return e}};function vS(r,e=!1){return e?r!==void 0:r!=null}function vd(r,e,t){if(!vS(t))return;let n=ro(r);if(!n.has(e))for(let[s,{isGetterOnly:i,type:o,depth:a,isArray:l}]of t)n.set(e,[...n.get(e)||[],[[s],o,l,i]]),a!=null&&to(dd(r),e,[s],a)}function _S(r){return[6,e=>on(e,r)]}function _d(r,[e,t]){let n=r.map(s=>s.split(t.splittingExpression).filter(Boolean)).filter(s=>s.length>0);return n.length?n.map(s=>e.transformPropertyName(s)):r}function bd(r,e,t){let[n]=t,s=[].concat(...e.map(f=>f.split(n.splittingExpression).filter(Boolean))),[i,...o]=s.slice(0,s.length-1),a=i,l=0,d=Xi(r,a);if(!d){for(let f=0,_=o.length;f<_;f++)if(a=n.transformPropertyName([a,o[f]]),Xi(r,a)){l=f+1,d=!0;break}}if(!d)return e;let c=s.slice(l+1,s.length+1),h=n.transformPropertyName(c);return c.length>1&&!Xi(r[a],h)&&Xi(r[a],n.transformPropertyName([c[0]]))?[a,...bd(r[a],_d([h],t),t)]:[a,n.transformPropertyName(s.slice(l+1,s.length+1))]}function Xi(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Sd(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function bS(r){let e=[];for(let t=0,n=r.length;t<n;t++){let s=r[t];e.some(i=>Sd(i,s))||e.push(s)}return e}var SS=["constructor","__defineGetter__","__defineSetter__","hasOwnProperty","__lookupGetter__","__lookupSetter__","isPrototypeOf","propertyIsEnumerable","toString","valueOf","__proto__","toLocaleString"];function Td(r,e=[],t=[]){let n=t,s=!1,i=Array.from(new Set([...Object.getOwnPropertyNames(r)].filter(o=>!SS.includes(o))));for(let o=0,a=i.length;o<a;o++){let l=i[o],d=[...e,l],c=r[l];if(typeof c!="function"&&(n.push(d),typeof c=="object")){let h=Array.isArray(c)?c:[c];for(let f of h){let _=Td(f,d);_&&(s=!0,n.push(..._))}}}return s?bS(n):n}function Pd(r,e,t,n=[]){let s=yl(r),i=s.applyMetadata.bind(s),o=s.destinationConstructor.bind(s),a=ud(r),l=a.get(e),d=a.get(t),c=d?.[1]||i(t,1);d?d[1]=c:a.set(t,[void 0,c]);let h=l?.[0]||i(e,0);l?l[0]=h:a.set(e,[h]);let f=[[e,t],[h,c],[],[],r,o];f[8]=uS(r);for(let N=0,Q=n.length;N<Q;N++)n[N](f);let _=Td(c),g=f[2],v=f[3],x=v.length>0,T=f[8],{processSourcePath:M,getMetadataAtMember:E,getNestedMappingPair:A}=wd(r,e,t);for(let N=0,Q=_.length;N<Q;N++){let R=_[N];if(x&&v.some(U=>no(U[0],R)))continue;let q=M(h,T,R);if(!(q[0]in h))continue;let z=E(R,"destination"),P=E(q,"source");if(!P&&!z)continue;let K=A(P,z),G=[_S(q)];if(K){let U,Y=P[2],se=z[2],ae=f[6];if(ae){let[ke,O]=ae.get(K[1])||[],[D,te]=(Y?O?.get(K[0]):ke?.get(K[0]))||[];U=se?te:D}if(U){let ke=G[0][1];G[0][1]=O=>U(ke(O)),G[0][2]=!0}}g.push([R,[R,G],K])}for(let N of v)g.push(N);return f}function wd(r,e,t){let n=ro(r),s=n.get(t)||[],i=n.get(e)||[];return{getMetadataAtMember:(o,a)=>(a==="source"?i:s).find(l=>no(l[0],o)),processSourcePath:(o,a,l)=>{let d=l;return a&&(d=bd(o,_d(l,a),a)),d},getNestedMappingPair:(o,a)=>{if(o&&a)return[a[1](),o[1]()]}}}function TS(r,e,...t){let n=typeof e=="string"?Symbol.for(e):e,s=n,[i,...o]=t||[];i&&(typeof i=="string"?s=Symbol.for(i):typeof i=="function"&&i.prototype!==void 0?s=i:(o||[]).push(i));let a=cd(r),l=a.get(n)?.get(s);return l?(ml(r).handle(`Mapping for source ${String(e)} and destination ${String(i)} already exists`),l):(yl(r).retrieveMetadata(n,s).forEach((h,f)=>{vd(r,f,h)}),l=Pd(r,n,s,(o||[]).concat(...cl(r).values()).filter(h=>h!=null)),a.has(n)?a.get(n).set(s,l):a.set(n,new Map([[s,l]])),l)}function PS(r,e,...t){t.forEach(n=>{cl(r).add(n)}),e.apply({profileName:e.name},[r]),cl(r).clear()}var xd=()=>{},wS=Ed(xd);function xS(r){let e=r(wS);if(typeof e!="function")return null;let t=e();return t.length===0||t.some(n=>typeof n!="string")?null:t}function ES(r){let e=xS(r);return e||[]}function Ed(r,e=[]){let t={get(n,s){let i=e.slice();return i.push(s),Ed(xd,i)},apply(){return e}};return new Proxy(r,t)}function Od(r,...e){let[t,n]=e,s=ES(r);n==null&&(n=t,t=void 0);let i=[s,[n,t]];return o=>{let[a,l]=o[0],d=o[4],c=o[8],[h]=o[1],{getNestedMappingPair:f,getMetadataAtMember:_,processSourcePath:g}=wd(d,a,l),v=g(h,c,s);if(!(v[0]in h)){o[3].push([s,i,void 0]);return}let x=_(s,"destination"),T=_(v,"source"),M=f(T,x);o[3].push([s,i,M])}}function OS(r,e){let t=Array.isArray(r)?r:void 0;return n=>{if(t==null){let[,i]=n[0],o=n[4],a=yl(o),l=typeof r=="string"?Symbol.for(r):r;a.retrieveMetadata(l).forEach((c,h)=>{vd(o,h,c)}),t=Pd(o,l,i)}let s=t[2];for(let i=0,o=s.length;i<o;i++){let a=s[i];if(n[2].some(d=>no(d[0],a[0])))continue;let l=a[1][1];l[0][1]=d=>on(e(d),a[0]),n[2].push([a[0],[a[0],l],a[2]])}}}function AS(r){return"convert"in r?r.convert.bind(r):r}function CS(r,e,t){return n=>{let s=Array.isArray(r),i=Array.isArray(e),o=s?r[0]:r,a=i?e[0]:e,l=AS(t),d=n[6]||(n[6]=new Map),c,[h,f]=d.get(o)||[];if(h||f){c=s?f:h;let[_,g]=c.get(a)||[];c.set(a,i?[_,l]:[l,g]);return}c=new Map([[a,i?[void 0,l]:[l,void 0]]]),d.set(o,s?[new Map,c]:[c,new Map])}}var RS=r=>e=>{e[5]=r};function NS(r){return e=>{e[7]==null&&(e[7]=[]),e[7][0]=r}}function MS(r){return e=>{e[7]==null&&(e[7]=[]),e[7][1]=r}}function kS(r,e){return t=>{let n;if(Array.isArray(r))n=r;else{let i=t[4];n=Ut(i,r,e)}let s=n[2];for(let i=0,o=s.length;i<o;i++){let[a,l,d]=s[i];t[3].find(([h])=>Sd(h,a))||t[3].push([a,l,d])}}}var IS=r=>e=>{e[8]=Xu(r)};function Ad(r){return"resolve"in r}function Cd(r){return Ad(r)?[1,r.resolve.bind(r)]:[1,r]}function $S(r){return Od(e=>e[r],Cd(e=>e[r]))}function DS(r,e,t){return[4,(n,s,i)=>{let o=t(n);return Array.isArray(o)?s.mapArray(o,e,r,i):s.map(o,e,r,i)}]}function qS(r,e){return[5,t=>r.convert(e(t))]}function jS(){return[0]}function FS(r){return[7,(e,t)=>{let n=on(e,t);return n===null?r:n}]}function LS(r,e){return[r,e]}function zS(r,e){return[2,(t,n)=>r(t)?on(t,n):e]}function GS(r){return[3,()=>r]}function US(r){return Ad(r)?[9,r.resolve.bind(r)]:[9,r]}function BS(r){return[10,r]}function VS(r){return[8,(e,t)=>{let n=on(e,t);return n===void 0?r:n}]}var fl=class{constructor(){this.separatorCharacter="",this.splittingExpression=/(^[a-z]+(?=$|[A-Z][a-z0-9]+)|[A-Z]?[a-z0-9]+)/}transformPropertyName(e){let t="";for(let n=0,s=e.length;n<s;n++)n===0?t+=e[n].charAt(0).toLowerCase():t+=e[n].charAt(0).toUpperCase(),t+=e[n].substring(1);return t}},pl=class{constructor(){this.separatorCharacter="",this.splittingExpression=/(^[A-Z]+(?=$|[A-Z][a-z0-9]+)|[A-Z]?[a-z0-9]+)/}transformPropertyName(e){let t="";for(let n=0,s=e.length;n<s;n++)t+=e[n].charAt(0).toUpperCase()+e[n].substring(1);return t}},hl=class{constructor(){this.separatorCharacter="_",this.splittingExpression=/_/}transformPropertyName(e){return e.length<=1?e[0].toLowerCase()||"":e.map(n=>n.toLowerCase()).join(this.separatorCharacter)}};re.AutoMapperLogger=Bt;re.CamelCaseNamingConvention=fl;re.PascalCaseNamingConvention=pl;re.SnakeCaseNamingConvention=hl;re.addProfile=PS;re.afterMap=MS;re.autoMap=$S;re.beforeMap=NS;re.condition=zS;re.constructUsing=RS;re.convertUsing=qS;re.createMap=TS;re.createMapper=pS;re.defaultStrategyInitializerOptions=gS;re.extend=kS;re.forMember=Od;re.forSelf=OS;re.fromValue=GS;re.getRecursiveValue=dl;re.ignore=jS;re.isDateConstructor=sn;re.isEmpty=gl;re.isPrimitiveConstructor=yr;re.mapDefer=BS;re.mapFrom=Cd;re.mapWith=DS;re.mapWithArguments=US;re.namingConventions=IS;re.nullSubstitution=FS;re.preCondition=LS;re.set=vl;re.setMutate=kt;re.setRecursiveValue=to;re.typeConverter=CS;re.undefinedSubstitution=VS});var Rd=H(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});var QS=bl(),Ps=class{static reset(){this.metadataStorage=new Map}static create(e,t={}){let n=typeof e=="string"?Symbol.for(e):e,s=Object.entries(t);if(!!s.length)for(let i=0,o=s.length;i<o;i++){let[a,l]=s[i],d=this.normalizePojoMetadata(l);this.metadataStorage.has(n)||this.metadataStorage.set(n,[]),this.metadataStorage.get(n)?.push([a,d])}}static retrieve(e){let t=this.metadataStorage.get(e);return t?t.map(([n,{type:s,depth:i}])=>{let o=s(),a=Array.isArray(o);return[n,{type:a?()=>o[0]:()=>o,isArray:a,depth:i}]}):[]}static normalizePojoMetadata(e){if(typeof e=="string"||typeof e=="symbol"||typeof e=="function"||Array.isArray(e))return{type:()=>this.toSymbol(e),depth:1};let t=e;return t.type=this.toSymbol(t.type),{type:()=>t.type,depth:t.depth}}static toSymbol(e){return typeof e=="string"?Symbol.for(e):Array.isArray(e)&&typeof e[0]=="string"?Symbol.for(e[0]):e}};Ps.metadataStorage=new Map;function KS(r={}){let{destinationConstructor:e=()=>({}),applyMetadata:t,postMap:n,preMap:s}={...QS.defaultStrategyInitializerOptions,...r};return i=>({destinationConstructor:e,mapper:i,get applyMetadata(){return t(this)},retrieveMetadata(...o){let a=new Map;for(let l=0,d=o.length;l<d;l++){let c=o[l];a.set(c,Ps.retrieve(c))}return a},preMap:s,postMap:n})}so.PojosMetadataMap=Ps;so.pojos=KS});var Tl=H((rC,$d)=>{"use strict";var Sl=Object.defineProperty,HS=Object.getOwnPropertyDescriptor,WS=Object.getOwnPropertyNames,ZS=Object.prototype.hasOwnProperty,JS=(r,e)=>{for(var t in e)Sl(r,t,{get:e[t],enumerable:!0})},YS=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of WS(e))!ZS.call(r,s)&&s!==t&&Sl(r,s,{get:()=>e[s],enumerable:!(n=HS(e,s))||n.enumerable});return r},XS=r=>YS(Sl({},"__esModule",{value:!0}),r),Id={};JS(Id,{BadRequestError:()=>tT});$d.exports=XS(Id);var eT=class extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}},tT=class extends eT{constructor(e,t={}){super(e);p(this,"statusCode",400);p(this,"logging",!1);p(this,"errors");this.errors=[{message:e,context:t}]}}});var Sr=H((sR,Hd)=>{"use strict";Hd.exports=TypeError});var Zd=H((iR,Wd)=>{Wd.exports=require("util").inspect});var Vs=H((oR,gf)=>{var zl=typeof Map=="function"&&Map.prototype,Ml=Object.getOwnPropertyDescriptor&&zl?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,So=zl&&Ml&&typeof Ml.get=="function"?Ml.get:null,Jd=zl&&Map.prototype.forEach,Gl=typeof Set=="function"&&Set.prototype,kl=Object.getOwnPropertyDescriptor&&Gl?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,To=Gl&&kl&&typeof kl.get=="function"?kl.get:null,Yd=Gl&&Set.prototype.forEach,OT=typeof WeakMap=="function"&&WeakMap.prototype,Gs=OT?WeakMap.prototype.has:null,AT=typeof WeakSet=="function"&&WeakSet.prototype,Us=AT?WeakSet.prototype.has:null,CT=typeof WeakRef=="function"&&WeakRef.prototype,Xd=CT?WeakRef.prototype.deref:null,RT=Boolean.prototype.valueOf,NT=Object.prototype.toString,MT=Function.prototype.toString,kT=String.prototype.match,Ul=String.prototype.slice,Yt=String.prototype.replace,IT=String.prototype.toUpperCase,ef=String.prototype.toLowerCase,uf=RegExp.prototype.test,tf=Array.prototype.concat,wt=Array.prototype.join,$T=Array.prototype.slice,rf=Math.floor,Dl=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Il=Object.getOwnPropertySymbols,ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,xn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Bs=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===xn?"object":"symbol")?Symbol.toStringTag:null,df=Object.prototype.propertyIsEnumerable,nf=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function sf(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||uf.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-rf(-r):rf(r);if(n!==r){var s=String(n),i=Ul.call(e,s.length+1);return Yt.call(s,t,"$&_")+"."+Yt.call(Yt.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Yt.call(e,t,"$&_")}var jl=Zd(),of=jl.custom,af=hf(of)?of:null,ff={__proto__:null,double:'"',single:"'"},DT={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};gf.exports=function r(e,t,n,s){var i=t||{};if(qt(i,"quoteStyle")&&!qt(ff,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qt(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=qt(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qt(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(qt(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return yf(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?sf(e,l):l}if(typeof e=="bigint"){var d=String(e)+"n";return a?sf(e,d):d}var c=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return Fl(e)?"[Array]":"[Object]";var h=eP(i,n);if(typeof s>"u")s=[];else if(mf(s,e)>=0)return"[Circular]";function f(U,Y,se){if(Y&&(s=$T.call(s),s.push(Y)),se){var ae={depth:i.depth};return qt(i,"quoteStyle")&&(ae.quoteStyle=i.quoteStyle),r(U,ae,n+1,s)}return r(U,i,n+1,s)}if(typeof e=="function"&&!lf(e)){var _=VT(e),g=bo(e,f);return"[Function"+(_?": "+_:" (anonymous)")+"]"+(g.length>0?" { "+wt.call(g,", ")+" }":"")}if(hf(e)){var v=xn?Yt.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ql.call(e);return typeof e=="object"&&!xn?zs(v):v}if(JT(e)){for(var x="<"+ef.call(String(e.nodeName)),T=e.attributes||[],M=0;M<T.length;M++)x+=" "+T[M].name+"="+pf(qT(T[M].value),"double",i);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+ef.call(String(e.nodeName))+">",x}if(Fl(e)){if(e.length===0)return"[]";var E=bo(e,f);return h&&!XT(E)?"["+Ll(E,h)+"]":"[ "+wt.call(E,", ")+" ]"}if(FT(e)){var A=bo(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!df.call(e,"cause")?"{ ["+String(e)+"] "+wt.call(tf.call("[cause]: "+f(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+wt.call(A,", ")+" }"}if(typeof e=="object"&&o){if(af&&typeof e[af]=="function"&&jl)return jl(e,{depth:c-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(QT(e)){var N=[];return Jd&&Jd.call(e,function(U,Y){N.push(f(Y,e,!0)+" => "+f(U,e))}),cf("Map",So.call(e),N,h)}if(WT(e)){var Q=[];return Yd&&Yd.call(e,function(U){Q.push(f(U,e))}),cf("Set",To.call(e),Q,h)}if(KT(e))return $l("WeakMap");if(ZT(e))return $l("WeakSet");if(HT(e))return $l("WeakRef");if(zT(e))return zs(f(Number(e)));if(UT(e))return zs(f(Dl.call(e)));if(GT(e))return zs(RT.call(e));if(LT(e))return zs(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!jT(e)&&!lf(e)){var R=bo(e,f),q=nf?nf(e)===Object.prototype:e instanceof Object||e.constructor===Object,z=e instanceof Object?"":"null prototype",P=!q&&Bs&&Object(e)===e&&Bs in e?Ul.call(Xt(e),8,-1):z?"Object":"",K=q||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",G=K+(P||z?"["+wt.call(tf.call([],P||[],z||[]),": ")+"] ":"");return R.length===0?G+"{}":h?G+"{"+Ll(R,h)+"}":G+"{ "+wt.call(R,", ")+" }"}return String(e)};function pf(r,e,t){var n=t.quoteStyle||e,s=ff[n];return s+r+s}function qT(r){return Yt.call(String(r),/"/g,"&quot;")}function Tr(r){return!Bs||!(typeof r=="object"&&(Bs in r||typeof r[Bs]<"u"))}function Fl(r){return Xt(r)==="[object Array]"&&Tr(r)}function jT(r){return Xt(r)==="[object Date]"&&Tr(r)}function lf(r){return Xt(r)==="[object RegExp]"&&Tr(r)}function FT(r){return Xt(r)==="[object Error]"&&Tr(r)}function LT(r){return Xt(r)==="[object String]"&&Tr(r)}function zT(r){return Xt(r)==="[object Number]"&&Tr(r)}function GT(r){return Xt(r)==="[object Boolean]"&&Tr(r)}function hf(r){if(xn)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!ql)return!1;try{return ql.call(r),!0}catch{}return!1}function UT(r){if(!r||typeof r!="object"||!Dl)return!1;try{return Dl.call(r),!0}catch{}return!1}var BT=Object.prototype.hasOwnProperty||function(r){return r in this};function qt(r,e){return BT.call(r,e)}function Xt(r){return NT.call(r)}function VT(r){if(r.name)return r.name;var e=kT.call(MT.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function mf(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function QT(r){if(!So||!r||typeof r!="object")return!1;try{So.call(r);try{To.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function KT(r){if(!Gs||!r||typeof r!="object")return!1;try{Gs.call(r,Gs);try{Us.call(r,Us)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function HT(r){if(!Xd||!r||typeof r!="object")return!1;try{return Xd.call(r),!0}catch{}return!1}function WT(r){if(!To||!r||typeof r!="object")return!1;try{To.call(r);try{So.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function ZT(r){if(!Us||!r||typeof r!="object")return!1;try{Us.call(r,Us);try{Gs.call(r,Gs)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function JT(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function yf(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return yf(Ul.call(r,0,e.maxStringLength),e)+n}var s=DT[e.quoteStyle||"single"];s.lastIndex=0;var i=Yt.call(Yt.call(r,s,"\\$1"),/[\x00-\x1f]/g,YT);return pf(i,"single",e)}function YT(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+IT.call(e.toString(16))}function zs(r){return"Object("+r+")"}function $l(r){return r+" { ? }"}function cf(r,e,t,n){var s=n?Ll(t,n):wt.call(t,", ");return r+" ("+e+") {"+s+"}"}function XT(r){for(var e=0;e<r.length;e++)if(mf(r[e],`
`)>=0)return!1;return!0}function eP(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=wt.call(Array(r.indent+1)," ");else return null;return{base:t,prev:wt.call(Array(e+1),t)}}function Ll(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+wt.call(r,","+t)+`
`+e.prev}function bo(r,e){var t=Fl(r),n=[];if(t){n.length=r.length;for(var s=0;s<r.length;s++)n[s]=qt(r,s)?e(r[s],r):""}var i=typeof Il=="function"?Il(r):[],o;if(xn){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var l in r)!qt(r,l)||t&&String(Number(l))===l&&l<r.length||xn&&o["$"+l]instanceof Symbol||(uf.call(/[^\w$]/,l)?n.push(e(l,r)+": "+e(r[l],r)):n.push(l+": "+e(r[l],r)));if(typeof Il=="function")for(var d=0;d<i.length;d++)df.call(r,i[d])&&n.push("["+e(i[d])+"]: "+e(r[i[d]],r));return n}});var _f=H((aR,vf)=>{"use strict";var tP=Vs(),rP=Sr(),Po=function(r,e,t){for(var n=r,s;(s=n.next)!=null;n=s)if(s.key===e)return n.next=s.next,t||(s.next=r.next,r.next=s),s},nP=function(r,e){if(!!r){var t=Po(r,e);return t&&t.value}},sP=function(r,e,t){var n=Po(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},iP=function(r,e){return r?!!Po(r,e):!1},oP=function(r,e){if(r)return Po(r,e,!0)};vf.exports=function(){var e,t={assert:function(n){if(!t.has(n))throw new rP("Side channel does not contain "+tP(n))},delete:function(n){var s=e&&e.next,i=oP(e,n);return i&&s&&s===i&&(e=void 0),!!i},get:function(n){return nP(e,n)},has:function(n){return iP(e,n)},set:function(n,s){e||(e={next:void 0}),sP(e,n,s)}};return t}});var Bl=H((lR,bf)=>{"use strict";bf.exports=Object});var Tf=H((cR,Sf)=>{"use strict";Sf.exports=Error});var wf=H((uR,Pf)=>{"use strict";Pf.exports=EvalError});var Ef=H((dR,xf)=>{"use strict";xf.exports=RangeError});var Af=H((fR,Of)=>{"use strict";Of.exports=ReferenceError});var Rf=H((pR,Cf)=>{"use strict";Cf.exports=SyntaxError});var Mf=H((hR,Nf)=>{"use strict";Nf.exports=URIError});var If=H((mR,kf)=>{"use strict";kf.exports=Math.abs});var Df=H((yR,$f)=>{"use strict";$f.exports=Math.floor});var jf=H((gR,qf)=>{"use strict";qf.exports=Math.max});var Lf=H((vR,Ff)=>{"use strict";Ff.exports=Math.min});var Gf=H((_R,zf)=>{"use strict";zf.exports=Math.pow});var Bf=H((bR,Uf)=>{"use strict";Uf.exports=Math.round});var Qf=H((SR,Vf)=>{"use strict";Vf.exports=Number.isNaN||function(e){return e!==e}});var Hf=H((TR,Kf)=>{"use strict";var aP=Qf();Kf.exports=function(e){return aP(e)||e===0?e:e<0?-1:1}});var Zf=H((PR,Wf)=>{"use strict";Wf.exports=Object.getOwnPropertyDescriptor});var Vl=H((wR,Jf)=>{"use strict";var wo=Zf();if(wo)try{wo([],"length")}catch{wo=null}Jf.exports=wo});var Xf=H((xR,Yf)=>{"use strict";var xo=Object.defineProperty||!1;if(xo)try{xo({},"a",{value:1})}catch{xo=!1}Yf.exports=xo});var tp=H((ER,ep)=>{"use strict";ep.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==s||a.enumerable!==!0)return!1}return!0}});var sp=H((OR,np)=>{"use strict";var rp=typeof Symbol<"u"&&Symbol,lP=tp();np.exports=function(){return typeof rp!="function"||typeof Symbol!="function"||typeof rp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:lP()}});var Ql=H((AR,ip)=>{"use strict";ip.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var Kl=H((CR,op)=>{"use strict";var cP=Bl();op.exports=cP.getPrototypeOf||null});var cp=H((RR,lp)=>{"use strict";var uP="Function.prototype.bind called on incompatible ",dP=Object.prototype.toString,fP=Math.max,pP="[object Function]",ap=function(e,t){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n},hP=function(e,t){for(var n=[],s=t||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},mP=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t};lp.exports=function(e){var t=this;if(typeof t!="function"||dP.apply(t)!==pP)throw new TypeError(uP+t);for(var n=hP(arguments,1),s,i=function(){if(this instanceof s){var c=t.apply(this,ap(n,arguments));return Object(c)===c?c:this}return t.apply(e,ap(n,arguments))},o=fP(0,t.length-n.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(s=Function("binder","return function ("+mP(a,",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var d=function(){};d.prototype=t.prototype,s.prototype=new d,d.prototype=null}return s}});var Qs=H((NR,up)=>{"use strict";var yP=cp();up.exports=Function.prototype.bind||yP});var Eo=H((MR,dp)=>{"use strict";dp.exports=Function.prototype.call});var Hl=H((kR,fp)=>{"use strict";fp.exports=Function.prototype.apply});var hp=H((IR,pp)=>{"use strict";pp.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var yp=H(($R,mp)=>{"use strict";var gP=Qs(),vP=Hl(),_P=Eo(),bP=hp();mp.exports=bP||gP.call(_P,vP)});var Wl=H((DR,gp)=>{"use strict";var SP=Qs(),TP=Sr(),PP=Eo(),wP=yp();gp.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new TP("a function is required");return wP(SP,PP,e)}});var Pp=H((qR,Tp)=>{"use strict";var xP=Wl(),vp=Vl(),bp;try{bp=[].__proto__===Array.prototype}catch(r){if(!r||typeof r!="object"||!("code"in r)||r.code!=="ERR_PROTO_ACCESS")throw r}var Zl=!!bp&&vp&&vp(Object.prototype,"__proto__"),Sp=Object,_p=Sp.getPrototypeOf;Tp.exports=Zl&&typeof Zl.get=="function"?xP([Zl.get]):typeof _p=="function"?function(e){return _p(e==null?e:Sp(e))}:!1});var Ap=H((jR,Op)=>{"use strict";var wp=Ql(),xp=Kl(),Ep=Pp();Op.exports=wp?function(e){return wp(e)}:xp?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return xp(e)}:Ep?function(e){return Ep(e)}:null});var Rp=H((FR,Cp)=>{"use strict";var EP=Function.prototype.call,OP=Object.prototype.hasOwnProperty,AP=Qs();Cp.exports=AP.call(EP,OP)});var Co=H((LR,Dp)=>{"use strict";var ne,CP=Bl(),RP=Tf(),NP=wf(),MP=Ef(),kP=Af(),Cn=Rf(),An=Sr(),IP=Mf(),$P=If(),DP=Df(),qP=jf(),jP=Lf(),FP=Gf(),LP=Bf(),zP=Hf(),Ip=Function,Jl=function(r){try{return Ip('"use strict"; return ('+r+").constructor;")()}catch{}},Ks=Vl(),GP=Xf(),Yl=function(){throw new An},UP=Ks?function(){try{return arguments.callee,Yl}catch{try{return Ks(arguments,"callee").get}catch{return Yl}}}():Yl,En=sp()(),je=Ap(),BP=Kl(),VP=Ql(),$p=Hl(),Hs=Eo(),On={},QP=typeof Uint8Array>"u"||!je?ne:je(Uint8Array),Pr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ne:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ne:ArrayBuffer,"%ArrayIteratorPrototype%":En&&je?je([][Symbol.iterator]()):ne,"%AsyncFromSyncIteratorPrototype%":ne,"%AsyncFunction%":On,"%AsyncGenerator%":On,"%AsyncGeneratorFunction%":On,"%AsyncIteratorPrototype%":On,"%Atomics%":typeof Atomics>"u"?ne:Atomics,"%BigInt%":typeof BigInt>"u"?ne:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ne:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ne:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ne:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":RP,"%eval%":eval,"%EvalError%":NP,"%Float16Array%":typeof Float16Array>"u"?ne:Float16Array,"%Float32Array%":typeof Float32Array>"u"?ne:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ne:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ne:FinalizationRegistry,"%Function%":Ip,"%GeneratorFunction%":On,"%Int8Array%":typeof Int8Array>"u"?ne:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ne:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ne:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":En&&je?je(je([][Symbol.iterator]())):ne,"%JSON%":typeof JSON=="object"?JSON:ne,"%Map%":typeof Map>"u"?ne:Map,"%MapIteratorPrototype%":typeof Map>"u"||!En||!je?ne:je(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":CP,"%Object.getOwnPropertyDescriptor%":Ks,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ne:Promise,"%Proxy%":typeof Proxy>"u"?ne:Proxy,"%RangeError%":MP,"%ReferenceError%":kP,"%Reflect%":typeof Reflect>"u"?ne:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ne:Set,"%SetIteratorPrototype%":typeof Set>"u"||!En||!je?ne:je(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ne:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":En&&je?je(""[Symbol.iterator]()):ne,"%Symbol%":En?Symbol:ne,"%SyntaxError%":Cn,"%ThrowTypeError%":UP,"%TypedArray%":QP,"%TypeError%":An,"%Uint8Array%":typeof Uint8Array>"u"?ne:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ne:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ne:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ne:Uint32Array,"%URIError%":IP,"%WeakMap%":typeof WeakMap>"u"?ne:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ne:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ne:WeakSet,"%Function.prototype.call%":Hs,"%Function.prototype.apply%":$p,"%Object.defineProperty%":GP,"%Object.getPrototypeOf%":BP,"%Math.abs%":$P,"%Math.floor%":DP,"%Math.max%":qP,"%Math.min%":jP,"%Math.pow%":FP,"%Math.round%":LP,"%Math.sign%":zP,"%Reflect.getPrototypeOf%":VP};if(je)try{null.error}catch(r){Np=je(je(r)),Pr["%Error.prototype%"]=Np}var Np,KP=function r(e){var t;if(e==="%AsyncFunction%")t=Jl("async function () {}");else if(e==="%GeneratorFunction%")t=Jl("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Jl("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&je&&(t=je(s.prototype))}return Pr[e]=t,t},Mp={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ws=Qs(),Oo=Rp(),HP=Ws.call(Hs,Array.prototype.concat),WP=Ws.call($p,Array.prototype.splice),kp=Ws.call(Hs,String.prototype.replace),Ao=Ws.call(Hs,String.prototype.slice),ZP=Ws.call(Hs,RegExp.prototype.exec),JP=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,YP=/\\(\\)?/g,XP=function(e){var t=Ao(e,0,1),n=Ao(e,-1);if(t==="%"&&n!=="%")throw new Cn("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Cn("invalid intrinsic syntax, expected opening `%`");var s=[];return kp(e,JP,function(i,o,a,l){s[s.length]=a?kp(l,YP,"$1"):o||i}),s},ew=function(e,t){var n=e,s;if(Oo(Mp,n)&&(s=Mp[n],n="%"+s[0]+"%"),Oo(Pr,n)){var i=Pr[n];if(i===On&&(i=KP(n)),typeof i>"u"&&!t)throw new An("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Cn("intrinsic "+e+" does not exist!")};Dp.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new An("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new An('"allowMissing" argument must be a boolean');if(ZP(/^%?[^%]*%?$/,e)===null)throw new Cn("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=XP(e),s=n.length>0?n[0]:"",i=ew("%"+s+"%",t),o=i.name,a=i.value,l=!1,d=i.alias;d&&(s=d[0],WP(n,HP([0,1],d)));for(var c=1,h=!0;c<n.length;c+=1){var f=n[c],_=Ao(f,0,1),g=Ao(f,-1);if((_==='"'||_==="'"||_==="`"||g==='"'||g==="'"||g==="`")&&_!==g)throw new Cn("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(l=!0),s+="."+f,o="%"+s+"%",Oo(Pr,o))a=Pr[o];else if(a!=null){if(!(f in a)){if(!t)throw new An("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ks&&c+1>=n.length){var v=Ks(a,f);h=!!v,h&&"get"in v&&!("originalValue"in v.get)?a=v.get:a=a[f]}else h=Oo(a,f),a=a[f];h&&!l&&(Pr[o]=a)}}return a}});var Xl=H((zR,Fp)=>{"use strict";var qp=Co(),jp=Wl(),tw=jp([qp("%String.prototype.indexOf%")]);Fp.exports=function(e,t){var n=qp(e,!!t);return typeof n=="function"&&tw(e,".prototype.")>-1?jp([n]):n}});var ec=H((GR,zp)=>{"use strict";var rw=Co(),Zs=Xl(),nw=Vs(),sw=Sr(),Lp=rw("%Map%",!0),iw=Zs("Map.prototype.get",!0),ow=Zs("Map.prototype.set",!0),aw=Zs("Map.prototype.has",!0),lw=Zs("Map.prototype.delete",!0),cw=Zs("Map.prototype.size",!0);zp.exports=!!Lp&&function(){var e,t={assert:function(n){if(!t.has(n))throw new sw("Side channel does not contain "+nw(n))},delete:function(n){if(e){var s=lw(e,n);return cw(e)===0&&(e=void 0),s}return!1},get:function(n){if(e)return iw(e,n)},has:function(n){return e?aw(e,n):!1},set:function(n,s){e||(e=new Lp),ow(e,n,s)}};return t}});var Up=H((UR,Gp)=>{"use strict";var uw=Co(),No=Xl(),dw=Vs(),Ro=ec(),fw=Sr(),Rn=uw("%WeakMap%",!0),pw=No("WeakMap.prototype.get",!0),hw=No("WeakMap.prototype.set",!0),mw=No("WeakMap.prototype.has",!0),yw=No("WeakMap.prototype.delete",!0);Gp.exports=Rn?function(){var e,t,n={assert:function(s){if(!n.has(s))throw new fw("Side channel does not contain "+dw(s))},delete:function(s){if(Rn&&s&&(typeof s=="object"||typeof s=="function")){if(e)return yw(e,s)}else if(Ro&&t)return t.delete(s);return!1},get:function(s){return Rn&&s&&(typeof s=="object"||typeof s=="function")&&e?pw(e,s):t&&t.get(s)},has:function(s){return Rn&&s&&(typeof s=="object"||typeof s=="function")&&e?mw(e,s):!!t&&t.has(s)},set:function(s,i){Rn&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Rn),hw(e,s,i)):Ro&&(t||(t=Ro()),t.set(s,i))}};return n}:Ro});var Vp=H((BR,Bp)=>{"use strict";var gw=Sr(),vw=Vs(),_w=_f(),bw=ec(),Sw=Up(),Tw=Sw||bw||_w;Bp.exports=function(){var e,t={assert:function(n){if(!t.has(n))throw new gw("Side channel does not contain "+vw(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,s){e||(e=Tw()),e.set(n,s)}};return t}});var Mo=H((VR,Qp)=>{"use strict";var Pw=String.prototype.replace,ww=/%20/g,tc={RFC1738:"RFC1738",RFC3986:"RFC3986"};Qp.exports={default:tc.RFC3986,formatters:{RFC1738:function(r){return Pw.call(r,ww,"+")},RFC3986:function(r){return String(r)}},RFC1738:tc.RFC1738,RFC3986:tc.RFC3986}});var sc=H((QR,Hp)=>{"use strict";var xw=Mo(),rc=Object.prototype.hasOwnProperty,wr=Array.isArray,xt=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),Ew=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(wr(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);t.obj[t.prop]=s}}},Kp=function(e,t){for(var n=t&&t.plainObjects?{__proto__:null}:{},s=0;s<e.length;++s)typeof e[s]<"u"&&(n[s]=e[s]);return n},Ow=function r(e,t,n){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(wr(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!rc.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var s=e;return wr(e)&&!wr(t)&&(s=Kp(e,n)),wr(e)&&wr(t)?(t.forEach(function(i,o){if(rc.call(e,o)){var a=e[o];a&&typeof a=="object"&&i&&typeof i=="object"?e[o]=r(a,i,n):e.push(i)}else e[o]=i}),e):Object.keys(t).reduce(function(i,o){var a=t[o];return rc.call(i,o)?i[o]=r(i[o],a,n):i[o]=a,i},s)},Aw=function(e,t){return Object.keys(t).reduce(function(n,s){return n[s]=t[s],n},e)},Cw=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},nc=1024,Rw=function(e,t,n,s,i){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(_){return"%26%23"+parseInt(_.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=nc){for(var d=o.length>=nc?o.slice(l,l+nc):o,c=[],h=0;h<d.length;++h){var f=d.charCodeAt(h);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===xw.RFC1738&&(f===40||f===41)){c[c.length]=d.charAt(h);continue}if(f<128){c[c.length]=xt[f];continue}if(f<2048){c[c.length]=xt[192|f>>6]+xt[128|f&63];continue}if(f<55296||f>=57344){c[c.length]=xt[224|f>>12]+xt[128|f>>6&63]+xt[128|f&63];continue}h+=1,f=65536+((f&1023)<<10|d.charCodeAt(h)&1023),c[c.length]=xt[240|f>>18]+xt[128|f>>12&63]+xt[128|f>>6&63]+xt[128|f&63]}a+=c.join("")}return a},Nw=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],s=0;s<t.length;++s)for(var i=t[s],o=i.obj[i.prop],a=Object.keys(o),l=0;l<a.length;++l){var d=a[l],c=o[d];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(t.push({obj:o,prop:d}),n.push(c))}return Ew(t),e},Mw=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},kw=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Iw=function(e,t){return[].concat(e,t)},$w=function(e,t){if(wr(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(t(e[s]));return n}return t(e)};Hp.exports={arrayToObject:Kp,assign:Aw,combine:Iw,compact:Nw,decode:Cw,encode:Rw,isBuffer:kw,isRegExp:Mw,maybeMap:$w,merge:Ow}});var eh=H((KR,Xp)=>{"use strict";var Zp=Vp(),ko=sc(),Js=Mo(),Dw=Object.prototype.hasOwnProperty,Jp={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Et=Array.isArray,qw=Array.prototype.push,Yp=function(r,e){qw.apply(r,Et(e)?e:[e])},jw=Date.prototype.toISOString,Wp=Js.default,$e={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ko.encode,encodeValuesOnly:!1,filter:void 0,format:Wp,formatter:Js.formatters[Wp],indices:!1,serializeDate:function(e){return jw.call(e)},skipNulls:!1,strictNullHandling:!1},Fw=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ic={},Lw=function r(e,t,n,s,i,o,a,l,d,c,h,f,_,g,v,x,T,M){for(var E=e,A=M,N=0,Q=!1;(A=A.get(ic))!==void 0&&!Q;){var R=A.get(e);if(N+=1,typeof R<"u"){if(R===N)throw new RangeError("Cyclic object value");Q=!0}typeof A.get(ic)>"u"&&(N=0)}if(typeof c=="function"?E=c(t,E):E instanceof Date?E=_(E):n==="comma"&&Et(E)&&(E=ko.maybeMap(E,function(te){return te instanceof Date?_(te):te})),E===null){if(o)return d&&!x?d(t,$e.encoder,T,"key",g):t;E=""}if(Fw(E)||ko.isBuffer(E)){if(d){var q=x?t:d(t,$e.encoder,T,"key",g);return[v(q)+"="+v(d(E,$e.encoder,T,"value",g))]}return[v(t)+"="+v(String(E))]}var z=[];if(typeof E>"u")return z;var P;if(n==="comma"&&Et(E))x&&d&&(E=ko.maybeMap(E,d)),P=[{value:E.length>0?E.join(",")||null:void 0}];else if(Et(c))P=c;else{var K=Object.keys(E);P=h?K.sort(h):K}var G=l?String(t).replace(/\./g,"%2E"):String(t),U=s&&Et(E)&&E.length===1?G+"[]":G;if(i&&Et(E)&&E.length===0)return U+"[]";for(var Y=0;Y<P.length;++Y){var se=P[Y],ae=typeof se=="object"&&se&&typeof se.value<"u"?se.value:E[se];if(!(a&&ae===null)){var ke=f&&l?String(se).replace(/\./g,"%2E"):String(se),O=Et(E)?typeof n=="function"?n(U,ke):U:U+(f?"."+ke:"["+ke+"]");M.set(e,N);var D=Zp();D.set(ic,M),Yp(z,r(ae,O,n,s,i,o,a,l,n==="comma"&&x&&Et(E)?null:d,c,h,f,_,g,v,x,T,D))}}return z},zw=function(e){if(!e)return $e;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||$e.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Js.default;if(typeof e.format<"u"){if(!Dw.call(Js.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=Js.formatters[n],i=$e.filter;(typeof e.filter=="function"||Et(e.filter))&&(i=e.filter);var o;if(e.arrayFormat in Jp?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=$e.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:$e.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:$e.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:$e.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:$e.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?$e.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:$e.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:$e.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:$e.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:$e.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:$e.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:$e.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:$e.strictNullHandling}};Xp.exports=function(r,e){var t=r,n=zw(e),s,i;typeof n.filter=="function"?(i=n.filter,t=i("",t)):Et(n.filter)&&(i=n.filter,s=i);var o=[];if(typeof t!="object"||t===null)return"";var a=Jp[n.arrayFormat],l=a==="comma"&&n.commaRoundTrip;s||(s=Object.keys(t)),n.sort&&s.sort(n.sort);for(var d=Zp(),c=0;c<s.length;++c){var h=s[c],f=t[h];n.skipNulls&&f===null||Yp(o,Lw(f,h,a,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}var _=o.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),_.length>0?g+_:""}});var sh=H((HR,nh)=>{"use strict";var xr=sc(),oc=Object.prototype.hasOwnProperty,th=Array.isArray,Ee={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:xr.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},Gw=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},rh=function(r,e,t){if(r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1)return r.split(",");if(e.throwOnLimitExceeded&&t>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return r},Uw="utf8=%26%2310003%3B",Bw="utf8=%E2%9C%93",Vw=function(e,t){var n={__proto__:null},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=t.parameterLimit===1/0?void 0:t.parameterLimit,o=s.split(t.delimiter,t.throwOnLimitExceeded?i+1:i);if(t.throwOnLimitExceeded&&o.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(i===1?"":"s")+" allowed.");var a=-1,l,d=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===Bw?d="utf-8":o[l]===Uw&&(d="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var c=o[l],h=c.indexOf("]="),f=h===-1?c.indexOf("="):h+1,_,g;f===-1?(_=t.decoder(c,Ee.decoder,d,"key"),g=t.strictNullHandling?null:""):(_=t.decoder(c.slice(0,f),Ee.decoder,d,"key"),g=xr.maybeMap(rh(c.slice(f+1),t,th(n[_])?n[_].length:0),function(x){return t.decoder(x,Ee.decoder,d,"value")})),g&&t.interpretNumericEntities&&d==="iso-8859-1"&&(g=Gw(String(g))),c.indexOf("[]=")>-1&&(g=th(g)?[g]:g);var v=oc.call(n,_);v&&t.duplicates==="combine"?n[_]=xr.combine(n[_],g):(!v||t.duplicates==="last")&&(n[_]=g)}return n},Qw=function(r,e,t,n){var s=0;if(r.length>0&&r[r.length-1]==="[]"){var i=r.slice(0,-1).join("");s=Array.isArray(e)&&e[i]?e[i].length:0}for(var o=n?e:rh(e,t,s),a=r.length-1;a>=0;--a){var l,d=r[a];if(d==="[]"&&t.parseArrays)l=t.allowEmptyArrays&&(o===""||t.strictNullHandling&&o===null)?[]:xr.combine([],o);else{l=t.plainObjects?{__proto__:null}:{};var c=d.charAt(0)==="["&&d.charAt(d.length-1)==="]"?d.slice(1,-1):d,h=t.decodeDotInKeys?c.replace(/%2E/g,"."):c,f=parseInt(h,10);!t.parseArrays&&h===""?l={0:o}:!isNaN(f)&&d!==h&&String(f)===h&&f>=0&&t.parseArrays&&f<=t.arrayLimit?(l=[],l[f]=o):h!=="__proto__"&&(l[h]=o)}o=l}return o},Kw=function(e,t,n,s){if(!!e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(i),d=l?i.slice(0,l.index):i,c=[];if(d){if(!n.plainObjects&&oc.call(Object.prototype,d)&&!n.allowPrototypes)return;c.push(d)}for(var h=0;n.depth>0&&(l=a.exec(i))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&oc.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");c.push("["+i.slice(l.index)+"]")}return Qw(c,t,n,s)}},Hw=function(e){if(!e)return Ee;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=typeof e.charset>"u"?Ee.charset:e.charset,n=typeof e.duplicates>"u"?Ee.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ee.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ee.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ee.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ee.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ee.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ee.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ee.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ee.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ee.decoder,delimiter:typeof e.delimiter=="string"||xr.isRegExp(e.delimiter)?e.delimiter:Ee.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ee.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ee.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ee.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ee.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ee.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ee.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}};nh.exports=function(r,e){var t=Hw(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?{__proto__:null}:{};for(var n=typeof r=="string"?Vw(r,t):r,s=t.plainObjects?{__proto__:null}:{},i=Object.keys(n),o=0;o<i.length;++o){var a=i[o],l=Kw(a,n[a],t,typeof r=="string");s=xr.merge(s,l,t)}return t.allowSparse===!0?s:xr.compact(s)}});var oh=H((WR,ih)=>{"use strict";var Ww=eh(),Zw=sh(),Jw=Mo();ih.exports={formats:Jw,parse:Zw,stringify:Ww}});var nE={};pa(nE,{lambdaHandler:()=>rE});module.exports=Tv(nE);var iu=He(require("os"),1),ou=He(require("fs"),1);var bi=new Map,ha=new Map,ma=Symbol("OriginError"),Ir={},nt=class extends Promise{constructor(e,t,n,s,i={}){let o,a;super((l,d)=>{o=l,a=d}),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=t,this.handler=n,this.canceller=s,this.options=i,this.state=null,this.statement=null,this.resolve=l=>(this.active=!1,o(l)),this.reject=l=>(this.active=!1,a(l)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[ma]=this.handler.debug?new Error:this.tagged&&Pv(this.strings)}get origin(){return(this.handler.debug?this[ma].stack:this.tagged&&ha.has(this.strings)?ha.get(this.strings):ha.set(this.strings,this[ma].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(e=1,t){if(this.options.simple=!1,typeof e=="function"&&(t=e,e=1),this.cursorRows=e,typeof t=="function")return this.cursorFn=t,this;let n;return{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};n&&n();let s=new Promise((i,o)=>{this.cursorFn=a=>(i({value:a,done:!1}),new Promise(l=>n=l)),this.resolve=()=>(this.active=!1,i({done:!0})),this.reject=a=>(this.active=!1,o(a))});return this.execute(),s},return(){return n&&n(Ir),{done:!0}}})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw new Error(".stream has been renamed to .forEach")}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}};function Pv(r){if(bi.has(r))return bi.get(r);let e=Error.stackTraceLimit;return Error.stackTraceLimit=4,bi.set(r,new Error),Error.stackTraceLimit=e,bi.get(r)}var or=class extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}},Ne={connection:zc,postgres:Gc,generic:Uc,notSupported:Bc};function zc(r,e,t){let{host:n,port:s}=t||e,i=Object.assign(new Error("write "+r+" "+(e.path||n+":"+s)),{code:r,errno:r,address:e.path||n},e.path?{}:{port:s});return Error.captureStackTrace(i,zc),i}function Gc(r){let e=new or(r);return Error.captureStackTrace(e,Gc),e}function Uc(r,e){let t=Object.assign(new Error(r+": "+e),{code:r});return Error.captureStackTrace(t,Uc),t}function Bc(r){let e=Object.assign(new Error(r+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:r});return Error.captureStackTrace(e,Bc),e}var wv={string:{to:25,from:null,serialize:r=>""+r},number:{to:0,from:[21,23,26,700,701],serialize:r=>""+r,parse:r=>+r},json:{to:114,from:[114,3802],serialize:r=>JSON.stringify(r),parse:r=>JSON.parse(r)},boolean:{to:16,from:16,serialize:r=>r===!0?"t":"f",parse:r=>r==="t"},date:{to:1184,from:[1082,1114,1184],serialize:r=>(r instanceof Date?r:new Date(r)).toISOString(),parse:r=>new Date(r)},bytea:{to:17,from:17,serialize:r=>"\\x"+Buffer.from(r).toString("hex"),parse:r=>Buffer.from(r.slice(2),"hex")}},Hn=class{then(){ya()}catch(){ya()}finally(){ya()}},$r=class extends Hn{constructor(e){super(),this.value=wi(e)}},ut=class extends Hn{constructor(e,t,n){super(),this.value=e,this.type=t,this.array=n}},Wn=class extends Hn{constructor(e,t){super(),this.first=e,this.rest=t}build(e,t,n,s){let i=xv.map(([o,a])=>({fn:a,i:e.search(o)})).sort((o,a)=>o.i-a.i).pop();return i.i===-1?Sa(this.first,s):i.fn(this.first,this.rest,t,n,s)}};function Pi(r,e,t,n){let s=r instanceof ut?r.value:r;if(s===void 0&&(r instanceof ut?r.value=n.transform.undefined:s=r=n.transform.undefined,s===void 0))throw Ne.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+t.push(r instanceof ut?(e.push(r.value),r.array?r.array[r.type||Ti(r.value)]||r.type||Hc(r.value):r.type):(e.push(r),Ti(r)))}var Qc=Zc(wv);function _a(r,e,t,n,s,i){for(let o=1;o<r.strings.length;o++)e+=ba(e,t,n,s,i)+r.strings[o],t=r.args[o];return e}function ba(r,e,t,n,s){return e instanceof Wn?e.build(r,t,n,s):e instanceof nt?va(e,t,n,s):e instanceof $r?e.value:e&&e[0]instanceof nt?e.reduce((i,o)=>i+" "+va(o,t,n,s),""):Pi(e,t,n,s)}function va(r,e,t,n){return r.fragment=!0,_a(r,r.strings[0],r.args[0],e,t,n)}function Kc(r,e,t,n,s){return r.map(i=>"("+n.map(o=>ba("values",i[o],e,t,s)).join(",")+")").join(",")}function Vc(r,e,t,n,s){let i=Array.isArray(r[0]),o=e.length?e.flat():Object.keys(i?r[0]:r);return Kc(i?r:[r],t,n,o,s)}function Si(r,e,t,n,s){if(typeof r=="string"&&(r=[r].concat(e)),Array.isArray(r))return Sa(r,s);let i;return(e.length?e.flat():Object.keys(r)).map(a=>(i=r[a],(i instanceof nt?va(i,t,n,s):i instanceof $r?i.value:Pi(i,t,n,s))+" as "+wi(s.transform.column.to?s.transform.column.to(a):a))).join(",")}var xv=Object.entries({values:Vc,in:(...r)=>{let e=Vc(...r);return e==="()"?"(null)":e},select:Si,as:Si,returning:Si,"\\(":Si,update(r,e,t,n,s){return(e.length?e.flat():Object.keys(r)).map(i=>wi(s.transform.column.to?s.transform.column.to(i):i)+"="+ba("values",r[i],t,n,s))},insert(r,e,t,n,s){let i=e.length?e.flat():Object.keys(Array.isArray(r)?r[0]:r);return"("+Sa(i,s)+")values"+Kc(Array.isArray(r)?r:[r],t,n,i,s)}}).map(([r,e])=>[new RegExp("((?:^|[\\s(])"+r+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),e]);function ya(){throw Ne.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}var Ev=Qc.serializers,Ov=Qc.parsers;function Hc(r){return Array.isArray(r)?Hc(r[0]):typeof r=="string"?1009:0}var Wc=function(r){let e=Zc(r||{});return{serializers:Object.assign({},Ev,e.serializers),parsers:Object.assign({},Ov,e.parsers)}};function Zc(r){return Object.keys(r).reduce((e,t)=>(r[t].from&&[].concat(r[t].from).forEach(n=>e.parsers[n]=r[t].parse),r[t].serialize&&(e.serializers[r[t].to]=r[t].serialize,r[t].from&&[].concat(r[t].from).forEach(n=>e.serializers[n]=r[t].serialize)),e),{parsers:{},serializers:{}})}function Sa(r,{transform:{column:e}}){return r.map(t=>wi(e.to?e.to(t):t)).join(",")}var wi=function(e){return'"'+e.replace(/"/g,'""').replace(/\./g,'"."')+'"'},Ti=function r(e){return e instanceof ut?e.type:e instanceof Date?1184:e instanceof Uint8Array?17:e===!0||e===!1?16:typeof e=="bigint"?20:Array.isArray(e)?r(e[0]):0},Av=/\\/g,Cv=/"/g;function Rv(r){return r.replace(Av,"\\\\").replace(Cv,'\\"')}var Jc=function r(e,t,n,s){if(Array.isArray(e)===!1)return e;if(!e.length)return"{}";let i=e[0],o=s===1020?";":",";return Array.isArray(i)&&!i.type?"{"+e.map(a=>r(a,t,n,s)).join(o)+"}":"{"+e.map(a=>{if(a===void 0&&(a=n.transform.undefined,a===void 0))throw Ne.generic("UNDEFINED_VALUE","Undefined values are not allowed");return a===null?"null":'"'+Rv(t?t(a.type?a.value:a):""+a)+'"'}).join(o)+"}"},ga={i:0,char:null,str:"",quoted:!1,last:0},Yc=function(e,t,n){return ga.i=ga.last=0,Xc(ga,e,t,n)};function Xc(r,e,t,n){let s=[],i=n===1020?";":",";for(;r.i<e.length;r.i++){if(r.char=e[r.i],r.quoted)r.char==="\\"?r.str+=e[++r.i]:r.char==='"'?(s.push(t?t(r.str):r.str),r.str="",r.quoted=e[r.i+1]==='"',r.last=r.i+2):r.str+=r.char;else if(r.char==='"')r.quoted=!0;else if(r.char==="{")r.last=++r.i,s.push(Xc(r,e,t,n));else if(r.char==="}"){r.quoted=!1,r.last<r.i&&s.push(t?t(e.slice(r.last,r.i)):e.slice(r.last,r.i)),r.last=r.i+1;break}else r.char===i&&r.p!=="}"&&r.p!=='"'&&(s.push(t?t(e.slice(r.last,r.i)):e.slice(r.last,r.i)),r.last=r.i+1);r.p=r.char}return r.last<r.i&&s.push(t?t(e.slice(r.last,r.i+1)):e.slice(r.last,r.i+1)),s}var ar=r=>{let e=r[0];for(let t=1;t<r.length;t++)e+=r[t]==="_"?r[++t].toUpperCase():r[t];return e},lr=r=>{let e=r[0].toUpperCase();for(let t=1;t<r.length;t++)e+=r[t]==="_"?r[++t].toUpperCase():r[t];return e},cr=r=>r.replace(/_/g,"-"),Zn=r=>r.replace(/([A-Z])/g,"_$1").toLowerCase(),Jn=r=>(r.slice(0,1)+r.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),Yn=r=>r.replace(/-/g,"_");function Ta(r){return function e(t,n){return typeof t=="object"&&t!==null&&(n.type===114||n.type===3802)?Array.isArray(t)?t.map(s=>e(s,n)):Object.entries(t).reduce((s,[i,o])=>Object.assign(s,{[r(i)]:e(o,n)}),{}):t}}ar.column={from:ar};ar.value={from:Ta(ar)};Zn.column={to:Zn};var Pa={...ar};Pa.column.to=Zn;lr.column={from:lr};lr.value={from:Ta(lr)};Jn.column={to:Jn};var wa={...lr};wa.column.to=Jn;cr.column={from:cr};cr.value={from:Ta(cr)};Yn.column={to:Yn};var xa={...cr};xa.column.to=Yn;var Aa=He(require("net"),1),ru=He(require("tls"),1),qr=He(require("crypto"),1),Oi=He(require("stream"),1),Ca=require("perf_hooks");var Lt=class extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}};var st=Nv;function Nv(r=[]){let e=r.slice(),t=0;return{get length(){return e.length-t},remove:n=>{let s=e.indexOf(n);return s===-1?null:(e.splice(s,1),n)},push:n=>(e.push(n),n),shift:()=>{let n=e[t++];return t===e.length?(t=0,e=[]):e[t-1]=void 0,n}}}var We=Buffer.allocUnsafe(256),Mv="BCcDdEFfHPpQSX".split("").reduce((r,e)=>{let t=e.charCodeAt(0);return r[e]=()=>(We[0]=t,ue.i=5,ue),r},{}),ue=Object.assign(kv,Mv,{N:String.fromCharCode(0),i:0,inc(r){return ue.i+=r,ue},str(r){let e=Buffer.byteLength(r);return xi(e),ue.i+=We.write(r,ue.i,e,"utf8"),ue},i16(r){return xi(2),We.writeUInt16BE(r,ue.i),ue.i+=2,ue},i32(r,e){return e||e===0?(We.writeUInt32BE(r,e),ue):(xi(4),We.writeUInt32BE(r,ue.i),ue.i+=4,ue)},z(r){return xi(r),We.fill(0,ue.i,ue.i+r),ue.i+=r,ue},raw(r){return We=Buffer.concat([We.subarray(0,ue.i),r]),ue.i=We.length,ue},end(r=1){We.writeUInt32BE(ue.i-r,r);let e=We.subarray(0,ue.i);return ue.i=0,We=Buffer.allocUnsafe(256),e}}),B=ue;function xi(r){if(We.length-ue.i<r){let e=We,t=e.length;We=Buffer.allocUnsafe(t+(t>>1)+r),e.copy(We)}}function kv(){return ue.i=0,ue}var Ra=nu,Iv=1,zt=B().S().end(),eu=B().H().end(),$v=B().i32(8).i32(80877103).end(8),Dv=Buffer.concat([B().E().str(B.N).i32(0).end(),zt]),qv=B().D().str("S").str(B.N).end(),Dr=()=>{},jv=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),Fv={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function nu(r,e={},{onopen:t=Dr,onend:n=Dr,onclose:s=Dr}={}){let{ssl:i,max:o,user:a,host:l,port:d,database:c,parsers:h,transform:f,onnotice:_,onnotify:g,onparameter:v,max_pipeline:x,keep_alive:T,backoff:M,target_session_attrs:E}=r,A=st(),N=Iv++,Q={pid:null,secret:null},R=Oa(da,r.idle_timeout),q=Oa(da,r.max_lifetime),z=Oa(Cg,r.connect_timeout),P=null,K,G=new Lt,U=Buffer.alloc(0),Y=r.fetch_types,se={},ae={},ke=Math.random().toString(36).slice(2),O=1,D=0,te=0,ie=0,ge=0,ee=0,he=0,Re=0,Te=null,ve=null,Be=!1,me=null,lt=null,Ve=null,jt=null,Ie=null,_e=null,ct=null,_t=null,k=null,Bn=null,Qe={queue:e.closed,idleTimer:R,connect(m){Ve=m||!0,$c()},terminate:Qn,execute:Vn,cancel:xg,end:da,count:0,id:N};return e.closed&&e.closed.push(Qe),Qe;async function wg(){let m;try{m=r.socket?await Promise.resolve(r.socket(r)):new Aa.default.Socket}catch(b){kr(b);return}return m.on("error",kr),m.on("close",Dc),m.on("drain",kc),m}async function xg({pid:m,secret:b},V,le){try{K=B().i32(16).i32(80877102).i32(m).i32(b).end(16),await Ic(),P.once("error",le),P.once("close",V)}catch(we){le(we)}}function Vn(m){if(Be)return _i(m,Ne.connection("CONNECTION_DESTROYED",r));if(!m.cancelled)try{return m.state=Q,k?A.push(m):(k=m,k.active=!0),Ag(m),Fe(Eg(m))&&!m.describeFirst&&!m.cursorFn&&A.length<x&&(!m.options.onexecute||m.options.onexecute(Qe))}catch(b){return A.length===0&&Fe(zt),bt(b),!0}}function Eg(m){if(m.parameters.length>=65534)throw Ne.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return m.options.simple?B().Q().str(m.statement.string+B.N).end():m.describeFirst?Buffer.concat([Rc(m),eu]):m.prepare?m.prepared?vi(m):Buffer.concat([Rc(m),vi(m)]):Og(m)}function Rc(m){return Buffer.concat([jc(m.statement.string,m.parameters,m.statement.types,m.statement.name),pv("S",m.statement.name)])}function vi(m){return Buffer.concat([fv(m.parameters,m.statement.types,m.statement.name,m.cursorName),m.cursorFn?Fc("",m.cursorRows):Dv])}function Og(m){return Buffer.concat([jc(m.statement.string,m.parameters,m.statement.types),qv,vi(m)])}function Ag(m){let b=[],V=[],le=_a(m,m.strings[0],m.args[0],b,V,r);!m.tagged&&m.args.forEach(we=>Pi(we,b,V,r)),m.prepare=r.prepare&&("prepare"in m.options?m.options.prepare:!0),m.string=le,m.signature=m.prepare&&V+le,m.onlyDescribe&&delete ae[m.signature],m.parameters=m.parameters||b,m.prepared=m.prepare&&m.signature in ae,m.describeFirst=m.onlyDescribe||b.length&&!m.prepared,m.statement=m.prepared?ae[m.signature]:{string:le,types:V,name:m.prepare?ke+O++:""},typeof r.debug=="function"&&r.debug(N,le,b,V)}function Fe(m,b){return _e=_e?Buffer.concat([_e,m]):Buffer.from(m),b||_e.length>=1024?Nc(b):(ve===null&&(ve=setImmediate(Nc)),!0)}function Nc(m){let b=P.write(_e,m);return ve!==null&&clearImmediate(ve),_e=ve=null,b}function Cg(){bt(Ne.connection("CONNECT_TIMEOUT",r,P)),P.destroy()}async function Mc(){if(Fe($v),!await new Promise(b=>P.once("data",V=>b(V[0]===83)))&&i==="prefer")return Mr();P.removeAllListeners(),P=ru.default.connect({socket:P,servername:Aa.default.isIP(P.host)?void 0:P.host,...i==="require"||i==="allow"||i==="prefer"?{rejectUnauthorized:!1}:i==="verify-full"?{}:typeof i=="object"?i:{}}),P.on("secureConnect",Mr),P.on("error",kr),P.on("close",Dc),P.on("drain",kc)}function kc(){!k&&t(Qe)}function ua(m){if(!(me&&(me.push(m),te-=m.length,te>=0)))for(U=me?Buffer.concat(me,ee-te):U.length===0?m:Buffer.concat([U,m],U.length+m.length);U.length>4;){if(ee=U.readUInt32BE(1),ee>=U.length){te=ee-U.length,me=[U];break}try{Rg(U.subarray(0,ee+1))}catch(b){k&&(k.cursorFn||k.describeFirst)&&Fe(zt),bt(b)}U=U.subarray(ee+1),te=0,me=null}}async function Ic(){if(Be=!1,se={},P||(P=await wg()),!!P){if(z.start(),r.socket)return i?Mc():Mr();if(P.on("connect",i?Mc:Mr),r.path)return P.connect(r.path);P.ssl=i,P.connect(d[ie],l[ie]),P.host=l[ie],P.port=d[ie],ie=(ie+1)%d.length}}function $c(){setTimeout(Ic,D?D+he-Ca.performance.now():0)}function Mr(){try{ae={},Y=r.fetch_types,ke=Math.random().toString(36).slice(2),O=1,q.start(),P.on("data",ua),T&&P.setKeepAlive&&P.setKeepAlive(!0,1e3*T);let m=mv();Fe(m)}catch(m){kr(m)}}function kr(m){if(!(Qe.queue===e.connecting&&r.host[ge+1]))for(bt(m);A.length;)_i(A.shift(),m)}function bt(m){Ie&&(Ie.destroy(m),Ie=null),k&&_i(k,m),Ve&&(_i(Ve,m),Ve=null)}function _i(m,b){"query"in b||"parameters"in b||Object.defineProperties(b,{stack:{value:b.stack+m.origin.replace(/.*\n/,`
`),enumerable:r.debug},query:{value:m.string,enumerable:r.debug},parameters:{value:m.parameters,enumerable:r.debug},args:{value:m.args,enumerable:r.debug},types:{value:m.statement&&m.statement.types,enumerable:r.debug}}),m.reject(b)}function da(){return jt||(!Qe.reserved&&n(Qe),!Qe.reserved&&!Ve&&!k&&A.length===0?(Qn(),new Promise(m=>P&&P.readyState!=="closed"?P.once("close",m):m())):jt=new Promise(m=>ct=m))}function Qn(){Be=!0,(Ie||k||Ve||A.length)&&kr(Ne.connection("CONNECTION_DESTROYED",r)),clearImmediate(ve),P&&(P.removeListener("data",ua),P.removeListener("connect",Mr),P.readyState==="open"&&P.end(B().X().end())),ct&&(ct(),jt=ct=null)}async function Dc(m){if(U=Buffer.alloc(0),te=0,me=null,clearImmediate(ve),P.removeListener("data",ua),P.removeListener("connect",Mr),R.cancel(),q.cancel(),z.cancel(),P.removeAllListeners(),P=null,Ve)return $c();!m&&(k||A.length)&&kr(Ne.connection("CONNECTION_CLOSED",r,P)),D=Ca.performance.now(),m&&r.shared.retries++,he=(typeof M=="function"?M(r.shared.retries):M)*1e3,s(Qe,Ne.connection("CONNECTION_CLOSED",r,P))}function Rg(m,b=m[0]){(b===68?Ng:b===100?sv:b===65?Yg:b===83?Mg:b===90?kg:b===67?Ig:b===50?qc:b===49?$g:b===116?Dg:b===84?qg:b===82?jg:b===110?Bg:b===75?Vg:b===69?Zg:b===115?Xg:b===51?ev:b===71?tv:b===78?ov:b===72?rv:b===99?iv:b===73?av:b===86?lv:b===118?cv:b===87?nv:uv)(m)}function Ng(m){let b=7,V,le,we,Ke=k.isRaw?new Array(k.statement.columns.length):{};for(let Ye=0;Ye<k.statement.columns.length;Ye++)le=k.statement.columns[Ye],V=m.readInt32BE(b),b+=4,we=V===-1?null:k.isRaw===!0?m.subarray(b,b+=V):le.parser===void 0?m.toString("utf8",b,b+=V):le.parser.array===!0?le.parser(m.toString("utf8",b+1,b+=V)):le.parser(m.toString("utf8",b,b+=V)),k.isRaw?Ke[Ye]=k.isRaw===!0?we:f.value.from?f.value.from(we,le):we:Ke[le.name]=f.value.from?f.value.from(we,le):we;k.forEachFn?k.forEachFn(f.row.from?f.row.from(Ke):Ke,G):G[Re++]=f.row.from?f.row.from(Ke):Ke}function Mg(m){let[b,V]=m.toString("utf8",5,m.length-1).split(B.N);se[b]=V,r.parameters[b]!==V&&(r.parameters[b]=V,v&&v(b,V))}function kg(m){if(k&&k.options.simple&&k.resolve(lt||G),k=lt=null,G=new Lt,z.cancel(),Ve){if(E){if(!se.in_hot_standby||!se.default_transaction_read_only)return Wg();if(Hg(E,se))return Qn()}if(Y)return Ve===!0&&(Ve=null),Qg();Ve!==!0&&Vn(Ve),r.shared.retries=ge=0,Ve=null;return}for(;A.length&&(k=A.shift())&&(k.active=!0,k.cancelled);)nu(r).cancel(k.state,k.cancelled.resolve,k.cancelled.reject);k||(Qe.reserved?!Qe.reserved.release&&m[5]===73?jt?Qn():(Qe.reserved=null,t(Qe)):Qe.reserved():jt?Qn():t(Qe))}function Ig(m){Re=0;for(let b=m.length-1;b>0;b--)if(m[b]===32&&m[b+1]<58&&G.count===null&&(G.count=+m.toString("utf8",b+1,m.length-1)),m[b-1]>=65){G.command=m.toString("utf8",5,b),G.state=Q;break}if(Bn&&(Bn(),Bn=null),G.command==="BEGIN"&&o!==1&&!Qe.reserved)return bt(Ne.generic("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"));if(k.options.simple)return qc();k.cursorFn&&(G.count&&k.cursorFn(G),Fe(zt)),k.resolve(G)}function $g(){k.parsing=!1}function qc(){!G.statement&&(G.statement=k.statement),G.columns=k.statement.columns}function Dg(m){let b=m.readUInt16BE(5);for(let V=0;V<b;++V)!k.statement.types[V]&&(k.statement.types[V]=m.readUInt32BE(7+V*4));k.prepare&&(ae[k.signature]=k.statement),k.describeFirst&&!k.onlyDescribe&&(Fe(vi(k)),k.describeFirst=!1)}function qg(m){G.command&&(lt=lt||[G],lt.push(G=new Lt),G.count=null,k.statement.columns=null);let b=m.readUInt16BE(5),V=7,le;k.statement.columns=Array(b);for(let we=0;we<b;++we){for(le=V;m[V++]!==0;);let Ke=m.readUInt32BE(V),Ye=m.readUInt16BE(V+4),Ft=m.readUInt32BE(V+6);k.statement.columns[we]={name:f.column.from?f.column.from(m.toString("utf8",le,V-1)):m.toString("utf8",le,V-1),parser:h[Ft],table:Ke,number:Ye,type:Ft},V+=18}if(G.statement=k.statement,k.onlyDescribe)return k.resolve(k.statement),Fe(zt)}async function jg(m,b=m.readUInt32BE(5)){(b===3?Fg:b===5?Lg:b===10?zg:b===11?Gg:b===12?Ug:b!==0?dv:Dr)(m,b)}async function Fg(){let m=await fa();Fe(B().p().str(m).z(1).end())}async function Lg(m){let b="md5"+await tu(Buffer.concat([Buffer.from(await tu(await fa()+a)),m.subarray(9)]));Fe(B().p().str(b).z(1).end())}async function zg(){_t=(await qr.default.randomBytes(18)).toString("base64"),B().p().str("SCRAM-SHA-256"+B.N);let m=B.i;Fe(B.inc(4).str("n,,n=*,r="+_t).i32(B.i-m-4,m).end())}async function Gg(m){let b=m.toString("utf8",9).split(",").reduce((Ye,Ft)=>(Ye[Ft[0]]=Ft.slice(2),Ye),{}),V=await qr.default.pbkdf2Sync(await fa(),Buffer.from(b.s,"base64"),parseInt(b.i),32,"sha256"),le=await Ei(V,"Client Key"),we="n=*,r="+_t+",r="+b.r+",s="+b.s+",i="+b.i+",c=biws,r="+b.r;Te=(await Ei(await Ei(V,"Server Key"),we)).toString("base64");let Ke="c=biws,r="+b.r+",p="+zv(le,Buffer.from(await Ei(await Lv(le),we))).toString("base64");Fe(B().p().str(Ke).end())}function Ug(m){m.toString("utf8",9).split(B.N,1)[0].slice(2)!==Te&&(bt(Ne.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),P.destroy())}function fa(){return Promise.resolve(typeof r.pass=="function"?r.pass():r.pass)}function Bg(){if(G.statement=k.statement,G.statement.columns=[],k.onlyDescribe)return k.resolve(k.statement),Fe(zt)}function Vg(m){Q.pid=m.readUInt32BE(5),Q.secret=m.readUInt32BE(9)}async function Qg(){Y=!1,(await new nt([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],Vn)).forEach(({oid:b,typarray:V})=>Kg(b,V))}function Kg(m,b){if(!!r.parsers[b]&&!!r.serializers[b])return;let V=r.parsers[m];r.shared.typeArrayMap[m]=b,r.parsers[b]=le=>Yc(le,V,b),r.parsers[b].array=!0,r.serializers[b]=le=>Jc(le,r.serializers[m],r,b)}function Hg(m,b){return m==="read-write"&&b.default_transaction_read_only==="on"||m==="read-only"&&b.default_transaction_read_only==="off"||m==="primary"&&b.in_hot_standby==="on"||m==="standby"&&b.in_hot_standby==="off"||m==="prefer-standby"&&b.in_hot_standby==="off"&&r.host[ge]}function Wg(){let m=new nt([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],Vn,null,{simple:!0});m.resolve=([[b],[V]])=>{se.default_transaction_read_only=b.transaction_read_only,se.in_hot_standby=V.pg_is_in_recovery?"on":"off"},m.execute()}function Zg(m){k&&(k.cursorFn||k.describeFirst)&&Fe(zt);let b=Ne.postgres(Ea(m));k&&k.retried?bt(k.retried):k&&k.prepared&&jv.has(b.routine)?Jg(k,b):bt(b)}function Jg(m,b){delete ae[m.signature],m.retried=b,Vn(m)}function Yg(m){if(!g)return;let b=9;for(;m[b++]!==0;);g(m.toString("utf8",9,b-1),m.toString("utf8",b,m.length-1))}async function Xg(){try{let m=await Promise.resolve(k.cursorFn(G));Re=0,m===Ir?Fe(hv(k.portal)):(G=new Lt,Fe(Fc("",k.cursorRows)))}catch(m){Fe(zt),k.reject(m)}}function ev(){G.count&&k.cursorFn(G),k.resolve(G)}function tv(){Ie=new Oi.default.Writable({autoDestroy:!0,write(m,b,V){P.write(B().d().raw(m).end(),V)},destroy(m,b){b(m),P.write(B().f().str(m+B.N).end()),Ie=null},final(m){P.write(B().c().end()),Bn=m}}),k.resolve(Ie)}function rv(){Ie=new Oi.default.Readable({read(){P.resume()}}),k.resolve(Ie)}function nv(){Ie=new Oi.default.Duplex({autoDestroy:!0,read(){P.resume()},write(m,b,V){P.write(B().d().raw(m).end(),V)},destroy(m,b){b(m),P.write(B().f().str(m+B.N).end()),Ie=null},final(m){P.write(B().c().end()),Bn=m}}),k.resolve(Ie)}function sv(m){Ie&&(Ie.push(m.subarray(5))||P.pause())}function iv(){Ie&&Ie.push(null),Ie=null}function ov(m){_?_(Ea(m)):console.log(Ea(m))}function av(){}function lv(){bt(Ne.notSupported("FunctionCallResponse"))}function cv(){bt(Ne.notSupported("NegotiateProtocolVersion"))}function uv(m){console.error("Postgres.js : Unknown Message:",m[0])}function dv(m,b){console.error("Postgres.js : Unknown Auth:",b)}function fv(m,b,V="",le=""){let we,Ke;return B().B().str(le+B.N).str(V+B.N).i16(0).i16(m.length),m.forEach((Ye,Ft)=>{if(Ye===null)return B.i32(4294967295);Ke=b[Ft],m[Ft]=Ye=Ke in r.serializers?r.serializers[Ke](Ye):""+Ye,we=B.i,B.inc(4).str(Ye).i32(B.i-we-4,we)}),B.i16(0),B.end()}function jc(m,b,V,le=""){return B().P().str(le+B.N).str(m+B.N).i16(b.length),b.forEach((we,Ke)=>B.i32(V[Ke]||0)),B.end()}function pv(m,b=""){return B().D().str(m).str(b+B.N).end()}function Fc(m="",b=0){return Buffer.concat([B().E().str(m+B.N).i32(b).end(),eu])}function hv(m=""){return Buffer.concat([B().C().str("P").str(m+B.N).end(),B().S().end()])}function mv(){return K||B().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:a,database:c,client_encoding:"UTF8"},r.connection)).filter(([,m])=>m).map(([m,b])=>m+B.N+b).join(B.N)).z(2).end(0)}}function Ea(r){let e={},t=5;for(let n=5;n<r.length-1;n++)r[n]===0&&(e[Fv[r[t]]]=r.toString("utf8",t+1,n),t=n+1);return e}function tu(r){return qr.default.createHash("md5").update(r).digest("hex")}function Ei(r,e){return qr.default.createHmac("sha256",r).update(e).digest()}function Lv(r){return qr.default.createHash("sha256").update(r).digest()}function zv(r,e){let t=Math.max(r.length,e.length),n=Buffer.allocUnsafe(t);for(let s=0;s<t;s++)n[s]=r[s]^e[s];return n}function Oa(r,e){if(e=typeof e=="function"?e():e,!e)return{cancel:Dr,start:Dr};let t;return{cancel(){t&&(clearTimeout(t),t=null)},start(){t&&clearTimeout(t),t=setTimeout(n,e*1e3,arguments)}};function n(s){r.apply(null,s),t=null}}var su=()=>{};function Na(r,e){let t=new Map,n="postgresjs_"+Math.random().toString(36).slice(2),s={},i,o,a=!1,l=h.sql=r({...e,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...e.connection,replication:"database"},onclose:async function(){a||(o=null,s.pid=s.secret=void 0,f(await _(l,n,e.publications)),t.forEach(v=>v.forEach(({onsubscribe:x})=>x())))},no_subscribe:!0}),d=l.end,c=l.close;return l.end=async()=>(a=!0,o&&await new Promise(v=>(o.once("close",v),o.end())),d()),l.close=async()=>(o&&await new Promise(v=>(o.once("close",v),o.end())),c()),h;async function h(v,x,T=su,M=su){v=Bv(v),i||(i=_(l,n,e.publications));let E={fn:x,onsubscribe:T},A=t.has(v)?t.get(v).add(E):t.set(v,new Set([E])).get(v),N=()=>{A.delete(E),A.size===0&&t.delete(v)};return i.then(Q=>(f(Q),T(),o&&o.on("error",M),{unsubscribe:N,state:s,sql:l}))}function f(v){o=v.stream,s.pid=v.state.pid,s.secret=v.state.secret}async function _(v,x,T){if(!T)throw new Error("Missing publication names");let M=await v.unsafe(`CREATE_REPLICATION_SLOT ${x} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[E]=M,A=await v.unsafe(`START_REPLICATION SLOT ${x} LOGICAL ${E.consistent_point} (proto_version '1', publication_names '${T}')`).writable(),N={lsn:Buffer.concat(E.consistent_point.split("/").map(P=>Buffer.from(("00000000"+P).slice(-8),"hex")))};return A.on("data",R),A.on("error",Q),A.on("close",v.close),{stream:A,state:M.state};function Q(P){console.error("Unexpected error during logical streaming - reconnecting",P)}function R(P){P[0]===119?Uv(P.subarray(25),N,v.options.parsers,q,e.transform):P[0]===107&&P[17]&&(N.lsn=P.subarray(1,9),z())}function q(P,K){let G=K.relation.schema+"."+K.relation.table;g("*",P,K),g("*:"+G,P,K),K.relation.keys.length&&g("*:"+G+"="+K.relation.keys.map(U=>P[U.name]),P,K),g(K.command,P,K),g(K.command+":"+G,P,K),K.relation.keys.length&&g(K.command+":"+G+"="+K.relation.keys.map(U=>P[U.name]),P,K)}function z(){let P=Buffer.alloc(34);P[0]="r".charCodeAt(0),P.fill(N.lsn,1),P.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),A.write(P)}}function g(v,x,T){t.has(v)&&t.get(v).forEach(({fn:M})=>M(x,T,v))}}function Gv(r){return new Date(Date.UTC(2e3,0,1)+Number(r/BigInt(1e3)))}function Uv(r,e,t,n,s){let i=(o,[a,l])=>(o[a.charCodeAt(0)]=l,o);Object.entries({R:o=>{let a=1,l=e[o.readUInt32BE(a)]={schema:o.toString("utf8",a+=4,a=o.indexOf(0,a))||"pg_catalog",table:o.toString("utf8",a+1,a=o.indexOf(0,a+1)),columns:Array(o.readUInt16BE(a+=2)),keys:[]};a+=2;let d=0,c;for(;a<o.length;)c=l.columns[d++]={key:o[a++],name:s.column.from?s.column.from(o.toString("utf8",a,a=o.indexOf(0,a))):o.toString("utf8",a,a=o.indexOf(0,a)),type:o.readUInt32BE(a+=1),parser:t[o.readUInt32BE(a)],atttypmod:o.readUInt32BE(a+=4)},c.key&&l.keys.push(c),a+=4},Y:()=>{},O:()=>{},B:o=>{e.date=Gv(o.readBigInt64BE(9)),e.lsn=o.subarray(1,9)},I:o=>{let a=1,l=e[o.readUInt32BE(a)],{row:d}=Ai(o,l.columns,a+=7,s);n(d,{command:"insert",relation:l})},D:o=>{let a=1,l=e[o.readUInt32BE(a)];a+=4;let d=o[a]===75;n(d||o[a]===79?Ai(o,l.columns,a+=3,s).row:null,{command:"delete",relation:l,key:d})},U:o=>{let a=1,l=e[o.readUInt32BE(a)];a+=4;let d=o[a]===75,c=d||o[a]===79?Ai(o,l.columns,a+=3,s):null;c&&(a=c.i);let{row:h}=Ai(o,l.columns,a+3,s);n(h,{command:"update",relation:l,key:d,old:c&&c.row})},T:()=>{},C:()=>{}}).reduce(i,{})[r[0]](r)}function Ai(r,e,t,n){let s,i,o,a=n.raw?new Array(e.length):{};for(let l=0;l<e.length;l++)s=r[t++],i=e[l],o=s===110?null:s===117?void 0:i.parser===void 0?r.toString("utf8",t+4,t+=4+r.readUInt32BE(t)):i.parser.array===!0?i.parser(r.toString("utf8",t+5,t+=4+r.readUInt32BE(t))):i.parser(r.toString("utf8",t+4,t+=4+r.readUInt32BE(t))),n.raw?a[l]=n.raw===!0?o:n.value.from?n.value.from(o,i):o:a[i.name]=n.value.from?n.value.from(o,i):o;return{i:t,row:n.row.from?n.row.from(a):a}}function Bv(r){let e=r.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!e)throw new Error("Malformed subscribe pattern: "+r);let[,t,n,s]=e;return(t||"*")+(n?":"+(n.indexOf(".")===-1?"public."+n:n):"")+(s?"="+s:"")}var Ma=He(require("stream"),1);function ka(r,e,t=393216){return new Promise(async(n,s)=>{await r.begin(async i=>{let o;!e&&([{oid:e}]=await i`select lo_creat(-1) as oid`);let[{fd:a}]=await i`select lo_open(${e}, ${t}) as fd`,l={writable:c,readable:d,close:()=>i`select lo_close(${a})`.then(o),tell:()=>i`select lo_tell64(${a})`,read:h=>i`select loread(${a}, ${h}) as data`,write:h=>i`select lowrite(${a}, ${h})`,truncate:h=>i`select lo_truncate64(${a}, ${h})`,seek:(h,f=0)=>i`select lo_lseek64(${a}, ${h}, ${f})`,size:()=>i`
          select
            lo_lseek64(${a}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return n(l),new Promise(async h=>o=h);async function d({highWaterMark:h=2048*8,start:f=0,end:_=1/0}={}){let g=_-f;return f&&await l.seek(f),new Ma.default.Readable({highWaterMark:h,async read(v){let x=v>g?v-g:v;g-=v;let[{data:T}]=await l.read(x);this.push(T),T.length<v&&this.push(null)}})}async function c({highWaterMark:h=2048*8,start:f=0}={}){return f&&await l.seek(f),new Ma.default.Writable({highWaterMark:h,write(_,g,v){l.write(_).then(()=>v(),v)}})}}).catch(s)})}Object.assign(Ci,{PostgresError:or,toPascal:lr,pascal:wa,toCamel:ar,camel:Pa,toKebab:cr,kebab:xa,fromPascal:Jn,fromCamel:Zn,fromKebab:Yn,BigInt:{to:20,from:[20],parse:r=>BigInt(r),serialize:r=>r.toString()}});var jr=Ci;function Ci(r,e){let t=Vv(r,e),n=t.no_subscribe||Na(Ci,{...t}),s=!1,i=st(),o=st(),a=st(),l=st(),d=st(),c=st(),h=st(),f=st(),_={connecting:o,reserved:a,closed:l,ended:d,open:c,busy:h,full:f},g=[...Array(t.max)].map(()=>Ra(t,_,{onopen:ae,onend:se,onclose:ke})),v=x(q);return Object.assign(v,{get parameters(){return t.parameters},largeObject:ka.bind(null,v),subscribe:n,CLOSE:Ir,END:Ir,PostgresError:or,options:t,reserve:E,listen:T,begin:A,close:G,end:K}),v;function x(O){return O.debug=t.debug,Object.entries(t.types).reduce((ee,[he,Re])=>(ee[he]=Te=>new ut(Te,Re.to),ee),D),Object.assign(te,{types:D,typed:D,unsafe:ie,notify:M,array:R,json:Q,file:ge}),te;function D(ee,he){return new ut(ee,he)}function te(ee,...he){return ee&&Array.isArray(ee.raw)?new nt(ee,he,O,P):typeof ee=="string"&&!he.length?new $r(t.transform.column.to?t.transform.column.to(ee):ee):new Wn(ee,he)}function ie(ee,he=[],Re={}){return arguments.length===2&&!Array.isArray(he)&&(Re=he,he=[]),new nt([ee],he,O,P,{prepare:!1,...Re,simple:"simple"in Re?Re.simple:he.length===0})}function ge(ee,he=[],Re={}){return arguments.length===2&&!Array.isArray(he)&&(Re=he,he=[]),new nt([],he,ve=>{ou.default.readFile(ee,"utf8",(Be,me)=>{if(Be)return ve.reject(Be);ve.strings=[me],O(ve)})},P,{...Re,simple:"simple"in Re?Re.simple:he.length===0})}}async function T(O,D,te){let ie={fn:D,onlisten:te},ge=T.sql||(T.sql=Ci({...t,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(T.channels).forEach(([ve,{listeners:Be}])=>{delete T.channels[ve],Promise.all(Be.map(me=>T(ve,me.fn,me.onlisten).catch(()=>{})))})},onnotify(ve,Be){ve in T.channels&&T.channels[ve].listeners.forEach(me=>me.fn(Be))}})),ee=T.channels||(T.channels={});if(O in ee){ee[O].listeners.push(ie);let ve=await ee[O].result;return ie.onlisten&&ie.onlisten(),{state:ve.state,unlisten:Te}}ee[O]={result:ge`listen ${ge.unsafe('"'+O.replace(/"/g,'""')+'"')}`,listeners:[ie]};let Re=await ee[O].result;return ie.onlisten&&ie.onlisten(),{state:Re.state,unlisten:Te};async function Te(){if(O in ee&&(ee[O].listeners=ee[O].listeners.filter(ve=>ve!==ie),!ee[O].listeners.length))return delete ee[O],ge`unlisten ${ge.unsafe('"'+O.replace(/"/g,'""')+'"')}`}}async function M(O,D){return await v`select pg_notify(${O}, ${""+D})`}async function E(){let O=st(),D=c.length?c.shift():await new Promise(ge=>{i.push({reserve:ge}),l.length&&Y(l.shift())});N(D,a),D.reserved=()=>O.length?D.execute(O.shift()):N(D,a),D.reserved.release=!0;let te=x(ie);return te.release=()=>{D.reserved=null,ae(D)},te;function ie(ge){D.queue===f?O.push(ge):D.execute(ge)||N(D,f)}}async function A(O,D){!D&&(D=O,O="");let te=st(),ie=0,ge,ee=null;try{return await v.unsafe("begin "+O.replace(/[^a-z ]/ig,""),[],{onexecute:Re}).execute(),await Promise.race([he(ge,D),new Promise((Te,ve)=>ge.onclose=ve)])}catch(Te){throw Te}async function he(Te,ve,Be){let me=x(Ie);me.savepoint=jt,me.prepare=_e=>ee=_e.replace(/[^a-z0-9$-_. ]/gi);let lt,Ve;Be&&await me`savepoint ${me(Be)}`;try{if(Ve=await new Promise((_e,ct)=>{let _t=ve(me);Promise.resolve(Array.isArray(_t)?Promise.all(_t):_t).then(_e,ct)}),lt)throw lt}catch(_e){throw await(Be?me`rollback to ${me(Be)}`:me`rollback`),_e instanceof or&&_e.code==="25P02"&&lt||_e}return Be||(ee?await me`prepare transaction '${me.unsafe(ee)}'`:await me`commit`),Ve;function jt(_e,ct){return _e&&Array.isArray(_e.raw)?jt(_t=>_t.apply(_t,arguments)):(arguments.length===1&&(ct=_e,_e=null),he(Te,ct,"s"+ie+++(_e?"_"+_e:"")))}function Ie(_e){_e.catch(ct=>lt||(lt=ct)),Te.queue===f?te.push(_e):Te.execute(_e)||N(Te,f)}}function Re(Te){ge=Te,N(Te,a),Te.reserved=()=>te.length?Te.execute(te.shift()):N(Te,a)}}function N(O,D){return O.queue.remove(O),D.push(O),O.queue=D,D===c?O.idleTimer.start():O.idleTimer.cancel(),O}function Q(O){return new ut(O,3802)}function R(O,D){return Array.isArray(O)?new ut(O,D||(O.length?Ti(O)||25:0),t.shared.typeArrayMap):R(Array.from(arguments))}function q(O){if(s)return O.reject(Ne.connection("CONNECTION_ENDED",t,t));if(c.length)return z(c.shift(),O);if(l.length)return Y(l.shift(),O);h.length?z(h.shift(),O):i.push(O)}function z(O,D){return O.execute(D)?N(O,h):N(O,f)}function P(O){return new Promise((D,te)=>{O.state?O.active?Ra(t).cancel(O.state,D,te):O.cancelled={resolve:D,reject:te}:(i.remove(O),O.cancelled=!0,O.reject(Ne.generic("57014","canceling statement due to user request")),D())})}async function K({timeout:O=null}={}){if(s)return s;await 1;let D;return s=Promise.race([new Promise(te=>O!==null&&(D=setTimeout(U,O*1e3,te))),Promise.all(g.map(te=>te.end()).concat(T.sql?T.sql.end({timeout:0}):[],n.sql?n.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(D))}async function G(){await Promise.all(g.map(O=>O.end()))}async function U(O){for(await Promise.all(g.map(D=>D.terminate()));i.length;)i.shift().reject(Ne.connection("CONNECTION_DESTROYED",t));O()}function Y(O,D){return N(O,o),O.connect(D),O}function se(O){N(O,d)}function ae(O){if(i.length===0)return N(O,c);let D=Math.ceil(i.length/(o.length+1)),te=!0;for(;te&&i.length&&D-- >0;){let ie=i.shift();if(ie.reserve)return ie.reserve(O);te=O.execute(ie)}te?N(O,h):N(O,f)}function ke(O,D){N(O,l),O.reserved=null,O.onclose&&(O.onclose(D),O.onclose=null),t.onclose&&t.onclose(O.id),i.length&&Y(O,i.shift())}}function Vv(r,e){if(r&&r.shared)return r;let t=process.env,n=(!r||typeof r=="string"?e:r)||{},{url:s,multihost:i}=Zv(r),o=[...s.searchParams].reduce((f,[_,g])=>(f[_]=g,f),{}),a=n.hostname||n.host||i||s.hostname||t.PGHOST||"localhost",l=n.port||s.port||t.PGPORT||5432,d=n.user||n.username||s.username||t.PGUSERNAME||t.PGUSER||Jv();n.no_prepare&&(n.prepare=!1),o.sslmode&&(o.ssl=o.sslmode,delete o.sslmode),"timeout"in n&&(console.log("The timeout option is deprecated, use idle_timeout instead"),n.idle_timeout=n.timeout),o.sslrootcert==="system"&&(o.ssl="verify-full");let c=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],h={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:Hv,max_pipeline:100,backoff:Kv,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(a)?a:a.split(",").map(f=>f.split(":")[0]),port:Array.isArray(l)?l:a.split(",").map(f=>parseInt(f.split(":")[1]||l)),path:n.path||a.indexOf("/")>-1&&a+"/.s.PGSQL."+l,database:n.database||n.db||(s.pathname||"").slice(1)||t.PGDATABASE||d,user:d,pass:n.pass||n.password||s.password||t.PGPASSWORD||"",...Object.entries(h).reduce((f,[_,g])=>{let v=_ in n?n[_]:_ in o?o[_]==="disable"||o[_]==="false"?!1:o[_]:t["PG"+_.toUpperCase()]||g;return f[_]=typeof v=="string"&&c.includes(_)?+v:v,f},{}),connection:{application_name:"postgres.js",...n.connection,...Object.entries(o).reduce((f,[_,g])=>(_ in h||(f[_]=g),f),{})},types:n.types||{},target_session_attrs:Qv(n,s,t),onnotice:n.onnotice,onnotify:n.onnotify,onclose:n.onclose,onparameter:n.onparameter,socket:n.socket,transform:Wv(n.transform||{undefined:void 0}),parameters:{},shared:{retries:0,typeArrayMap:{}},...Wc(n.types)}}function Qv(r,e,t){let n=r.target_session_attrs||e.searchParams.get("target_session_attrs")||t.PGTARGETSESSIONATTRS;if(!n||["read-write","read-only","primary","standby","prefer-standby"].includes(n))return n;throw new Error("target_session_attrs "+n+" is not supported")}function Kv(r){return(.5+Math.random()/2)*Math.min(3**r/100,20)}function Hv(){return 60*(30+Math.random()*30)}function Wv(r){return{undefined:r.undefined,column:{from:typeof r.column=="function"?r.column:r.column&&r.column.from,to:r.column&&r.column.to},value:{from:typeof r.value=="function"?r.value:r.value&&r.value.from,to:r.value&&r.value.to},row:{from:typeof r.row=="function"?r.row:r.row&&r.row.from,to:r.row&&r.row.to}}}function Zv(r){if(!r||typeof r!="string")return{url:{searchParams:new Map}};let e=r;e=e.slice(e.indexOf("://")+3).split(/[?/]/)[0],e=decodeURIComponent(e.slice(e.indexOf("@")+1));let t=new URL(r.replace(e,e.split(",")[0]));return{url:{username:decodeURIComponent(t.username),password:decodeURIComponent(t.password),host:t.host,hostname:t.hostname,port:t.port,pathname:t.pathname,searchParams:t.searchParams},multihost:e.indexOf(",")>-1&&e}}function Jv(){try{return iu.default.userInfo().username}catch{return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}var S=Symbol.for("drizzle:entityKind"),RE=Symbol.for("drizzle:hasOwnEntityKind");function w(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,S))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(S in t&&t[S]===e[S])return!0;t=Object.getPrototypeOf(t)}return!1}var Yv,Ri=class{write(e){console.log(e)}};Yv=S,p(Ri,Yv,"ConsoleLogWriter");var Xv,Xn=class{constructor(e){p(this,"writer");this.writer=e?.writer??new Ri}logQuery(e,t){let n=t.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),s=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${s}`)}};Xv=S,p(Xn,Xv,"DefaultLogger");var e_,es=class{logQuery(){}};e_=S,p(es,e_,"NoopLogger");var t_,r_,Le=class{constructor(){p(this,r_,"QueryPromise")}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}};t_=S,r_=Symbol.toStringTag,p(Le,t_,"QueryPromise");var n_,ce=class{constructor(e,t){p(this,"name");p(this,"keyAsName");p(this,"primary");p(this,"notNull");p(this,"default");p(this,"defaultFn");p(this,"onUpdateFn");p(this,"hasDefault");p(this,"isUnique");p(this,"uniqueName");p(this,"uniqueType");p(this,"dataType");p(this,"columnType");p(this,"enumValues");p(this,"generated");p(this,"generatedIdentity");p(this,"config");this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};n_=S,p(ce,n_,"Column");var s_,ts=class{constructor(e,t,n){p(this,"config");p(this,"$default",this.$defaultFn);p(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};s_=S,p(ts,s_,"ColumnBuilder");var dt=Symbol.for("drizzle:Name");var i_,rs=class{constructor(e,t){p(this,"reference");p(this,"_onUpdate","no action");p(this,"_onDelete","no action");this.reference=()=>{let{name:n,columns:s,foreignColumns:i}=e();return{name:n,columns:s,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Ni(e,this)}};i_=S,p(rs,i_,"PgForeignKeyBuilder");var o_,Ni=class{constructor(e,t){p(this,"reference");p(this,"onUpdate");p(this,"onDelete");this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),s=t.map(a=>a.name),i=n.map(a=>a.name),o=[this.table[dt],...s,n[0].table[dt],...i];return e??`${o.join("_")}_fk`}};o_=S,p(Ni,o_,"PgForeignKey");function Mi(r,...e){return r(...e)}function $a(r,e){return`${r[dt]}_${e.join("_")}_unique`}var a_,ki=class{constructor(e,t){p(this,"columns");p(this,"nullsNotDistinctConfig",!1);this.name=t,this.columns=e}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new Ii(e,this.columns,this.nullsNotDistinctConfig,this.name)}};a_=S,p(ki,a_,"PgUniqueConstraintBuilder");var l_,Ia=class{constructor(e){p(this,"name");this.name=e}on(...e){return new ki(e,this.name)}};l_=S,p(Ia,l_,"PgUniqueOnConstraintBuilder");var c_,Ii=class{constructor(e,t,n,s){p(this,"columns");p(this,"name");p(this,"nullsNotDistinct",!1);this.table=e,this.columns=t,this.name=s??$a(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}getName(){return this.name}};c_=S,p(Ii,c_,"PgUniqueConstraint");function au(r,e,t){for(let n=e;n<r.length;n++){let s=r[n];if(s==="\\"){n++;continue}if(s==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(s===","||s==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function lu(r,e=0){let t=[],n=e,s=!1;for(;n<r.length;){let i=r[n];if(i===","){(s||n===e)&&t.push(""),s=!0,n++;continue}if(s=!1,i==="\\"){n+=2;continue}if(i==='"'){let[l,d]=au(r,n+1,!0);t.push(l),n=d;continue}if(i==="}")return[t,n+1];if(i==="{"){let[l,d]=lu(r,n+1);t.push(l),n=d;continue}let[o,a]=au(r,n,!1);t.push(o),n=a}return[t,n]}function cu(r){let[e]=lu(r,1);return e}function Da(r){return`{${r.map(e=>Array.isArray(e)?Da(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var u_,Ze=class extends ts{constructor(){super(...arguments);p(this,"foreignKeyConfigs",[])}array(t){return new Di(this.config.name,this,t)}references(t,n={}){return this.foreignKeyConfigs.push({ref:t,actions:n}),this}unique(t,n){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,n){return this.foreignKeyConfigs.map(({ref:s,actions:i})=>Mi((o,a)=>{let l=new rs(()=>{let d=o();return{columns:[t],foreignColumns:[d]}});return a.onUpdate&&l.onUpdate(a.onUpdate),a.onDelete&&l.onDelete(a.onDelete),l.build(n)},s,i))}buildExtraConfigColumn(t){return new $i(t,this.config)}};u_=S,p(Ze,u_,"PgColumnBuilder");var d_,fe=class extends ce{constructor(e,t){t.uniqueName||(t.uniqueName=$a(e,[t.name])),super(e,t),this.table=e}};d_=S,p(fe,d_,"PgColumn");var f_,$i=class extends fe{constructor(){super(...arguments);p(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});p(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}};f_=S,p($i,f_,"ExtraConfigColumn");var p_,qa=class{constructor(e,t,n,s){p(this,"name");p(this,"keyAsName");p(this,"type");p(this,"indexConfig");this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=s}};p_=S,p(qa,p_,"IndexedColumn");var h_,Di=class extends Ze{constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new qi(e,this.config,t)}};h_=S,p(Di,h_,"PgArrayBuilder");var m_,ja=class extends fe{constructor(t,n,s,i){super(t,n);p(this,"size");this.baseColumn=s,this.range=i,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=cu(t)),t.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(t,n=!1){let s=t.map(i=>i===null?null:w(this.baseColumn,ja)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return n?s:Da(s)}},qi=ja;m_=S,p(qi,m_,"PgArray");var uu=Symbol.for("drizzle:isPgEnum");function du(r){return!!r&&typeof r=="function"&&uu in r&&r[uu]===!0}var y_,Fa=class extends Ze{constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new ji(e,this.config)}};y_=S,p(Fa,y_,"PgEnumColumnBuilder");var g_,ji=class extends fe{constructor(t,n){super(t,n);p(this,"enum",this.config.enum);p(this,"enumValues",this.config.enum.enumValues);this.enum=n.enum}getSQLType(){return this.enum.enumName}};g_=S,p(ji,g_,"PgEnumColumn");var v_,Ae=class{constructor(e,t,n,s=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:s}}};v_=S,p(Ae,v_,"Subquery");var __,ur=class extends Ae{};__=S,p(ur,__,"WithSubquery");var fu="0.40.0";var La,za,pe={startActiveSpan(r,e){return La?(za||(za=La.trace.getTracer("drizzle-orm",fu)),Mi((t,n)=>n.startActiveSpan(r,s=>{try{return e(s)}catch(i){throw s.setStatus({code:t.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{s.end()}}),La,za)):e()}};var ye=Symbol.for("drizzle:ViewBaseConfig");var Fi=Symbol.for("drizzle:Schema"),Li=Symbol.for("drizzle:Columns"),pu=Symbol.for("drizzle:ExtraConfigColumns"),Ga=Symbol.for("drizzle:OriginalName"),Ua=Symbol.for("drizzle:BaseName"),ns=Symbol.for("drizzle:IsAlias"),hu=Symbol.for("drizzle:ExtraConfigBuilder"),b_=Symbol.for("drizzle:IsDrizzleTable"),S_,T_,P_,w_,x_,E_,O_,A_,C_,R_,I=class{constructor(e,t,n){p(this,T_);p(this,P_);p(this,w_);p(this,x_);p(this,E_);p(this,O_);p(this,A_,!1);p(this,C_,!0);p(this,R_);this[dt]=this[Ga]=e,this[Fi]=t,this[Ua]=n}};S_=S,T_=dt,P_=Ga,w_=Fi,x_=Li,E_=pu,O_=Ua,A_=ns,C_=b_,R_=hu,p(I,S_,"Table"),p(I,"Symbol",{Name:dt,Schema:Fi,OriginalName:Ga,Columns:Li,ExtraConfigColumns:pu,BaseName:Ua,IsAlias:ns,ExtraConfigBuilder:hu});function et(r){return r[dt]}function dr(r){return`${r[Fi]??"public"}.${r[dt]}`}var k_,Ba=class{};k_=S,p(Ba,k_,"FakePrimitiveParam");function Va(r){return r!=null&&typeof r.getSQL=="function"}function N_(r){let e={sql:"",params:[]};for(let t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}var I_,Ce=class{constructor(e){p(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new F([this])}};I_=S,p(Ce,I_,"StringChunk");var $_,Fr=class{constructor(e){p(this,"decoder",yu);p(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return pe.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:s,escapeName:i,escapeParam:o,prepareTyping:a,inlineParams:l,paramStartIndex:d}=n;return N_(e.map(c=>{if(w(c,Ce))return{sql:c.value.join(""),params:[]};if(w(c,Lr))return{sql:i(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){let h=[new Ce("(")];for(let[f,_]of c.entries())h.push(_),f<c.length-1&&h.push(new Ce(", "));return h.push(new Ce(")")),this.buildQueryFromSourceParams(h,n)}if(w(c,Fr))return this.buildQueryFromSourceParams(c.queryChunks,{...n,inlineParams:l||c.shouldInlineParams});if(w(c,I)){let h=c[I.Symbol.Schema],f=c[I.Symbol.Name];return{sql:h===void 0||c[ns]?i(f):i(h)+"."+i(f),params:[]}}if(w(c,ce)){let h=s.getColumnCasing(c);if(t.invokeSource==="indexes")return{sql:i(h),params:[]};let f=c.table[I.Symbol.Schema];return{sql:c.table[ns]||f===void 0?i(c.table[I.Symbol.Name])+"."+i(h):i(f)+"."+i(c.table[I.Symbol.Name])+"."+i(h),params:[]}}if(w(c,Je)){let h=c[ye].schema,f=c[ye].name;return{sql:h===void 0||c[ye].isAlias?i(f):i(h)+"."+i(f),params:[]}}if(w(c,Xe)){if(w(c.value,St))return{sql:o(d.value++,c),params:[c],typings:["none"]};let h=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(w(h,Fr))return this.buildQueryFromSourceParams([h],n);if(l)return{sql:this.mapInlineParam(h,n),params:[]};let f=["none"];return a&&(f=[a(c.encoder)]),{sql:o(d.value++,h),params:[h],typings:f}}return w(c,St)?{sql:o(d.value++,c),params:[c],typings:["none"]}:w(c,Fr.Aliased)&&c.fieldAlias!==void 0?{sql:i(c.fieldAlias),params:[]}:w(c,Ae)?c._.isWith?{sql:i(c._.alias),params:[]}:this.buildQueryFromSourceParams([new Ce("("),c._.sql,new Ce(") "),new Lr(c._.alias)],n):du(c)?c.schema?{sql:i(c.schema)+"."+i(c.enumName),params:[]}:{sql:i(c.enumName),params:[]}:Va(c)?c.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([c.getSQL()],n):this.buildQueryFromSourceParams([new Ce("("),c.getSQL(),new Ce(")")],n):l?{sql:this.mapInlineParam(c,n),params:[]}:{sql:o(d.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Fr.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},F=Fr;$_=S,p(F,$_,"SQL");var D_,Lr=class{constructor(e){p(this,"brand");this.value=e}getSQL(){return new F([this])}};D_=S,p(Lr,D_,"Name");function mu(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var yu={mapFromDriverValue:r=>r},gu={mapToDriverValue:r=>r},P1={...yu,...gu},q_,Xe=class{constructor(e,t=gu){p(this,"brand");this.value=e,this.encoder=t}getSQL(){return new F([this])}};q_=S,p(Xe,q_,"Param");function y(r,...e){let t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new Ce(r[0]));for(let[n,s]of e.entries())t.push(s,new Ce(r[n+1]));return new F(t)}(r=>{function e(){return new F([])}r.empty=e;function t(l){return new F(l)}r.fromList=t;function n(l){return new F([new Ce(l)])}r.raw=n;function s(l,d){let c=[];for(let[h,f]of l.entries())h>0&&d!==void 0&&c.push(d),c.push(f);return new F(c)}r.join=s;function i(l){return new Lr(l)}r.identifier=i;function o(l){return new St(l)}r.placeholder=o;function a(l,d){return new Xe(l,d)}r.param=a})(y||(y={}));(r=>{var t;let n=class{constructor(i,o){p(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}},e=n;t=S,p(e,t,"SQL.Aliased"),r.Aliased=e})(F||(F={}));var j_,St=class{constructor(e){this.name=e}getSQL(){return new F([this])}};j_=S,p(St,j_,"Placeholder");function Qa(r,e){return r.map(t=>{if(w(t,St)){if(!(t.name in e))throw new Error(`No value for placeholder "${t.name}" was provided`);return e[t.name]}if(w(t,Xe)&&w(t.value,St)){if(!(t.value.name in e))throw new Error(`No value for placeholder "${t.value.name}" was provided`);return t.encoder.mapToDriverValue(e[t.value.name])}return t})}var M_=Symbol.for("drizzle:IsDrizzleView"),F_,L_,z_,Je=class{constructor({name:e,schema:t,selectedFields:n,query:s}){p(this,L_);p(this,z_,!0);this[ye]={name:e,originalName:e,schema:t,selectedFields:n,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new F([this])}};F_=S,L_=ye,z_=M_,p(Je,F_,"View");ce.prototype.getSQL=function(){return new F([this])};I.prototype.getSQL=function(){return new F([this])};Ae.prototype.getSQL=function(){return new F([this])};var G_,Gt=class{constructor(e){this.table=e}get(e,t){return t==="table"?this.table:e[t]}};G_=S,p(Gt,G_,"ColumnAliasProxyHandler");var U_,fr=class{constructor(e,t){this.alias=e,this.replaceOriginalName=t}get(e,t){if(t===I.Symbol.IsAlias)return!0;if(t===I.Symbol.Name)return this.alias;if(this.replaceOriginalName&&t===I.Symbol.OriginalName)return this.alias;if(t===ye)return{...e[ye],name:this.alias,isAlias:!0};if(t===I.Symbol.Columns){let s=e[I.Symbol.Columns];if(!s)return s;let i={};return Object.keys(s).map(o=>{i[o]=new Proxy(s[o],new Gt(new Proxy(e,this)))}),i}let n=e[t];return w(n,ce)?new Proxy(n,new Gt(new Proxy(e,this))):n}};U_=S,p(fr,U_,"TableAliasProxyHandler");var B_,Ka=class{constructor(e){this.alias=e}get(e,t){return t==="sourceTable"?ss(e.sourceTable,this.alias):e[t]}};B_=S,p(Ka,B_,"RelationTableAliasProxyHandler");function ss(r,e){return new Proxy(r,new fr(e,!1))}function Tt(r,e){return new Proxy(r,new Gt(new Proxy(r.table,new fr(e,!1))))}function Ha(r,e){return new F.Aliased(is(r.sql,e),r.fieldAlias)}function is(r,e){return y.join(r.queryChunks.map(t=>w(t,ce)?Tt(t,e):w(t,F)?is(t,e):w(t,F.Aliased)?Ha(t,e):t))}var V_,Wa=class{constructor(e){p(this,"config");this.config={...e}}get(e,t){if(t==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===ye)return{...e[ye],selectedFields:new Proxy(e[ye].selectedFields,this)};if(typeof t=="symbol")return e[t];let s=(w(e,Ae)?e._.selectedFields:w(e,Je)?e[ye].selectedFields:e)[t];if(w(s,F.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!s.isSelectionField)return s.sql;let i=s.clone();return i.isSelectionField=!0,i}if(w(s,F)){if(this.config.sqlBehavior==="sql")return s;throw new Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return w(s,ce)?this.config.alias?new Proxy(s,new Gt(new Proxy(s.table,new fr(this.config.alias,this.config.replaceOriginalName??!1)))):s:typeof s!="object"||s===null?s:new Proxy(s,new Wa(this.config))}},Pe=Wa;V_=S,p(Pe,V_,"SelectionProxyHandler");function vu(r,e,t){let n={},s=r.reduce((i,{path:o,field:a},l)=>{let d;w(a,ce)?d=a:w(a,F)?d=a.decoder:d=a.sql.decoder;let c=i;for(let[h,f]of o.entries())if(h<o.length-1)f in c||(c[f]={}),c=c[f];else{let _=e[l],g=c[f]=_===null?null:d.mapFromDriverValue(_);if(t&&w(a,ce)&&o.length===2){let v=o[0];v in n?typeof n[v]=="string"&&n[v]!==et(a.table)&&(n[v]=!1):n[v]=g===null?et(a.table):!1}}return i},{});if(t&&Object.keys(n).length>0)for(let[i,o]of Object.entries(n))typeof o=="string"&&!t[o]&&(s[i]=null);return s}function it(r,e){return Object.entries(r).reduce((t,[n,s])=>{if(typeof n!="string")return t;let i=e?[...e,n]:[n];return w(s,ce)||w(s,F)||w(s,F.Aliased)?t.push({path:i,field:s}):w(s,I)?t.push(...it(s[I.Symbol.Columns],i)):t.push(...it(s,i)),t},[])}function os(r,e){let t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let[s,i]of t.entries())if(i!==n[s])return!1;return!0}function zi(r,e){let t=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,s])=>w(s,F)||w(s,ce)?[n,s]:[n,new Xe(s,r[I.Symbol.Columns][n])]);if(t.length===0)throw new Error("No values to set");return Object.fromEntries(t)}function _u(r,e){for(let t of e)for(let n of Object.getOwnPropertyNames(t.prototype))n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}function bu(r){return r[I.Symbol.Columns]}function Rt(r){return w(r,Ae)?r._.alias:w(r,Je)?r[ye].name:w(r,F)?void 0:r[I.Symbol.IsAlias]?r[I.Symbol.Name]:r[I.Symbol.BaseName]}function Su(r){if(typeof r!="object"||r===null||r.constructor.name!=="Object")return!1;if("logger"in r){let e=typeof r.logger;return!(e!=="boolean"&&(e!=="object"||typeof r.logger.logQuery!="function")&&e!=="undefined")}if("schema"in r){let e=typeof r.logger;return!(e!=="object"&&e!=="undefined")}if("casing"in r){let e=typeof r.logger;return!(e!=="string"&&e!=="undefined")}if("mode"in r)return!(r.mode!=="default"||r.mode!=="planetscale"||r.mode!==void 0);if("connection"in r){let e=typeof r.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in r){let e=typeof r.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(r).length===0}var Q_,zr=class extends Le{constructor(t,n,s,i){super();p(this,"config");p(this,"authToken");p(this,"execute",t=>pe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken)));this.session=n,this.dialect=s,this.config={table:t,withList:i}}where(t){return this.config.where=t,this}returning(t=this.config.table[I.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=it(t),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:t,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(t){return pe.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0))}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Pe({alias:et(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};Q_=S,p(zr,Q_,"PgDelete");function K_(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(t=>t.toLowerCase()).join("_")}function H_(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((t,n,s)=>{let i=s===0?n.toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return t+i},"")}function W_(r){return r}var Z_,as=class{constructor(e){p(this,"cache",{});p(this,"cachedTables",{});p(this,"convert");this.convert=e==="snake_case"?K_:e==="camelCase"?H_:W_}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[I.Symbol.Schema]??"public",n=e.table[I.Symbol.OriginalName],s=`${t}.${n}.${e.name}`;return this.cache[s]||this.cacheTable(e.table),this.cache[s]}cacheTable(e){let t=e[I.Symbol.Schema]??"public",n=e[I.Symbol.OriginalName],s=`${t}.${n}`;if(!this.cachedTables[s]){for(let i of Object.values(e[I.Symbol.Columns])){let o=`${s}.${i.name}`;this.cache[o]=this.convert(i.name)}this.cachedTables[s]=!0}}clearCache(){this.cache={},this.cachedTables={}}};Z_=S,p(as,Z_,"CasingCache");var J_,Gr=class extends Error{constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}};J_=S,p(Gr,J_,"DrizzleError");var Y_,ls=class extends Gr{constructor(){super({message:"Rollback"})}};Y_=S,p(ls,Y_,"TransactionRollbackError");var X_,ft=class extends Ze{defaultNow(){return this.default(y`now()`)}};X_=S,p(ft,X_,"PgDateColumnBaseBuilder");var eb,Za=class extends ft{constructor(e){super(e,"date","PgDate")}build(e){return new Ur(e,this.config)}};eb=S,p(Za,eb,"PgDateBuilder");var tb,Ur=class extends fe{getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}};tb=S,p(Ur,tb,"PgDate");var rb,Ja=class extends ft{constructor(e){super(e,"string","PgDateString")}build(e){return new Br(e,this.config)}};rb=S,p(Ja,rb,"PgDateStringBuilder");var nb,Br=class extends fe{getSQLType(){return"date"}};nb=S,p(Br,nb,"PgDateString");var sb,Ya=class extends Ze{constructor(e){super(e,"json","PgJson")}build(e){return new Vr(e,this.config)}};sb=S,p(Ya,sb,"PgJsonBuilder");var ib,Vr=class extends fe{constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};ib=S,p(Vr,ib,"PgJson");var ob,Xa=class extends Ze{constructor(e){super(e,"json","PgJsonb")}build(e){return new Qr(e,this.config)}};ob=S,p(Xa,ob,"PgJsonbBuilder");var ab,Qr=class extends fe{constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};ab=S,p(Qr,ab,"PgJsonb");var lb,el=class extends Ze{constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new Kr(e,this.config)}};lb=S,p(el,lb,"PgNumericBuilder");var cb,Kr=class extends fe{constructor(t,n){super(t,n);p(this,"precision");p(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};cb=S,p(Kr,cb,"PgNumeric");var ub,tl=class extends ft{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}build(e){return new Hr(e,this.config)}};ub=S,p(tl,ub,"PgTimeBuilder");var db,Hr=class extends fe{constructor(t,n){super(t,n);p(this,"withTimezone");p(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};db=S,p(Hr,db,"PgTime");var fb,rl=class extends ft{constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new Wr(e,this.config)}};fb=S,p(rl,fb,"PgTimestampBuilder");var pb,Wr=class extends fe{constructor(t,n){super(t,n);p(this,"withTimezone");p(this,"precision");p(this,"mapFromDriverValue",t=>new Date(this.withTimezone?t:t+"+0000"));p(this,"mapToDriverValue",t=>t.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}};pb=S,p(Wr,pb,"PgTimestamp");var hb,nl=class extends ft{constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new Zr(e,this.config)}};hb=S,p(nl,hb,"PgTimestampStringBuilder");var mb,Zr=class extends fe{constructor(t,n){super(t,n);p(this,"withTimezone");p(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};mb=S,p(Zr,mb,"PgTimestampString");var yb,sl=class extends Ze{constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(y`gen_random_uuid()`)}build(e){return new Jr(e,this.config)}};yb=S,p(sl,yb,"PgUUIDBuilder");var gb,Jr=class extends fe{getSQLType(){return"uuid"}};gb=S,p(Jr,gb,"PgUUID");var Tu=Symbol.for("drizzle:PgInlineForeignKeys"),Pu=Symbol.for("drizzle:EnableRLS"),vb,_b,bb,Sb,Tb,ze=class extends I{constructor(){super(...arguments);p(this,_b,[]);p(this,bb,!1);p(this,Sb);p(this,Tb,{})}};vb=S,_b=Tu,bb=Pu,Sb=I.Symbol.ExtraConfigBuilder,Tb=I.Symbol.ExtraConfigColumns,p(ze,vb,"PgTable"),p(ze,"Symbol",Object.assign({},I.Symbol,{InlineForeignKeys:Tu,EnableRLS:Pu}));var Pb,cs=class{constructor(e,t){p(this,"columns");p(this,"name");this.columns=e,this.name=t}build(e){return new Gi(e,this.columns,this.name)}};Pb=S,p(cs,Pb,"PgPrimaryKeyBuilder");var wb,Gi=class{constructor(e,t,n){p(this,"columns");p(this,"name");this.table=e,this.columns=t,this.name=n}getName(){return this.name??`${this.table[ze.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};wb=S,p(Gi,wb,"PgPrimaryKey");function tt(r,e){return mu(e)&&!Va(r)&&!w(r,Xe)&&!w(r,St)&&!w(r,ce)&&!w(r,I)&&!w(r,Je)?new Xe(r,e):r}var Ui=(r,e)=>y`${r} = ${tt(e,r)}`,wu=(r,e)=>y`${r} <> ${tt(e,r)}`;function us(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new F(e):new F([new Ce("("),y.join(e,new Ce(" and ")),new Ce(")")])}function xu(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new F(e):new F([new Ce("("),y.join(e,new Ce(" or ")),new Ce(")")])}function Eu(r){return y`not ${r}`}var Ou=(r,e)=>y`${r} > ${tt(e,r)}`,Au=(r,e)=>y`${r} >= ${tt(e,r)}`,Cu=(r,e)=>y`${r} < ${tt(e,r)}`,Ru=(r,e)=>y`${r} <= ${tt(e,r)}`;function Nu(r,e){return Array.isArray(e)?e.length===0?y`false`:y`${r} in ${e.map(t=>tt(t,r))}`:y`${r} in ${tt(e,r)}`}function Mu(r,e){return Array.isArray(e)?e.length===0?y`true`:y`${r} not in ${e.map(t=>tt(t,r))}`:y`${r} not in ${tt(e,r)}`}function ku(r){return y`${r} is null`}function Iu(r){return y`${r} is not null`}function $u(r){return y`exists ${r}`}function Du(r){return y`not exists ${r}`}function qu(r,e,t){return y`${r} between ${tt(e,r)} and ${tt(t,r)}`}function ju(r,e,t){return y`${r} not between ${tt(e,r)} and ${tt(t,r)}`}function Fu(r,e){return y`${r} like ${e}`}function Lu(r,e){return y`${r} not like ${e}`}function zu(r,e){return y`${r} ilike ${e}`}function Gu(r,e){return y`${r} not ilike ${e}`}function Uu(r){return y`${r} asc`}function Bu(r){return y`${r} desc`}var Ob,ds=class{constructor(e,t,n){p(this,"referencedTableName");p(this,"fieldName");this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[I.Symbol.Name]}};Ob=S,p(ds,Ob,"Relation");var Ab,Bi=class{constructor(e,t){this.table=e,this.config=t}};Ab=S,p(Bi,Ab,"Relations");var Cb,il=class extends ds{constructor(e,t,n,s){super(e,t,n?.relationName),this.config=n,this.isNullable=s}withFieldName(e){let t=new il(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}},Nt=il;Cb=S,p(Nt,Cb,"One");var Rb,ol=class extends ds{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}withFieldName(e){let t=new ol(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}},Yr=ol;Rb=S,p(Yr,Rb,"Many");function Vu(){return{and:us,between:qu,eq:Ui,exists:$u,gt:Ou,gte:Au,ilike:zu,inArray:Nu,isNull:ku,isNotNull:Iu,like:Fu,lt:Cu,lte:Ru,ne:wu,not:Eu,notBetween:ju,notExists:Du,notLike:Lu,notIlike:Gu,notInArray:Mu,or:xu,sql:y}}function Qu(){return{sql:y,asc:Uu,desc:Bu}}function Ku(r,e){Object.keys(r).length===1&&"default"in r&&!w(r.default,I)&&(r=r.default);let t={},n={},s={};for(let[i,o]of Object.entries(r))if(w(o,I)){let a=dr(o),l=n[a];t[a]=i,s[i]={tsName:i,dbName:o[I.Symbol.Name],schema:o[I.Symbol.Schema],columns:o[I.Symbol.Columns],relations:l?.relations??{},primaryKey:l?.primaryKey??[]};for(let c of Object.values(o[I.Symbol.Columns]))c.primary&&s[i].primaryKey.push(c);let d=o[I.Symbol.ExtraConfigBuilder]?.(o[I.Symbol.ExtraConfigColumns]);if(d)for(let c of Object.values(d))w(c,cs)&&s[i].primaryKey.push(...c.columns)}else if(w(o,Bi)){let a=dr(o.table),l=t[a],d=o.config(e(o.table)),c;for(let[h,f]of Object.entries(d))if(l){let _=s[l];_.relations[h]=f,c&&_.primaryKey.push(...c)}else a in n||(n[a]={relations:{},primaryKey:c}),n[a].relations[h]=f}return{tables:s,tableNamesMap:t}}function xb(r){return function(t,n){return new Nt(r,t,n,n?.fields.reduce((s,i)=>s&&i.notNull,!0)??!1)}}function Eb(r){return function(t,n){return new Yr(r,t,n)}}function Hu(r,e,t){if(w(t,Nt)&&t.config)return{fields:t.config.fields,references:t.config.references};let n=e[dr(t.referencedTable)];if(!n)throw new Error(`Table "${t.referencedTable[I.Symbol.Name]}" not found in schema`);let s=r[n];if(!s)throw new Error(`Table "${n}" not found in schema`);let i=t.sourceTable,o=e[dr(i)];if(!o)throw new Error(`Table "${i[I.Symbol.Name]}" not found in schema`);let a=[];for(let l of Object.values(s.relations))(t.relationName&&t!==l&&l.relationName===t.relationName||!t.relationName&&l.referencedTable===t.sourceTable)&&a.push(l);if(a.length>1)throw t.relationName?new Error(`There are multiple relations with name "${t.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${t.sourceTable[I.Symbol.Name]}". Please specify relation name`);if(a[0]&&w(a[0],Nt)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${o}.${t.fieldName}"`)}function Wu(r){return{one:xb(r),many:Eb(r)}}function Vi(r,e,t,n,s=i=>i){let i={};for(let[o,a]of n.entries())if(a.isJson){let l=e.relations[a.tsKey],d=t[o],c=typeof d=="string"?JSON.parse(d):d;i[a.tsKey]=w(l,Nt)?c&&Vi(r,r[a.relationTableTsKey],c,a.selection,s):c.map(h=>Vi(r,r[a.relationTableTsKey],h,a.selection,s))}else{let l=s(t[o]),d=a.field,c;w(d,ce)?c=d:w(d,F)?c=d.decoder:c=d.sql.decoder,i[a.tsKey]=l===null?null:c.mapFromDriverValue(l)}return i}var Nb,pr=class extends Je{};Nb=S,p(pr,Nb,"PgViewBase");var Mb,Mt=class{constructor(e){p(this,"casing");this.casing=new as(e?.casing)}async migrate(e,t,n){let s=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",i=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",o=y`
			CREATE TABLE IF NOT EXISTS ${y.identifier(i)}.${y.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(y`CREATE SCHEMA IF NOT EXISTS ${y.identifier(i)}`),await t.execute(o);let l=(await t.all(y`select id, hash, created_at from ${y.identifier(i)}.${y.identifier(s)} order by created_at desc limit 1`))[0];await t.transaction(async d=>{for await(let c of e)if(!l||Number(l.created_at)<c.folderMillis){for(let h of c.sql)await d.execute(y.raw(h));await d.execute(y`insert into ${y.identifier(i)}.${y.identifier(s)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[y`with `];for(let[n,s]of e.entries())t.push(y`${y.identifier(s._.alias)} as (${s._.sql})`),n<e.length-1&&t.push(y`, `);return t.push(y` `),y.join(t)}buildDeleteQuery({table:e,where:t,returning:n,withList:s}){let i=this.buildWithCTE(s),o=n?y` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,a=t?y` where ${t}`:void 0;return y`${i}delete from ${e}${a}${o}`}buildUpdateSet(e,t){let n=e[I.Symbol.Columns],s=Object.keys(n).filter(o=>t[o]!==void 0||n[o]?.onUpdateFn!==void 0),i=s.length;return y.join(s.flatMap((o,a)=>{let l=n[o],d=t[o]??y.param(l.onUpdateFn(),l),c=y`${y.identifier(this.casing.getColumnCasing(l))} = ${d}`;return a<i-1?[c,y.raw(", ")]:[c]}))}buildUpdateQuery({table:e,set:t,where:n,returning:s,withList:i,from:o,joins:a}){let l=this.buildWithCTE(i),d=e[ze.Symbol.Name],c=e[ze.Symbol.Schema],h=e[ze.Symbol.OriginalName],f=d===h?void 0:d,_=y`${c?y`${y.identifier(c)}.`:void 0}${y.identifier(h)}${f&&y` ${y.identifier(f)}`}`,g=this.buildUpdateSet(e,t),v=o&&y.join([y.raw(" from "),this.buildFromTable(o)]),x=this.buildJoins(a),T=s?y` returning ${this.buildSelection(s,{isSingleTable:!o})}`:void 0,M=n?y` where ${n}`:void 0;return y`${l}update ${_} set ${g}${v}${x}${M}${T}`}buildSelection(e,{isSingleTable:t=!1}={}){let n=e.length,s=e.flatMap(({field:i},o)=>{let a=[];if(w(i,F.Aliased)&&i.isSelectionField)a.push(y.identifier(i.fieldAlias));else if(w(i,F.Aliased)||w(i,F)){let l=w(i,F.Aliased)?i.sql:i;t?a.push(new F(l.queryChunks.map(d=>w(d,fe)?y.identifier(this.casing.getColumnCasing(d)):d))):a.push(l),w(i,F.Aliased)&&a.push(y` as ${y.identifier(i.fieldAlias)}`)}else w(i,ce)&&(t?a.push(y.identifier(this.casing.getColumnCasing(i))):a.push(i));return o<n-1&&a.push(y`, `),a});return y.join(s)}buildJoins(e){if(!e||e.length===0)return;let t=[];for(let[n,s]of e.entries()){n===0&&t.push(y` `);let i=s.table,o=s.lateral?y` lateral`:void 0;if(w(i,ze)){let a=i[ze.Symbol.Name],l=i[ze.Symbol.Schema],d=i[ze.Symbol.OriginalName],c=a===d?void 0:s.alias;t.push(y`${y.raw(s.joinType)} join${o} ${l?y`${y.identifier(l)}.`:void 0}${y.identifier(d)}${c&&y` ${y.identifier(c)}`} on ${s.on}`)}else if(w(i,Je)){let a=i[ye].name,l=i[ye].schema,d=i[ye].originalName,c=a===d?void 0:s.alias;t.push(y`${y.raw(s.joinType)} join${o} ${l?y`${y.identifier(l)}.`:void 0}${y.identifier(d)}${c&&y` ${y.identifier(c)}`} on ${s.on}`)}else t.push(y`${y.raw(s.joinType)} join${o} ${i} on ${s.on}`);n<e.length-1&&t.push(y` `)}return y.join(t)}buildFromTable(e){if(w(e,I)&&e[I.Symbol.OriginalName]!==e[I.Symbol.Name]){let t=y`${y.identifier(e[I.Symbol.OriginalName])}`;return e[I.Symbol.Schema]&&(t=y`${y.identifier(e[I.Symbol.Schema])}.${t}`),y`${t} ${y.identifier(e[I.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:n,where:s,having:i,table:o,joins:a,orderBy:l,groupBy:d,limit:c,offset:h,lockingClause:f,distinct:_,setOperators:g}){let v=n??it(t);for(let Y of v)if(w(Y.field,ce)&&et(Y.field.table)!==(w(o,Ae)?o._.alias:w(o,pr)?o[ye].name:w(o,F)?void 0:et(o))&&!(se=>a?.some(({alias:ae})=>ae===(se[I.Symbol.IsAlias]?et(se):se[I.Symbol.BaseName])))(Y.field.table)){let se=et(Y.field.table);throw new Error(`Your "${Y.path.join("->")}" field references a column "${se}"."${Y.field.name}", but the table "${se}" is not part of the query! Did you forget to join it?`)}let x=!a||a.length===0,T=this.buildWithCTE(e),M;_&&(M=_===!0?y` distinct`:y` distinct on (${y.join(_.on,y`, `)})`);let E=this.buildSelection(v,{isSingleTable:x}),A=this.buildFromTable(o),N=this.buildJoins(a),Q=s?y` where ${s}`:void 0,R=i?y` having ${i}`:void 0,q;l&&l.length>0&&(q=y` order by ${y.join(l,y`, `)}`);let z;d&&d.length>0&&(z=y` group by ${y.join(d,y`, `)}`);let P=typeof c=="object"||typeof c=="number"&&c>=0?y` limit ${c}`:void 0,K=h?y` offset ${h}`:void 0,G=y.empty();if(f){let Y=y` for ${y.raw(f.strength)}`;f.config.of&&Y.append(y` of ${y.join(Array.isArray(f.config.of)?f.config.of:[f.config.of],y`, `)}`),f.config.noWait?Y.append(y` no wait`):f.config.skipLocked&&Y.append(y` skip locked`),G.append(Y)}let U=y`${T}select${M} ${E} from ${A}${N}${Q}${z}${R}${q}${P}${K}${G}`;return g.length>0?this.buildSetOperations(U,g):U}buildSetOperations(e,t){let[n,...s]=t;if(!n)throw new Error("Cannot pass undefined values to any set operator");return s.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),s)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:n,rightSelect:s,limit:i,orderBy:o,offset:a}}){let l=y`(${e.getSQL()}) `,d=y`(${s.getSQL()})`,c;if(o&&o.length>0){let g=[];for(let v of o)if(w(v,fe))g.push(y.identifier(v.name));else if(w(v,F)){for(let x=0;x<v.queryChunks.length;x++){let T=v.queryChunks[x];w(T,fe)&&(v.queryChunks[x]=y.identifier(T.name))}g.push(y`${v}`)}else g.push(y`${v}`);c=y` order by ${y.join(g,y`, `)} `}let h=typeof i=="object"||typeof i=="number"&&i>=0?y` limit ${i}`:void 0,f=y.raw(`${t} ${n?"all ":""}`),_=a?y` offset ${a}`:void 0;return y`${l}${f}${d}${c}${h}${_}`}buildInsertQuery({table:e,values:t,onConflict:n,returning:s,withList:i,select:o,overridingSystemValue_:a}){let l=[],d=e[I.Symbol.Columns],c=Object.entries(d).filter(([T,M])=>!M.shouldDisableInsert()),h=c.map(([,T])=>y.identifier(this.casing.getColumnCasing(T)));if(o){let T=t;w(T,F)?l.push(T):l.push(T.getSQL())}else{let T=t;l.push(y.raw("values "));for(let[M,E]of T.entries()){let A=[];for(let[N,Q]of c){let R=E[N];if(R===void 0||w(R,Xe)&&R.value===void 0)if(Q.defaultFn!==void 0){let q=Q.defaultFn(),z=w(q,F)?q:y.param(q,Q);A.push(z)}else if(!Q.default&&Q.onUpdateFn!==void 0){let q=Q.onUpdateFn(),z=w(q,F)?q:y.param(q,Q);A.push(z)}else A.push(y`default`);else A.push(R)}l.push(A),M<T.length-1&&l.push(y`, `)}}let f=this.buildWithCTE(i),_=y.join(l),g=s?y` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,v=n?y` on conflict ${n}`:void 0,x=a===!0?y`overriding system value `:void 0;return y`${f}insert into ${e} ${h} ${x}${_}${v}${g}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:n}){let s=t?y` concurrently`:void 0,i=n?y` with no data`:void 0;return y`refresh materialized view${s} ${e}${i}`}prepareTyping(e){return w(e,Qr)||w(e,Vr)?"json":w(e,Kr)?"decimal":w(e,Hr)?"time":w(e,Wr)||w(e,Zr)?"timestamp":w(e,Ur)||w(e,Br)?"date":w(e,Jr)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:s,tableConfig:i,queryConfig:o,tableAlias:a,nestedQueryRelation:l,joinOn:d}){let c=[],h,f,_=[],g,v=[];if(o===!0)c=Object.entries(i.columns).map(([M,E])=>({dbKey:E.name,tsKey:M,field:Tt(E,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let T=Object.fromEntries(Object.entries(i.columns).map(([R,q])=>[R,Tt(q,a)]));if(o.where){let R=typeof o.where=="function"?o.where(T,Vu()):o.where;g=R&&is(R,a)}let M=[],E=[];if(o.columns){let R=!1;for(let[q,z]of Object.entries(o.columns))z!==void 0&&q in i.columns&&(!R&&z===!0&&(R=!0),E.push(q));E.length>0&&(E=R?E.filter(q=>o.columns?.[q]===!0):Object.keys(i.columns).filter(q=>!E.includes(q)))}else E=Object.keys(i.columns);for(let R of E){let q=i.columns[R];M.push({tsKey:R,value:q})}let A=[];o.with&&(A=Object.entries(o.with).filter(R=>!!R[1]).map(([R,q])=>({tsKey:R,queryConfig:q,relation:i.relations[R]})));let N;if(o.extras){N=typeof o.extras=="function"?o.extras(T,{sql:y}):o.extras;for(let[R,q]of Object.entries(N))M.push({tsKey:R,value:Ha(q,a)})}for(let{tsKey:R,value:q}of M)c.push({dbKey:w(q,F.Aliased)?q.fieldAlias:i.columns[R].name,tsKey:R,field:w(q,ce)?Tt(q,a):q,relationTableTsKey:void 0,isJson:!1,selection:[]});let Q=typeof o.orderBy=="function"?o.orderBy(T,Qu()):o.orderBy??[];Array.isArray(Q)||(Q=[Q]),_=Q.map(R=>w(R,ce)?Tt(R,a):is(R,a)),h=o.limit,f=o.offset;for(let{tsKey:R,queryConfig:q,relation:z}of A){let P=Hu(t,n,z),K=dr(z.referencedTable),G=n[K],U=`${a}_${R}`,Y=us(...P.fields.map((ke,O)=>Ui(Tt(P.references[O],U),Tt(ke,a)))),se=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:e[G],tableConfig:t[G],queryConfig:w(z,Nt)?q===!0?{limit:1}:{...q,limit:1}:q,tableAlias:U,joinOn:Y,nestedQueryRelation:z}),ae=y`${y.identifier(U)}.${y.identifier("data")}`.as(R);v.push({on:y`true`,table:new Ae(se.sql,{},U),alias:U,joinType:"left",lateral:!0}),c.push({dbKey:R,tsKey:R,field:ae,relationTableTsKey:G,isJson:!0,selection:se.selection})}}if(c.length===0)throw new Gr({message:`No fields selected for table "${i.tsName}" ("${a}")`});let x;if(g=us(d,g),l){let T=y`json_build_array(${y.join(c.map(({field:A,tsKey:N,isJson:Q})=>Q?y`${y.identifier(`${a}_${N}`)}.${y.identifier("data")}`:w(A,F.Aliased)?A.sql:A),y`, `)})`;w(l,Yr)&&(T=y`coalesce(json_agg(${T}${_.length>0?y` order by ${y.join(_,y`, `)}`:void 0}), '[]'::json)`);let M=[{dbKey:"data",tsKey:"data",field:T.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:c}];h!==void 0||f!==void 0||_.length>0?(x=this.buildSelectQuery({table:ss(s,a),fields:{},fieldsFlat:[{path:[],field:y.raw("*")}],where:g,limit:h,offset:f,orderBy:_,setOperators:[]}),g=void 0,h=void 0,f=void 0,_=[]):x=ss(s,a),x=this.buildSelectQuery({table:w(x,ze)?x:new Ae(x,{},a),fields:{},fieldsFlat:M.map(({field:A})=>({path:[],field:w(A,ce)?Tt(A,a):A})),joins:v,where:g,limit:h,offset:f,orderBy:_,setOperators:[]})}else x=this.buildSelectQuery({table:ss(s,a),fields:{},fieldsFlat:c.map(({field:T})=>({path:[],field:w(T,ce)?Tt(T,a):T})),joins:v,where:g,limit:h,offset:f,orderBy:_,setOperators:[]});return{tableTsKey:i.tsName,sql:x,selection:c}}};Mb=S,p(Mt,Mb,"PgDialect");var kb,fs=class{getSelectedFields(){return this._.selectedFields}};kb=S,p(fs,kb,"TypedQueryBuilder");var zb,Ge=class{constructor(e){p(this,"fields");p(this,"session");p(this,"dialect");p(this,"withList",[]);p(this,"distinct");p(this,"authToken");this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}setToken(e){return this.authToken=e,this}from(e){let t=!!this.fields,n=e,s;return this.fields?s=this.fields:w(n,Ae)?s=Object.fromEntries(Object.keys(n._.selectedFields).map(i=>[i,n[i]])):w(n,pr)?s=n[ye].selectedFields:w(n,F)?s={}:s=bu(n),new ps({table:n,fields:s,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}};zb=S,p(Ge,zb,"PgSelectBuilder");var Gb,Qi=class extends fs{constructor({table:t,fields:n,isPartialSelect:s,session:i,dialect:o,withList:a,distinct:l}){super();p(this,"_");p(this,"config");p(this,"joinsNotNullableMap");p(this,"tableName");p(this,"isPartialSelect");p(this,"session");p(this,"dialect");p(this,"leftJoin",this.createJoin("left"));p(this,"rightJoin",this.createJoin("right"));p(this,"innerJoin",this.createJoin("inner"));p(this,"fullJoin",this.createJoin("full"));p(this,"union",this.createSetOperator("union",!1));p(this,"unionAll",this.createSetOperator("union",!0));p(this,"intersect",this.createSetOperator("intersect",!1));p(this,"intersectAll",this.createSetOperator("intersect",!0));p(this,"except",this.createSetOperator("except",!1));p(this,"exceptAll",this.createSetOperator("except",!0));this.config={withList:a,table:t,fields:{...n},distinct:l,setOperators:[]},this.isPartialSelect=s,this.session=i,this.dialect=o,this._={selectedFields:n},this.tableName=Rt(t),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(t){return(n,s)=>{let i=this.tableName,o=Rt(n);if(typeof o=="string"&&this.config.joins?.some(a=>a.alias===o))throw new Error(`Alias "${o}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof i=="string"&&(this.config.fields={[i]:this.config.fields}),typeof o=="string"&&!w(n,F))){let a=w(n,Ae)?n._.selectedFields:w(n,Je)?n[ye].selectedFields:n[I.Symbol.Columns];this.config.fields[o]=a}if(typeof s=="function"&&(s=s(new Proxy(this.config.fields,new Pe({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:s,table:n,joinType:t,alias:o}),typeof o=="string")switch(t){case"left":{this.joinsNotNullableMap[o]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[o]=!0;break}case"inner":{this.joinsNotNullableMap[o]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[o]=!1;break}}return this}}createSetOperator(t,n){return s=>{let i=typeof s=="function"?s(Ib()):s;if(!os(this.getSelectedFields(),i.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:t,isAll:n,rightSelect:i}),this}}addSetOperators(t){return this.config.setOperators.push(...t),this}where(t){return typeof t=="function"&&(t=t(new Proxy(this.config.fields,new Pe({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=t,this}having(t){return typeof t=="function"&&(t=t(new Proxy(this.config.fields,new Pe({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=t,this}groupBy(...t){if(typeof t[0]=="function"){let n=t[0](new Proxy(this.config.fields,new Pe({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(n)?n:[n]}else this.config.groupBy=t;return this}orderBy(...t){if(typeof t[0]=="function"){let n=t[0](new Proxy(this.config.fields,new Pe({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),s=Array.isArray(n)?n:[n];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=s:this.config.orderBy=s}else{let n=t;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}return this}limit(t){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=t:this.config.limit=t,this}offset(t){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=t:this.config.offset=t,this}for(t,n={}){return this.config.lockingClause={strength:t,config:n},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:t,...n}=this.dialect.sqlToQuery(this.getSQL());return n}as(t){return new Proxy(new Ae(this.getSQL(),this.config.fields,t),new Pe({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Pe({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}};Gb=S,p(Qi,Gb,"PgSelectQueryBuilder");var Ub,ps=class extends Qi{constructor(){super(...arguments);p(this,"authToken");p(this,"execute",t=>pe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken)))}_prepare(t){let{session:n,config:s,dialect:i,joinsNotNullableMap:o,authToken:a}=this;if(!n)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return pe.startActiveSpan("drizzle.prepareQuery",()=>{let l=it(s.fields),d=n.prepareQuery(i.sqlToQuery(this.getSQL()),l,t,!0);return d.joinsNotNullableMap=o,d.setToken(a)})}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}};Ub=S,p(ps,Ub,"PgSelect");_u(ps,[Le]);function Xr(r,e){return(t,n,...s)=>{let i=[n,...s].map(o=>({type:r,isAll:e,rightSelect:o}));for(let o of i)if(!os(t.getSelectedFields(),o.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(i)}}var Ib=()=>({union:$b,unionAll:Db,intersect:qb,intersectAll:jb,except:Fb,exceptAll:Lb}),$b=Xr("union",!1),Db=Xr("union",!0),qb=Xr("intersect",!1),jb=Xr("intersect",!0),Fb=Xr("except",!1),Lb=Xr("except",!0);var Bb,hr=class{constructor(e){p(this,"dialect");p(this,"dialectConfig");p(this,"$with",(e,t)=>{let n=this;return{as:i=>(typeof i=="function"&&(i=i(n)),new Proxy(new ur(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Pe({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}});this.dialect=w(e,Mt)?e:void 0,this.dialectConfig=w(e,Mt)?void 0:e}with(...e){let t=this;function n(o){return new Ge({fields:o??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function s(o){return new Ge({fields:o??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function i(o,a){return new Ge({fields:a??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:o}})}return{select:n,selectDistinct:s,selectDistinctOn:i}}select(e){return new Ge({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Ge({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new Ge({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Mt(this.dialectConfig)),this.dialect}};Bb=S,p(hr,Bb,"PgQueryBuilder");var Vb,en=class{constructor(e,t,n,s,i){p(this,"authToken");this.table=e,this.session=t,this.dialect=n,this.withList=s,this.overridingSystemValue_=i}setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let t=e.map(n=>{let s={},i=this.table[I.Symbol.Columns];for(let o of Object.keys(n)){let a=n[o];s[o]=w(a,F)?a:new Xe(a,i[o])}return s});return new hs(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t=typeof e=="function"?e(new hr):e;if(!w(t,F)&&!os(this.table[Li],t._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new hs(this.table,t,this.session,this.dialect,this.withList,!0)}};Vb=S,p(en,Vb,"PgInsertBuilder");var Qb,hs=class extends Le{constructor(t,n,s,i,o,a,l){super();p(this,"config");p(this,"authToken");p(this,"execute",t=>pe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken)));this.session=s,this.dialect=i,this.config={table:t,values:n,withList:o,select:a,overridingSystemValue_:l}}returning(t=this.config.table[I.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=it(t),this}onConflictDoNothing(t={}){if(t.target===void 0)this.config.onConflict=y`do nothing`;else{let n="";n=Array.isArray(t.target)?t.target.map(i=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(i))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target));let s=t.where?y` where ${t.where}`:void 0;this.config.onConflict=y`(${y.raw(n)})${s} do nothing`}return this}onConflictDoUpdate(t){if(t.where&&(t.targetWhere||t.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let n=t.where?y` where ${t.where}`:void 0,s=t.targetWhere?y` where ${t.targetWhere}`:void 0,i=t.setWhere?y` where ${t.setWhere}`:void 0,o=this.dialect.buildUpdateSet(this.config.table,zi(this.config.table,t.set)),a="";return a=Array.isArray(t.target)?t.target.map(l=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(l))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target)),this.config.onConflict=y`(${y.raw(a)})${s} do update set ${o}${n}${i}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:t,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(t){return pe.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0))}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Pe({alias:et(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};Qb=S,p(hs,Qb,"PgInsert");var Kb,ms=class extends Le{constructor(t,n,s){super();p(this,"config");p(this,"authToken");p(this,"execute",t=>pe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken)));this.session=n,this.dialect=s,this.config={view:t}}concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:t,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(t){return pe.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,t,!0))}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}};Kb=S,p(ms,Kb,"PgRefreshMaterializedView");var Hb,tn=class{constructor(e,t,n,s){p(this,"authToken");this.table=e,this.session=t,this.dialect=n,this.withList=s}setToken(e){return this.authToken=e,this}set(e){return new Ki(this.table,zi(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}};Hb=S,p(tn,Hb,"PgUpdateBuilder");var Wb,Ki=class extends Le{constructor(t,n,s,i,o){super();p(this,"config");p(this,"tableName");p(this,"joinsNotNullableMap");p(this,"leftJoin",this.createJoin("left"));p(this,"rightJoin",this.createJoin("right"));p(this,"innerJoin",this.createJoin("inner"));p(this,"fullJoin",this.createJoin("full"));p(this,"authToken");p(this,"execute",t=>this._prepare().execute(t,this.authToken));this.session=s,this.dialect=i,this.config={set:n,table:t,withList:o,joins:[]},this.tableName=Rt(t),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}from(t){let n=t,s=Rt(n);return typeof s=="string"&&(this.joinsNotNullableMap[s]=!0),this.config.from=n,this}getTableLikeFields(t){return w(t,ze)?t[I.Symbol.Columns]:w(t,Ae)?t._.selectedFields:t[ye].selectedFields}createJoin(t){return(n,s)=>{let i=Rt(n);if(typeof i=="string"&&this.config.joins.some(o=>o.alias===i))throw new Error(`Alias "${i}" is already used in this query`);if(typeof s=="function"){let o=this.config.from&&!w(this.config.from,F)?this.getTableLikeFields(this.config.from):void 0;s=s(new Proxy(this.config.table[I.Symbol.Columns],new Pe({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),o&&new Proxy(o,new Pe({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:s,table:n,joinType:t,alias:i}),typeof i=="string")switch(t){case"left":{this.joinsNotNullableMap[i]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[i]=!0;break}case"inner":{this.joinsNotNullableMap[i]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[i]=!1;break}}return this}}where(t){return this.config.where=t,this}returning(t){if(!t&&(t=Object.assign({},this.config.table[I.Symbol.Columns]),this.config.from)){let n=Rt(this.config.from);if(typeof n=="string"&&this.config.from&&!w(this.config.from,F)){let s=this.getTableLikeFields(this.config.from);t[n]=s}for(let s of this.config.joins){let i=Rt(s.table);if(typeof i=="string"&&!w(s.table,F)){let o=this.getTableLikeFields(s.table);t[i]=o}}}return this.config.returningFields=t,this.config.returning=it(t),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:t,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(t){let n=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0);return n.joinsNotNullableMap=this.joinsNotNullableMap,n}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Pe({alias:et(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};Wb=S,p(Ki,Wb,"PgUpdate");var Zb,Jb,Hi=class extends F{constructor(t){super(Hi.buildEmbeddedCount(t.source,t.filters).queryChunks);p(this,"sql");p(this,"token");p(this,Jb,"PgCountBuilder");p(this,"session");this.params=t,this.mapWith(Number),this.session=t.session,this.sql=Hi.buildCount(t.source,t.filters)}static buildEmbeddedCount(t,n){return y`(select count(*) from ${t}${y.raw(" where ").if(n)}${n})`}static buildCount(t,n){return y`select count(*) as count from ${t}${y.raw(" where ").if(n)}${n};`}setToken(t){return this.token=t,this}then(t,n){return Promise.resolve(this.session.count(this.sql,this.token)).then(t,n)}catch(t){return this.then(void 0,t)}finally(t){return this.then(n=>(t?.(),n),n=>{throw t?.(),n})}},ys=Hi;Zb=S,Jb=Symbol.toStringTag,p(ys,Zb,"PgCountBuilder");var Yb,gs=class{constructor(e,t,n,s,i,o,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=s,this.tableConfig=i,this.dialect=o,this.session=a}findMany(e){return new vs(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new vs(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}};Yb=S,p(gs,Yb,"PgRelationalQueryBuilder");var Xb,vs=class extends Le{constructor(t,n,s,i,o,a,l,d,c){super();p(this,"authToken");this.fullSchema=t,this.schema=n,this.tableNamesMap=s,this.table=i,this.tableConfig=o,this.dialect=a,this.session=l,this.config=d,this.mode=c}_prepare(t){return pe.startActiveSpan("drizzle.prepareQuery",()=>{let{query:n,builtQuery:s}=this._toSQL();return this.session.prepareQuery(s,void 0,t,!0,(i,o)=>{let a=i.map(l=>Vi(this.schema,this.tableConfig,l,n.selection,o));return this.mode==="first"?a[0]:a})})}prepare(t){return this._prepare(t)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let t=this._getQuery(),n=this.dialect.sqlToQuery(t.sql);return{query:t,builtQuery:n}}toSQL(){return this._toSQL().builtQuery}setToken(t){return this.authToken=t,this}execute(){return pe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};Xb=S,p(vs,Xb,"PgRelationalQuery");var eS,_s=class extends Le{constructor(e,t,n,s){super(),this.execute=e,this.sql=t,this.query=n,this.mapBatchResult=s}getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};eS=S,p(_s,eS,"PgRaw");var tS,mr=class{constructor(e,t,n){p(this,"query");p(this,"$with",(e,t)=>{let n=this;return{as:i=>(typeof i=="function"&&(i=i(new hr(n.dialect))),new Proxy(new ur(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Pe({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}});p(this,"authToken");if(this.dialect=e,this.session=t,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[s,i]of Object.entries(this._.schema))this.query[s]=new gs(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[s],i,e,t)}$count(e,t){return new ys({source:e,filters:t,session:this.session})}with(...e){let t=this;function n(d){return new Ge({fields:d??void 0,session:t.session,dialect:t.dialect,withList:e})}function s(d){return new Ge({fields:d??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function i(d,c){return new Ge({fields:c??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:d}})}function o(d){return new tn(d,t.session,t.dialect,e)}function a(d){return new en(d,t.session,t.dialect,e)}function l(d){return new zr(d,t.session,t.dialect,e)}return{select:n,selectDistinct:s,selectDistinctOn:i,update:o,insert:a,delete:l}}select(e){return new Ge({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Ge({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new Ge({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new tn(e,this.session,this.dialect)}insert(e){return new en(e,this.session,this.dialect)}delete(e){return new zr(e,this.session,this.dialect)}refreshMaterializedView(e){return new ms(e,this.session,this.dialect)}execute(e){let t=typeof e=="string"?y.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(t),s=this.session.prepareQuery(n,void 0,void 0,!1);return new _s(()=>s.execute(void 0,this.authToken),t,n,i=>s.mapResult(i,!0))}transaction(e,t){return this.session.transaction(e,t)}};tS=S,p(mr,tS,"PgDatabase");var rS,bs=class{constructor(e){p(this,"authToken");p(this,"joinsNotNullableMap");this.query=e}getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}};rS=S,p(bs,rS,"PgPreparedQuery");var nS,Ss=class{constructor(e){this.dialect=e}execute(e,t){return pe.startActiveSpan("drizzle.operation",()=>pe.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){let n=await this.execute(e,t);return Number(n[0].count)}};nS=S,p(Ss,nS,"PgSession");var sS,Ts=class extends mr{constructor(e,t,n,s=0){super(e,t,n),this.schema=n,this.nestedIndex=s}rollback(){throw new ls}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),y.raw(t.join(" "))}setTransaction(e){return this.session.execute(y`set transaction ${this.getTransactionConfigSQL(e)}`)}};sS=S,p(Ts,sS,"PgTransaction");var iS,Wi=class extends bs{constructor(e,t,n,s,i,o,a){super({sql:t,params:n}),this.client=e,this.queryString=t,this.params=n,this.logger=s,this.fields=i,this._isResponseInArrayMode=o,this.customResultMapper=a}async execute(e={}){return pe.startActiveSpan("drizzle.execute",async t=>{let n=Qa(this.params,e);t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(n)}),this.logger.logQuery(this.queryString,n);let{fields:s,queryString:i,client:o,joinsNotNullableMap:a,customResultMapper:l}=this;if(!s&&!l)return pe.startActiveSpan("drizzle.driver.execute",()=>o.unsafe(i,n));let d=await pe.startActiveSpan("drizzle.driver.execute",()=>(t?.setAttributes({"drizzle.query.text":i,"drizzle.query.params":JSON.stringify(n)}),o.unsafe(i,n).values()));return pe.startActiveSpan("drizzle.mapResponse",()=>l?l(d):d.map(c=>vu(s,c,a)))})}all(e={}){return pe.startActiveSpan("drizzle.execute",async t=>{let n=Qa(this.params,e);return t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(n)}),this.logger.logQuery(this.queryString,n),pe.startActiveSpan("drizzle.driver.execute",()=>(t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(n)}),this.client.unsafe(this.queryString,n)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}};iS=S,p(Wi,iS,"PostgresJsPreparedQuery");var oS,al=class extends Ss{constructor(t,n,s,i={}){super(n);p(this,"logger");this.client=t,this.schema=s,this.options=i,this.logger=i.logger??new es}prepareQuery(t,n,s,i,o){return new Wi(this.client,t.sql,t.params,this.logger,n,i,o)}query(t,n){return this.logger.logQuery(t,n),this.client.unsafe(t,n).values()}queryObjects(t,n){return this.client.unsafe(t,n)}transaction(t,n){return this.client.begin(async s=>{let i=new al(s,this.dialect,this.schema,this.options),o=new Zi(this.dialect,i,this.schema);return n&&await o.setTransaction(n),t(o)})}},rn=al;oS=S,p(rn,oS,"PostgresJsSession");var aS,ll=class extends Ts{constructor(e,t,n,s=0){super(e,t,n,s),this.session=t}transaction(e){return this.session.client.savepoint(t=>{let n=new rn(t,this.dialect,this.schema,this.session.options),s=new ll(this.dialect,n,this.schema);return e(s)})}},Zi=ll;aS=S,p(Zi,aS,"PostgresJsTransaction");var lS,Ji=class extends mr{};lS=S,p(Ji,lS,"PostgresJsDatabase");function nn(r,e={}){let t=l=>l;for(let l of["1184","1082","1083","1114"])r.options.parsers[l]=t,r.options.serializers[l]=t;r.options.serializers[114]=t,r.options.serializers[3802]=t;let n=new Mt({casing:e.casing}),s;e.logger===!0?s=new Xn:e.logger!==!1&&(s=e.logger);let i;if(e.schema){let l=Ku(e.schema,Wu);i={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let o=new rn(r,n,i,{logger:s}),a=new Ji(n,o,i);return a.$client=r,a}function Yi(...r){if(typeof r[0]=="string"){let e=jr(r[0]);return nn(e,r[1])}if(Su(r[0])){let{connection:e,client:t,...n}=r[0];if(t)return nn(t,n);if(typeof e=="object"&&e.url!==void 0){let{url:i,...o}=e,a=jr(i,o);return nn(a,n)}let s=jr(e);return nn(s,n)}return nn(r[0],r[1])}(r=>{function e(t){return nn({options:{parsers:{},serializers:{}}},t)}r.mock=e})(Yi||(Yi={}));var Nd=He(bl(),1),Md=He(Rd(),1);var kd=(0,Nd.createMapper)({strategyInitializer:(0,Md.pojos)()});var Bd=He(Tl(),1);var oe;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{let i={};for(let o of s)i[o]=o;return i},r.getValidEnumValues=s=>{let i=r.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(let a of i)o[a]=s[a];return r.objectValues(o)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},r.find=(s,i)=>{for(let o of s)if(i(o))return o},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(oe||(oe={}));var Dd;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Dd||(Dd={}));var j=oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vt=r=>{switch(typeof r){case"undefined":return j.undefined;case"string":return j.string;case"number":return isNaN(r)?j.nan:j.number;case"boolean":return j.boolean;case"function":return j.function;case"bigint":return j.bigint;case"symbol":return j.symbol;case"object":return Array.isArray(r)?j.array:r===null?j.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?j.promise:typeof Map<"u"&&r instanceof Map?j.map:typeof Set<"u"&&r instanceof Set?j.set:typeof Date<"u"&&r instanceof Date?j.date:j.object;default:return j.unknown}},C=oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var qe=class extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let a=n,l=0;for(;l<o.path.length;){let d=o.path[l];l===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(t(o))):a[d]=a[d]||{_errors:[]},a=a[d],l++}}};return s(this),n}static assert(e){if(!(e instanceof qe))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};qe.create=r=>new qe(r);var Os=(r,e)=>{let t;switch(r.code){case C.invalid_type:r.received===j.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case C.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,oe.jsonStringifyReplacer)}`;break;case C.unrecognized_keys:t=`Unrecognized key(s) in object: ${oe.joinValues(r.keys,", ")}`;break;case C.invalid_union:t="Invalid input";break;case C.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${oe.joinValues(r.options)}`;break;case C.invalid_enum_value:t=`Invalid enum value. Expected ${oe.joinValues(r.options)}, received '${r.received}'`;break;case C.invalid_arguments:t="Invalid function arguments";break;case C.invalid_return_type:t="Invalid function return type";break;case C.invalid_date:t="Invalid date";break;case C.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:oe.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case C.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case C.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case C.custom:t="Invalid input";break;case C.invalid_intersection_types:t="Intersection results could not be merged";break;case C.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case C.not_finite:t="Number must be finite";break;default:t=e.defaultError,oe.assertNever(r)}return{message:t}},rT=Os;function wl(){return rT}var xl=r=>{let{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="",l=n.filter(d=>!!d).slice().reverse();for(let d of l)a=d(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function $(r,e){let t=wl(),n=xl({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===Os?void 0:Os].filter(s=>!!s)});r.common.issues.push(n)}var Ue=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let s of t){if(s.status==="aborted")return Z;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let s of t){let i=await s.key,o=await s.value;n.push({key:i,value:o})}return Ue.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let s of t){let{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Z;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}},Z=Object.freeze({status:"aborted"}),ws=r=>({status:"dirty",value:r}),rt=r=>({status:"valid",value:r}),qd=r=>r.status==="aborted",jd=r=>r.status==="dirty",ln=r=>r.status==="valid",io=r=>typeof Promise<"u"&&r instanceof Promise;function oo(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function Ld(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t}var L;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(L||(L={}));var xs,Es,at=class{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Fd=(r,e)=>{if(ln(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new qe(r.common.issues);return this._error=t,this._error}}};function J(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,d;let{message:c}=r;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:(l=c??n)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(d=c??t)!==null&&d!==void 0?d:a.defaultError}},description:s}}var X=class{get description(){return this._def.description}_getType(e){return Vt(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Vt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ue,ctx:{common:e.parent.common,data:e.data,parsedType:Vt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(io(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let s={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vt(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Fd(s,i)}"~validate"(e){var t,n;let s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vt(e)};if(!this["~standard"].async)try{let i=this._parseSync({data:e,path:[],parent:s});return ln(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((n=(t=i?.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>ln(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vt(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(io(s)?s:Promise.resolve(s));return Fd(n,i)}refine(e,t){let n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{let o=e(s),a=()=>i.addIssue({code:C.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new yt({schema:this,typeName:W.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ht.create(this,this._def)}nullable(){return Dt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ot.create(this)}promise(){return _r.create(this,this._def)}or(e){return dn.create([this,e],this._def)}and(e){return fn.create(this,e,this._def)}transform(e){return new yt({...J(this._def),schema:this,typeName:W.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new gn({...J(this._def),innerType:this,defaultValue:t,typeName:W.ZodDefault})}brand(){return new ao({typeName:W.ZodBranded,type:this,...J(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new vn({...J(this._def),innerType:this,catchValue:t,typeName:W.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return _n.create(this,e)}readonly(){return bn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},nT=/^c[^\s-]{8,}$/i,sT=/^[0-9a-z]+$/,iT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,oT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aT=/^[a-z0-9_-]{21}$/i,lT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,cT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Pl,fT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,mT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,yT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,gT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,zd="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vT=new RegExp(`^${zd}$`);function Gd(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function _T(r){return new RegExp(`^${Gd(r)}$`)}function bT(r){let e=`${zd}T${Gd(r)}`,t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ST(r,e){return!!((e==="v4"||!e)&&fT.test(r)||(e==="v6"||!e)&&hT.test(r))}function TT(r,e){if(!lT.test(r))return!1;try{let[t]=r.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function PT(r,e){return!!((e==="v4"||!e)&&pT.test(r)||(e==="v6"||!e)&&mT.test(r))}var pt=class extends X{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==j.string){let i=this._getOrReturnCtx(e);return $(i,{code:C.invalid_type,expected:j.string,received:i.parsedType}),Z}let n=new Ue,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:C.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:C.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?$(s,{code:C.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&$(s,{code:C.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")uT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"email",code:C.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Pl||(Pl=new RegExp(dT,"u")),Pl.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"emoji",code:C.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")oT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"uuid",code:C.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")aT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"nanoid",code:C.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")nT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"cuid",code:C.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")sT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"cuid2",code:C.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")iT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"ulid",code:C.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),$(s,{validation:"url",code:C.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"regex",code:C.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),$(s,{code:C.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),$(s,{code:C.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),$(s,{code:C.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?bT(i).test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:C.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?vT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:C.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?_T(i).test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:C.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?cT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"duration",code:C.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?ST(e.data,i.version)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"ip",code:C.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?TT(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"jwt",code:C.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?PT(e.data,i.version)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"cidr",code:C.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?yT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"base64",code:C.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?gT.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"base64url",code:C.invalid_string,message:i.message}),n.dirty()):oe.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:C.invalid_string,...L.errToObj(n)})}_addCheck(e){return new pt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...L.errToObj(e)})}url(e){return this._addCheck({kind:"url",...L.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...L.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...L.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...L.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...L.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...L.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...L.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...L.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...L.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...L.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...L.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...L.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...L.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...L.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...L.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...L.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...L.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...L.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...L.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...L.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...L.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...L.errToObj(t)})}nonempty(e){return this.min(1,L.errToObj(e))}trim(){return new pt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new pt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new pt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};pt.create=r=>{var e;return new pt({checks:[],typeName:W.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...J(r)})};function wT(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}var Kt=class extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==j.number){let i=this._getOrReturnCtx(e);return $(i,{code:C.invalid_type,expected:j.number,received:i.parsedType}),Z}let n,s=new Ue;for(let i of this._def.checks)i.kind==="int"?oe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),$(n,{code:C.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:C.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:C.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?wT(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),$(n,{code:C.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),$(n,{code:C.not_finite,message:i.message}),s.dirty()):oe.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,L.toString(t))}gt(e,t){return this.setLimit("min",e,!1,L.toString(t))}lte(e,t){return this.setLimit("max",e,!0,L.toString(t))}lt(e,t){return this.setLimit("max",e,!1,L.toString(t))}setLimit(e,t,n,s){return new Kt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:L.toString(s)}]})}_addCheck(e){return new Kt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:L.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:L.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:L.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:L.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:L.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:L.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:L.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:L.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:L.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&oe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Kt.create=r=>new Kt({checks:[],typeName:W.ZodNumber,coerce:r?.coerce||!1,...J(r)});var Ht=class extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==j.bigint)return this._getInvalidInput(e);let n,s=new Ue;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:C.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:C.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),$(n,{code:C.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):oe.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return $(t,{code:C.invalid_type,expected:j.bigint,received:t.parsedType}),Z}gte(e,t){return this.setLimit("min",e,!0,L.toString(t))}gt(e,t){return this.setLimit("min",e,!1,L.toString(t))}lte(e,t){return this.setLimit("max",e,!0,L.toString(t))}lt(e,t){return this.setLimit("max",e,!1,L.toString(t))}setLimit(e,t,n,s){return new Ht({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:L.toString(s)}]})}_addCheck(e){return new Ht({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:L.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:L.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:L.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:L.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:L.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Ht.create=r=>{var e;return new Ht({checks:[],typeName:W.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...J(r)})};var As=class extends X{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==j.boolean){let n=this._getOrReturnCtx(e);return $(n,{code:C.invalid_type,expected:j.boolean,received:n.parsedType}),Z}return rt(e.data)}};As.create=r=>new As({typeName:W.ZodBoolean,coerce:r?.coerce||!1,...J(r)});var vr=class extends X{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==j.date){let i=this._getOrReturnCtx(e);return $(i,{code:C.invalid_type,expected:j.date,received:i.parsedType}),Z}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return $(i,{code:C.invalid_date}),Z}let n=new Ue,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:C.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:C.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):oe.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:L.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:L.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};vr.create=r=>new vr({checks:[],coerce:r?.coerce||!1,typeName:W.ZodDate,...J(r)});var Cs=class extends X{_parse(e){if(this._getType(e)!==j.symbol){let n=this._getOrReturnCtx(e);return $(n,{code:C.invalid_type,expected:j.symbol,received:n.parsedType}),Z}return rt(e.data)}};Cs.create=r=>new Cs({typeName:W.ZodSymbol,...J(r)});var cn=class extends X{_parse(e){if(this._getType(e)!==j.undefined){let n=this._getOrReturnCtx(e);return $(n,{code:C.invalid_type,expected:j.undefined,received:n.parsedType}),Z}return rt(e.data)}};cn.create=r=>new cn({typeName:W.ZodUndefined,...J(r)});var un=class extends X{_parse(e){if(this._getType(e)!==j.null){let n=this._getOrReturnCtx(e);return $(n,{code:C.invalid_type,expected:j.null,received:n.parsedType}),Z}return rt(e.data)}};un.create=r=>new un({typeName:W.ZodNull,...J(r)});var Rs=class extends X{constructor(){super(...arguments),this._any=!0}_parse(e){return rt(e.data)}};Rs.create=r=>new Rs({typeName:W.ZodAny,...J(r)});var Qt=class extends X{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rt(e.data)}};Qt.create=r=>new Qt({typeName:W.ZodUnknown,...J(r)});var Pt=class extends X{_parse(e){let t=this._getOrReturnCtx(e);return $(t,{code:C.invalid_type,expected:j.never,received:t.parsedType}),Z}};Pt.create=r=>new Pt({typeName:W.ZodNever,...J(r)});var Ns=class extends X{_parse(e){if(this._getType(e)!==j.undefined){let n=this._getOrReturnCtx(e);return $(n,{code:C.invalid_type,expected:j.void,received:n.parsedType}),Z}return rt(e.data)}};Ns.create=r=>new Ns({typeName:W.ZodVoid,...J(r)});var ot=class extends X{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==j.array)return $(t,{code:C.invalid_type,expected:j.array,received:t.parsedType}),Z;if(s.exactLength!==null){let o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&($(t,{code:o?C.too_big:C.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&($(t,{code:C.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&($(t,{code:C.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new at(t,o,t.path,a)))).then(o=>Ue.mergeArray(n,o));let i=[...t.data].map((o,a)=>s.type._parseSync(new at(t,o,t.path,a)));return Ue.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new ot({...this._def,minLength:{value:e,message:L.toString(t)}})}max(e,t){return new ot({...this._def,maxLength:{value:e,message:L.toString(t)}})}length(e,t){return new ot({...this._def,exactLength:{value:e,message:L.toString(t)}})}nonempty(e){return this.min(1,e)}};ot.create=(r,e)=>new ot({type:r,minLength:null,maxLength:null,exactLength:null,typeName:W.ZodArray,...J(e)});function an(r){if(r instanceof be){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=ht.create(an(n))}return new be({...r._def,shape:()=>e})}else return r instanceof ot?new ot({...r._def,type:an(r.element)}):r instanceof ht?ht.create(an(r.unwrap())):r instanceof Dt?Dt.create(an(r.unwrap())):r instanceof mt?mt.create(r.items.map(e=>an(e))):r}var be=class extends X{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=oe.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==j.object){let d=this._getOrReturnCtx(e);return $(d,{code:C.invalid_type,expected:j.object,received:d.parsedType}),Z}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Pt&&this._def.unknownKeys==="strip"))for(let d in s.data)o.includes(d)||a.push(d);let l=[];for(let d of o){let c=i[d],h=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new at(s,h,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Pt){let d=this._def.unknownKeys;if(d==="passthrough")for(let c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(d==="strict")a.length>0&&($(s,{code:C.unrecognized_keys,keys:a}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let c of a){let h=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new at(s,h,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let d=[];for(let c of l){let h=await c.key,f=await c.value;d.push({key:h,value:f,alwaysSet:c.alwaysSet})}return d}).then(d=>Ue.mergeObjectSync(n,d)):Ue.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return L.errToObj,new be({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,o,a;let l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&o!==void 0?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(a=L.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new be({...this._def,unknownKeys:"strip"})}passthrough(){return new be({...this._def,unknownKeys:"passthrough"})}extend(e){return new be({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new be({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:W.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new be({...this._def,catchall:e})}pick(e){let t={};return oe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new be({...this._def,shape:()=>t})}omit(e){let t={};return oe.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new be({...this._def,shape:()=>t})}deepPartial(){return an(this)}partial(e){let t={};return oe.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new be({...this._def,shape:()=>t})}required(e){let t={};return oe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof ht;)i=i._def.innerType;t[n]=i}}),new be({...this._def,shape:()=>t})}keyof(){return Ud(oe.objectKeys(this.shape))}};be.create=(r,e)=>new be({shape:()=>r,unknownKeys:"strip",catchall:Pt.create(),typeName:W.ZodObject,...J(e)});be.strictCreate=(r,e)=>new be({shape:()=>r,unknownKeys:"strict",catchall:Pt.create(),typeName:W.ZodObject,...J(e)});be.lazycreate=(r,e)=>new be({shape:r,unknownKeys:"strip",catchall:Pt.create(),typeName:W.ZodObject,...J(e)});var dn=class extends X{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new qe(a.ctx.common.issues));return $(t,{code:C.invalid_union,unionErrors:o}),Z}if(t.common.async)return Promise.all(n.map(async i=>{let o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i,o=[];for(let l of n){let d={...t,common:{...t.common,issues:[]},parent:null},c=l._parseSync({data:t.data,path:t.path,parent:d});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(l=>new qe(l));return $(t,{code:C.invalid_union,unionErrors:a}),Z}}get options(){return this._def.options}};dn.create=(r,e)=>new dn({options:r,typeName:W.ZodUnion,...J(e)});var It=r=>r instanceof hn?It(r.schema):r instanceof yt?It(r.innerType()):r instanceof mn?[r.value]:r instanceof $t?r.options:r instanceof yn?oe.objectValues(r.enum):r instanceof gn?It(r._def.innerType):r instanceof cn?[void 0]:r instanceof un?[null]:r instanceof ht?[void 0,...It(r.unwrap())]:r instanceof Dt?[null,...It(r.unwrap())]:r instanceof ao||r instanceof bn?It(r.unwrap()):r instanceof vn?It(r._def.innerType):[],Ms=class extends X{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.object)return $(t,{code:C.invalid_type,expected:j.object,received:t.parsedType}),Z;let n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):($(t,{code:C.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let s=new Map;for(let i of t){let o=It(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Ms({typeName:W.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...J(n)})}};function El(r,e){let t=Vt(r),n=Vt(e);if(r===e)return{valid:!0,data:r};if(t===j.object&&n===j.object){let s=oe.objectKeys(e),i=oe.objectKeys(r).filter(a=>s.indexOf(a)!==-1),o={...r,...e};for(let a of i){let l=El(r[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===j.array&&n===j.array){if(r.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<r.length;i++){let o=r[i],a=e[i],l=El(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===j.date&&n===j.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var fn=class extends X{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(qd(i)||qd(o))return Z;let a=El(i.value,o.value);return a.valid?((jd(i)||jd(o))&&t.dirty(),{status:t.value,value:a.data}):($(n,{code:C.invalid_intersection_types}),Z)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};fn.create=(r,e,t)=>new fn({left:r,right:e,typeName:W.ZodIntersection,...J(t)});var mt=class extends X{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==j.array)return $(n,{code:C.invalid_type,expected:j.array,received:n.parsedType}),Z;if(n.data.length<this._def.items.length)return $(n,{code:C.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Z;!this._def.rest&&n.data.length>this._def.items.length&&($(n,{code:C.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...n.data].map((o,a)=>{let l=this._def.items[a]||this._def.rest;return l?l._parse(new at(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Ue.mergeArray(t,o)):Ue.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new mt({...this._def,rest:e})}};mt.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mt({items:r,typeName:W.ZodTuple,rest:null,...J(e)})};var pn=class extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==j.object)return $(n,{code:C.invalid_type,expected:j.object,received:n.parsedType}),Z;let s=[],i=this._def.keyType,o=this._def.valueType;for(let a in n.data)s.push({key:i._parse(new at(n,a,n.path,a)),value:o._parse(new at(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Ue.mergeObjectAsync(t,s):Ue.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof X?new pn({keyType:e,valueType:t,typeName:W.ZodRecord,...J(n)}):new pn({keyType:pt.create(),valueType:e,typeName:W.ZodRecord,...J(t)})}},ks=class extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==j.map)return $(n,{code:C.invalid_type,expected:j.map,received:n.parsedType}),Z;let s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,l],d)=>({key:s._parse(new at(n,a,n.path,[d,"key"])),value:i._parse(new at(n,l,n.path,[d,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let l of o){let d=await l.key,c=await l.value;if(d.status==="aborted"||c.status==="aborted")return Z;(d.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(d.value,c.value)}return{status:t.value,value:a}})}else{let a=new Map;for(let l of o){let d=l.key,c=l.value;if(d.status==="aborted"||c.status==="aborted")return Z;(d.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(d.value,c.value)}return{status:t.value,value:a}}}};ks.create=(r,e,t)=>new ks({valueType:e,keyType:r,typeName:W.ZodMap,...J(t)});var Wt=class extends X{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==j.set)return $(n,{code:C.invalid_type,expected:j.set,received:n.parsedType}),Z;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&($(n,{code:C.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&($(n,{code:C.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());let i=this._def.valueType;function o(l){let d=new Set;for(let c of l){if(c.status==="aborted")return Z;c.status==="dirty"&&t.dirty(),d.add(c.value)}return{status:t.value,value:d}}let a=[...n.data.values()].map((l,d)=>i._parse(new at(n,l,n.path,d)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new Wt({...this._def,minSize:{value:e,message:L.toString(t)}})}max(e,t){return new Wt({...this._def,maxSize:{value:e,message:L.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Wt.create=(r,e)=>new Wt({valueType:r,minSize:null,maxSize:null,typeName:W.ZodSet,...J(e)});var gr=class extends X{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.function)return $(t,{code:C.invalid_type,expected:j.function,received:t.parsedType}),Z;function n(a,l){return xl({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wl(),Os].filter(d=>!!d),issueData:{code:C.invalid_arguments,argumentsError:l}})}function s(a,l){return xl({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wl(),Os].filter(d=>!!d),issueData:{code:C.invalid_return_type,returnTypeError:l}})}let i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof _r){let a=this;return rt(async function(...l){let d=new qe([]),c=await a._def.args.parseAsync(l,i).catch(_=>{throw d.addIssue(n(l,_)),d}),h=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(h,i).catch(_=>{throw d.addIssue(s(h,_)),d})})}else{let a=this;return rt(function(...l){let d=a._def.args.safeParse(l,i);if(!d.success)throw new qe([n(l,d.error)]);let c=Reflect.apply(o,this,d.data),h=a._def.returns.safeParse(c,i);if(!h.success)throw new qe([s(c,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new gr({...this._def,args:mt.create(e).rest(Qt.create())})}returns(e){return new gr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new gr({args:e||mt.create([]).rest(Qt.create()),returns:t||Qt.create(),typeName:W.ZodFunction,...J(n)})}},hn=class extends X{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};hn.create=(r,e)=>new hn({getter:r,typeName:W.ZodLazy,...J(e)});var mn=class extends X{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return $(t,{received:t.data,code:C.invalid_literal,expected:this._def.value}),Z}return{status:"valid",value:e.data}}get value(){return this._def.value}};mn.create=(r,e)=>new mn({value:r,typeName:W.ZodLiteral,...J(e)});function Ud(r,e){return new $t({values:r,typeName:W.ZodEnum,...J(e)})}var $t=class extends X{constructor(){super(...arguments),xs.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return $(t,{expected:oe.joinValues(n),received:t.parsedType,code:C.invalid_type}),Z}if(oo(this,xs,"f")||Ld(this,xs,new Set(this._def.values),"f"),!oo(this,xs,"f").has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return $(t,{received:t.data,code:C.invalid_enum_value,options:n}),Z}return rt(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return $t.create(e,{...this._def,...t})}exclude(e,t=this._def){return $t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}};xs=new WeakMap;$t.create=Ud;var yn=class extends X{constructor(){super(...arguments),Es.set(this,void 0)}_parse(e){let t=oe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==j.string&&n.parsedType!==j.number){let s=oe.objectValues(t);return $(n,{expected:oe.joinValues(s),received:n.parsedType,code:C.invalid_type}),Z}if(oo(this,Es,"f")||Ld(this,Es,new Set(oe.getValidEnumValues(this._def.values)),"f"),!oo(this,Es,"f").has(e.data)){let s=oe.objectValues(t);return $(n,{received:n.data,code:C.invalid_enum_value,options:s}),Z}return rt(e.data)}get enum(){return this._def.values}};Es=new WeakMap;yn.create=(r,e)=>new yn({values:r,typeName:W.ZodNativeEnum,...J(e)});var _r=class extends X{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.promise&&t.common.async===!1)return $(t,{code:C.invalid_type,expected:j.promise,received:t.parsedType}),Z;let n=t.parsedType===j.promise?t.data:Promise.resolve(t.data);return rt(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}};_r.create=(r,e)=>new _r({type:r,typeName:W.ZodPromise,...J(e)});var yt=class extends X{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===W.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{$(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){let o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return Z;let l=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return l.status==="aborted"?Z:l.status==="dirty"||t.value==="dirty"?ws(l.value):l});{if(t.value==="aborted")return Z;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?Z:a.status==="dirty"||t.value==="dirty"?ws(a.value):a}}if(s.type==="refinement"){let o=a=>{let l=s.refinement(a,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Z:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Z:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ln(o))return o;let a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ln(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):o);oe.assertNever(s)}};yt.create=(r,e,t)=>new yt({schema:r,typeName:W.ZodEffects,effect:e,...J(t)});yt.createWithPreprocess=(r,e,t)=>new yt({schema:e,effect:{type:"preprocess",transform:r},typeName:W.ZodEffects,...J(t)});var ht=class extends X{_parse(e){return this._getType(e)===j.undefined?rt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ht.create=(r,e)=>new ht({innerType:r,typeName:W.ZodOptional,...J(e)});var Dt=class extends X{_parse(e){return this._getType(e)===j.null?rt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Dt.create=(r,e)=>new Dt({innerType:r,typeName:W.ZodNullable,...J(e)});var gn=class extends X{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===j.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};gn.create=(r,e)=>new gn({innerType:r,typeName:W.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...J(e)});var vn=class extends X{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return io(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qe(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new qe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};vn.create=(r,e)=>new vn({innerType:r,typeName:W.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...J(e)});var Is=class extends X{_parse(e){if(this._getType(e)!==j.nan){let n=this._getOrReturnCtx(e);return $(n,{code:C.invalid_type,expected:j.nan,received:n.parsedType}),Z}return{status:"valid",value:e.data}}};Is.create=r=>new Is({typeName:W.ZodNaN,...J(r)});var iC=Symbol("zod_brand"),ao=class extends X{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},_n=class extends X{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Z:i.status==="dirty"?(t.dirty(),ws(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Z:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new _n({in:e,out:t,typeName:W.ZodPipeline})}},bn=class extends X{_parse(e){let t=this._def.innerType._parse(e),n=s=>(ln(s)&&(s.value=Object.freeze(s.value)),s);return io(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}};bn.create=(r,e)=>new bn({innerType:r,typeName:W.ZodReadonly,...J(e)});var oC={object:be.lazycreate},W;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(W||(W={}));var aC=pt.create,lC=Kt.create,cC=Is.create,uC=Ht.create,dC=As.create,fC=vr.create,pC=Cs.create,hC=cn.create,mC=un.create,yC=Rs.create,gC=Qt.create,vC=Pt.create,_C=Ns.create,bC=ot.create,SC=be.create,TC=be.strictCreate,PC=dn.create,wC=Ms.create,xC=fn.create,EC=mt.create,OC=pn.create,AC=ks.create,CC=Wt.create,RC=gr.create,NC=hn.create,MC=mn.create,kC=$t.create,IC=yn.create,$C=_r.create,DC=yt.create,qC=ht.create,jC=Dt.create,FC=yt.createWithPreprocess,LC=_n.create;var Vd=async(r,e)=>{try{let t=JSON.parse(r.body??"{}"),n=await e.createPaymentIntent(t.checkoutRequestId);return{statusCode:201,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token","Access-Control-Allow-Credentials":"true"},body:JSON.stringify(n)}}catch(t){throw t instanceof qe?new Bd.BadRequestError(t.message,{context:t.errors}):t}};var lo=class{constructor(e,t,n){this._dbClient=e;this._mapper=t;this._stripe=n}async createPaymentIntent(e){let t=await this._stripe.paymentIntents.create({currency:"usd",amount:1e3});return console.log(t),{clientSecret:t.client_secret}}async processPaymentIntentSuccessEvent(e){console.log(e)}};var kn=He(require("crypto"),1),lc=require("events");var uo=He(require("crypto"),1);var Zt=class{computeHMACSignature(e,t){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,t){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}},Sn=class extends Error{};var co=class extends Zt{computeHMACSignature(e,t){return uo.createHmac("sha256",t).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,t){return await this.computeHMACSignature(e,t)}async computeSHA256Async(e){return new Uint8Array(await uo.createHash("sha256").update(e).digest())}};var Al=He(require("http"),1),Cl=He(require("https"),1);var Me=class{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,t,n,s,i,o,a,l){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){let e=new TypeError(Me.TIMEOUT_ERROR_CODE);return e.code=Me.TIMEOUT_ERROR_CODE,e}};Me.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];Me.TIMEOUT_ERROR_CODE="ETIMEDOUT";var Jt=class{constructor(e,t){this._statusCode=e,this._headers=t}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}};var Qd=Al.default||Al,Kd=Cl.default||Cl,xT=new Qd.Agent({keepAlive:!0}),ET=new Kd.Agent({keepAlive:!0}),$s=class extends Me{constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,t,n,s,i,o,a,l){let d=a==="http",c=this._agent;return c||(c=d?xT:ET),new Promise((f,_)=>{let g=(d?Qd:Kd).request({host:e,port:t,path:n,method:s,agent:c,headers:i,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});g.setTimeout(l,()=>{g.destroy(Me.makeTimeoutError())}),g.on("response",v=>{f(new Ol(v))}),g.on("error",v=>{_(v)}),g.once("socket",v=>{v.connecting?v.once(d?"connect":"secureConnect",()=>{g.write(o),g.end()}):(g.write(o),g.end())})})}},Ol=class extends Jt{constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,t)=>{let n="";this._res.setEncoding("utf8"),this._res.on("data",s=>{n+=s}),this._res.once("end",()=>{try{e(JSON.parse(n))}catch(s){t(s)}})})}};var br=class extends Me{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=br.makeFetchWithAbortTimeout(e):this._fetchFn=br.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(t,n,s)=>{let i,o=new Promise((l,d)=>{i=setTimeout(()=>{i=null,d(Me.makeTimeoutError())},s)}),a=e(t,n);return Promise.race([a,o]).finally(()=>{i&&clearTimeout(i)})}}static makeFetchWithAbortTimeout(e){return async(t,n,s)=>{let i=new AbortController,o=setTimeout(()=>{o=null,i.abort(Me.makeTimeoutError())},s);try{return await e(t,Object.assign(Object.assign({},n),{signal:i.signal}))}catch(a){throw a.name==="AbortError"?Me.makeTimeoutError():a}finally{o&&clearTimeout(o)}}}getClientName(){return"fetch"}async makeRequest(e,t,n,s,i,o,a,l){let d=a==="http",c=new URL(n,`${d?"http":"https"}://${e}`);c.port=t;let h=s=="POST"||s=="PUT"||s=="PATCH",f=o||(h?"":void 0),_=await this._fetchFn(c.toString(),{method:s,headers:i,body:f},l);return new Ds(_)}},Ds=class extends Jt{constructor(e){super(e.status,Ds._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let t={};for(let n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");t[n[0]]=n[1]}return t}};var fo=class extends Zt{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,t){throw new Sn("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,t){let n=new TextEncoder,s=await this.subtleCrypto.importKey("raw",n.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await this.subtleCrypto.sign("hmac",s,n.encode(e)),o=new Uint8Array(i),a=new Array(o.length);for(let l=0;l<o.length;l++)a[l]=Rl[o[l]];return a.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}},Rl=new Array(256);for(let r=0;r<Rl.length;r++)Rl[r]=r.toString(16).padStart(2,"0");var po=class{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}secureCompare(e,t){if(e.length!==t.length)return!1;let n=e.length,s=0;for(let i=0;i<n;++i)s|=e.charCodeAt(i)^t.charCodeAt(i);return s===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new br(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new fo(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}};var _o={};pa(_o,{StripeAPIError:()=>Tn,StripeAuthenticationError:()=>Pn,StripeCardError:()=>ho,StripeConnectionError:()=>Fs,StripeError:()=>xe,StripeIdempotencyError:()=>mo,StripeInvalidGrantError:()=>yo,StripeInvalidRequestError:()=>qs,StripePermissionError:()=>js,StripeRateLimitError:()=>wn,StripeSignatureVerificationError:()=>gt,StripeUnknownError:()=>go,TemporarySessionExpiredError:()=>vo,generateV1Error:()=>Ls,generateV2Error:()=>Nl});var Ls=r=>{switch(r.type){case"card_error":return new ho(r);case"invalid_request_error":return new qs(r);case"api_error":return new Tn(r);case"authentication_error":return new Pn(r);case"rate_limit_error":return new wn(r);case"idempotency_error":return new mo(r);case"invalid_grant":return new yo(r);default:return new go(r)}},Nl=r=>{switch(r.type){case"temporary_session_expired":return new vo(r)}switch(r.code){case"invalid_fields":return new qs(r)}return Ls(r)},xe=class extends Error{constructor(e={},t=null){super(e.message),this.type=t||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}};xe.generate=Ls;var ho=class extends xe{constructor(e={}){super(e,"StripeCardError")}},qs=class extends xe{constructor(e={}){super(e,"StripeInvalidRequestError")}},Tn=class extends xe{constructor(e={}){super(e,"StripeAPIError")}},Pn=class extends xe{constructor(e={}){super(e,"StripeAuthenticationError")}},js=class extends xe{constructor(e={}){super(e,"StripePermissionError")}},wn=class extends xe{constructor(e={}){super(e,"StripeRateLimitError")}},Fs=class extends xe{constructor(e={}){super(e,"StripeConnectionError")}},gt=class extends xe{constructor(e,t,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=t}},mo=class extends xe{constructor(e={}){super(e,"StripeIdempotencyError")}},yo=class extends xe{constructor(e={}){super(e,"StripeInvalidGrantError")}},go=class extends xe{constructor(e={}){super(e,"StripeUnknownError")}},vo=class extends xe{constructor(e={}){super(e,"TemporarySessionExpiredError")}};var ah=He(oh(),1),ac=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders"];function lh(r){return r&&typeof r=="object"&&ac.some(e=>Object.prototype.hasOwnProperty.call(r,e))}function er(r,e){return ah.stringify(r,{serializeDate:t=>Math.floor(t.getTime()/1e3).toString(),arrayFormat:e=="v2"?"repeat":"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}var $o=(()=>{let r={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{let t=e.replace(/["\n\r\u2028\u2029]/g,n=>r[n]);return n=>t.replace(/\{([\s\S]+?)\}/g,(s,i)=>encodeURIComponent(n[i]||""))}})();function ch(r){let e=r.match(/\{\w+\}/g);return e?e.map(t=>t.replace(/[{}]/g,"")):[]}function Nn(r){if(!Array.isArray(r)||!r[0]||typeof r[0]!="object")return{};if(!lh(r[0]))return r.shift();let e=Object.keys(r[0]),t=e.filter(n=>ac.includes(n));return t.length>0&&t.length!==e.length&&Xs(`Options found in arguments (${t.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function Do(r){let e={host:null,headers:{},settings:{}};if(r.length>0){let t=r[r.length-1];if(typeof t=="string")e.authenticator=Io(r.pop());else if(lh(t)){let n=Object.assign({},r.pop()),s=Object.keys(n).filter(i=>!ac.includes(i));if(s.length&&Xs(`Invalid options found (${s.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=Io(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders)}}return e}function uh(r){let e=this,t=Object.prototype.hasOwnProperty.call(r,"constructor")?r.constructor:function(...n){e.apply(this,n)};return Object.assign(t,e),t.prototype=Object.create(e.prototype),Object.assign(t.prototype,r),t}function qo(r){if(typeof r!="object")throw new Error("Argument must be an object");return Object.keys(r).reduce((e,t)=>(r[t]!=null&&(e[t]=r[t]),e),{})}function dh(r){return r&&typeof r=="object"?Object.keys(r).reduce((e,t)=>(e[Yw(t)]=r[t],e),{}):r}function Yw(r){return r.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function Ys(r,e){return e?r.then(t=>{setTimeout(()=>{e(null,t)},0)},t=>{setTimeout(()=>{e(t,null)},0)}):r}function fh(r){return r==="OAuth"?"oauth":r[0].toLowerCase()+r.substring(1)}function Xs(r){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${r}`):process.emitWarning(r,"Stripe")}function Xw(r){let e=typeof r;return(e==="function"||e==="object")&&!!r}function ph(r){let e={},t=(n,s)=>{Object.entries(n).forEach(([i,o])=>{let a=s?`${s}[${i}]`:i;if(Xw(o)){if(!(o instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(o,"data"))return t(o,a);e[a]=o}else e[a]=String(o)})};return t(r,null),e}function jo(r,e,t){if(!Number.isInteger(e)){if(t!==void 0)return t;throw new Error(`${r} must be an integer`)}return e}function hh(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function Io(r){let e=t=>(t.headers.Authorization="Bearer "+r,Promise.resolve());return e._apiKey=r,e}function mh(r){let e=r.reduce((s,i)=>s+i.length,0),t=new Uint8Array(e),n=0;return r.forEach(s=>{t.set(s,n),n+=s.length}),t}function ex(r,e){return this[r]instanceof Date?Math.floor(this[r].getTime()/1e3).toString():e}function yh(r){return JSON.stringify(r,ex)}function Mn(r){return r&&r.startsWith("/v2")?"v2":"v1"}var gh=require("child_process"),cc=class extends xe{},Fo=class extends po{constructor(){super(),this._exec=gh.exec,this._UNAME_CACHE=null}uuid4(){return kn.randomUUID?kn.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,t)=>{try{this._exec("uname -a",(n,s)=>{if(n)return e(null);e(s)})}catch{e(null)}})),this._UNAME_CACHE}secureCompare(e,t){if(!e||!t)throw new Error("secureCompare must receive two arguments");if(e.length!==t.length)return!1;if(kn.timingSafeEqual){let n=new TextEncoder,s=n.encode(e),i=n.encode(t);return kn.timingSafeEqual(s,i)}return super.secureCompare(e,t)}createEmitter(){return new lc.EventEmitter}tryBufferData(e){if(!(e.file.data instanceof lc.EventEmitter))return Promise.resolve(e);let t=[];return new Promise((n,s)=>{e.file.data.on("data",i=>{t.push(i)}).once("end",()=>{let i=Object.assign({},e);i.file.data=mh(t),n(i)}).on("error",i=>{s(new cc({message:"An error occurred while attempting to process the file for upload.",detail:i}))})})}createNodeHttpClient(e){return new $s(e)}createDefaultHttpClient(){return new $s}createNodeCryptoProvider(){return new co}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}};var tx=60,tr=class{constructor(e,t){this._stripe=e,this._maxBufferedRequestMetric=t}_addHeadersDirectlyToObject(e,t){e.requestId=t["request-id"],e.stripeAccount=e.stripeAccount||t["stripe-account"],e.apiVersion=e.apiVersion||t["stripe-version"],e.idempotencyKey=e.idempotencyKey||t["idempotency-key"]}_makeResponseEvent(e,t,n){let s=Date.now(),i=s-e.request_start_time;return qo({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:t,request_id:this._getRequestId(n),elapsed:i,request_start_time:e.request_start_time,request_end_time:s})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,t,n){return s=>{let i=s.getHeaders(),o=()=>{let l=this._makeResponseEvent(e,s.getStatusCode(),i);this._stripe._emitter.emit("response",l),this._recordRequestMetrics(this._getRequestId(i),l.elapsed,t)},a=s.toStream(o);return this._addHeadersDirectlyToObject(a,i),n(null,a)}}_jsonResponseHandler(e,t,n,s){return i=>{let o=i.getHeaders(),a=this._getRequestId(o),l=i.getStatusCode(),d=this._makeResponseEvent(e,l,o);this._stripe._emitter.emit("response",d),i.toJSON().then(c=>{if(c.error){let h;throw typeof c.error=="string"&&(c.error={type:c.error,message:c.error_description}),c.error.headers=o,c.error.statusCode=l,c.error.requestId=a,l===401?h=new Pn(c.error):l===403?h=new js(c.error):l===429?h=new wn(c.error):t==="v2"?h=Nl(c.error):h=Ls(c.error),h}return c},c=>{throw new Tn({message:"Invalid JSON received from the Stripe API",exception:c,requestId:o["request-id"]})}).then(c=>{this._recordRequestMetrics(a,d.elapsed,n);let h=i.getRawResponse();this._addHeadersDirectlyToObject(h,o),Object.defineProperty(c,"lastResponse",{enumerable:!1,writable:!1,value:h}),s(null,c)},c=>s(c,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,t,n,s){return s&&t===0&&Me.CONNECTION_CLOSED_ERROR_CODES.includes(s.code)?!0:t>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,t=null){let n=this._stripe.getInitialNetworkRetryDelay(),s=this._stripe.getMaxNetworkRetryDelay(),i=Math.min(n*Math.pow(2,e-1),s);return i*=.5*(1+Math.random()),i=Math.max(n,i),Number.isInteger(t)&&t<=tx&&(i=Math.max(i,t)),i*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,t,n){let s=this._getMaxNetworkRetries(t),i=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(n==="v2"){if(e==="POST"||e==="DELETE")return i()}else if(n==="v1"&&e==="POST"&&s>0)return i();return null}_makeHeaders({contentType:e,contentLength:t,apiVersion:n,clientUserAgent:s,method:i,userSuppliedHeaders:o,userSuppliedSettings:a,stripeAccount:l,stripeContext:d,apiMode:c}){let h={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(c),"X-Stripe-Client-User-Agent":s,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":l,"Stripe-Context":d,"Idempotency-Key":this._defaultIdempotencyKey(i,a,c)},f=i=="POST"||i=="PUT"||i=="PATCH";return(f||t)&&(f||Xs(`${i} method had non-zero contentLength but no payload is expected for this verb`),h["Content-Length"]=t),Object.assign(qo(h),dh(o))}_getUserAgentString(e){let t=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${t} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,t,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)Xs("Request metrics buffer is full, dropping telemetry message.");else{let s={request_id:e,request_duration_ms:t};n&&n.length>0&&(s.usage=n),this._stripe._prevRequestMetrics.push(s)}}_rawRequest(e,t,n,s){return new Promise((o,a)=>{let l;try{let _=e.toUpperCase();if(_!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let g=[].slice.call([n,s]),v=Nn(g),x=Object.assign({},v),T=Do(g),M=T.headers,E=T.authenticator;l={requestMethod:_,requestPath:t,bodyData:x,queryData:{},authenticator:E,headers:M,host:null,streaming:!1,settings:{},usage:["raw_request"]}}catch(_){a(_);return}function d(_,g){_?a(_):o(g)}let{headers:c,settings:h}=l,f=l.authenticator;this._request(l.requestMethod,l.host,t,l.bodyData,f,{headers:c,settings:h,streaming:l.streaming},l.usage,d)})}_request(e,t,n,s,i,o,a=[],l,d=null){var c;let h;i=(c=i??this._stripe._authenticator)!==null&&c!==void 0?c:null;let f=Mn(n),_=(x,T,M,E,A)=>setTimeout(x,this._getSleepTimeInMS(E,A),T,M,E+1),g=(x,T,M)=>{let E=o.settings&&o.settings.timeout&&Number.isInteger(o.settings.timeout)&&o.settings.timeout>=0?o.settings.timeout:this._stripe.getApiField("timeout"),A={host:t||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},T),body:h,protocol:this._stripe.getApiField("protocol")};i(A).then(()=>{let N=this._stripe.getApiField("httpClient").makeRequest(A.host,A.port,A.path,A.method,A.headers,A.body,A.protocol,E),Q=Date.now(),R=qo({api_version:x,account:T["Stripe-Account"],idempotency_key:T["Idempotency-Key"],method:e,path:n,request_start_time:Q}),q=M||0,z=this._getMaxNetworkRetries(o.settings||{});this._stripe._emitter.emit("request",R),N.then(P=>tr._shouldRetry(P,q,z)?_(g,x,T,q,P.getHeaders()["retry-after"]):o.streaming&&P.getStatusCode()<400?this._streamingResponseHandler(R,a,l)(P):this._jsonResponseHandler(R,f,a,l)(P)).catch(P=>{if(tr._shouldRetry(null,q,z,P))return _(g,x,T,q,null);{let K=P.code&&P.code===Me.TIMEOUT_ERROR_CODE;return l(new Fs({message:K?`Request aborted due to timeout being reached (${E}ms)`:tr._generateConnectionErrorMessage(q),detail:P}))}})}).catch(N=>{throw new xe({message:"Unable to authenticate the request",exception:N})})},v=(x,T)=>{if(x)return l(x);h=T,this._stripe.getClientUserAgent(M=>{let E=this._stripe.getApiField("version"),A=this._makeHeaders({contentType:f=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:h.length,apiVersion:E,clientUserAgent:M,method:e,userSuppliedHeaders:o.headers,userSuppliedSettings:o.settings,stripeAccount:f=="v2"?null:this._stripe.getApiField("stripeAccount"),stripeContext:f=="v2"?this._stripe.getApiField("stripeContext"):null,apiMode:f});g(E,A,0)})};if(d)d(e,s,o.headers,v);else{let x;f=="v2"?x=s?yh(s):"":x=er(s||{},f),v(null,x)}}};var Lo=class{constructor(e,t,n,s){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=t,this.spec=n,this.stripeResource=s}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let t=_h(this.requestArgs);if(this.index<e.data.length){let n=t?e.data.length-1-this.index:this.index,s=e.data[n];return this.index+=1,{value:s,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let t=await this._next();return this.promiseCache.currentPromise=null,t})();return this.promiseCache.currentPromise=e,e}},dc=class extends Lo{getNextPage(e){let t=_h(this.requestArgs),n=ix(e,t);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[t?"ending_before":"starting_after"]:n})}},fc=class extends Lo{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}},pc=class{constructor(e,t,n,s){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=t,this.spec=n,this.stripeResource=s}async turnPage(){let e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;let t=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(t.next_page_url),this.currentPageIterator=Promise.resolve(t.data[Symbol.iterator]()),this.currentPageIterator}async next(){{let n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}let e=await this.turnPage();if(!e)return{done:!0,value:void 0};let t=e.next();return t.done?{done:!0,value:void 0}:{done:!1,value:t.value}}},vh=(r,e,t,n)=>{let s=Mn(t.fullPath||t.path);return s!=="v2"&&t.methodType==="search"?uc(new fc(n,e,t,r)):s!=="v2"&&t.methodType==="list"?uc(new dc(n,e,t,r)):s==="v2"&&t.methodType==="list"?uc(new pc(n,e,t,r)):null},uc=r=>{let e=ox((...s)=>r.next(...s)),t=ax(e),n={autoPagingEach:e,autoPagingToArray:t,next:()=>r.next(),return:()=>({}),[rx()]:()=>n};return n};function rx(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function nx(r){if(r.length<2)return null;let e=r[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function sx(r){if(r.length===0)return;let e=r[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(n,s){let i=e(n);s(i)}}function ix(r,e){let t=e?0:r.data.length-1,n=r.data[t],s=n&&n.id;if(!s)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return s}function ox(r){return function(){let t=[].slice.call(arguments),n=sx(t),s=nx(t);if(t.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${t}`);let i=lx(r,n);return Ys(i,s)}}function ax(r){return function(t,n){let s=t&&t.limit;if(!s)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(s>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let i=new Promise((o,a)=>{let l=[];r(d=>{if(l.push(d),l.length>=s)return!1}).then(()=>{o(l)}).catch(a)});return Ys(i,n)}}function lx(r,e){return new Promise((t,n)=>{function s(i){if(i.done){t();return}let o=i.value;return new Promise(a=>{e(o,a)}).then(a=>a===!1?s({done:!0,value:void 0}):r().then(s))}r().then(s).catch(n)})}function _h(r){let e=[].slice.call(r);return!!Nn(e).ending_before}function bh(r){if(r.path!==void 0&&r.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${r.path}) and a 'fullPath' (${r.fullPath}).`);return function(...e){let t=typeof e[e.length-1]=="function"&&e.pop();r.urlParams=ch(r.fullPath||this.createResourcePathWithSymbols(r.path||""));let n=Ys(this._makeRequest(e,r,{}),t);return Object.assign(n,vh(this,e,r,n)),n}}u.extend=uh;u.method=bh;u.MAX_BUFFERED_REQUEST_METRICS=100;function u(r,e){if(this._stripe=r,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=$o(this.basePath||r.getApiField("basePath")),this.resourcePath=this.path,this.path=$o(this.path),this.initialize(...arguments)}u.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(r,e){let t=[this.basePath(e),this.path(e)];if(typeof r=="function"){let n=r(e);n&&t.push(n)}else t.push(r);return this._joinUrlParts(t)},createResourcePathWithSymbols(r){return r?`/${this._joinUrlParts([this.resourcePath,r])}`:`/${this.resourcePath}`},_joinUrlParts(r){return r.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(r,e,t){var n;let s=(e.method||"GET").toUpperCase(),i=e.usage||[],o=e.urlParams||[],a=e.encode||(R=>R),l=!!e.fullPath,d=$o(l?e.fullPath:e.path||""),c=l?e.fullPath:this.createResourcePathWithSymbols(e.path),h=[].slice.call(r),f=o.reduce((R,q)=>{let z=h.shift();if(typeof z!="string")throw new Error(`Stripe: Argument "${q}" must be a string, but got: ${z} (on API request to \`${s} ${c}\`)`);return R[q]=z,R},{}),_=Nn(h),g=a(Object.assign({},_,t)),v=Do(h),x=v.host||e.host,T=!!e.streaming;if(h.filter(R=>R!=null).length)throw new Error(`Stripe: Unknown arguments (${h}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${s} \`${c}\`)`);let M=l?d(f):this.createFullPath(d,f),E=Object.assign(v.headers,e.headers);e.validator&&e.validator(g,{headers:E});let A=e.method==="GET"||e.method==="DELETE";return{requestMethod:s,requestPath:M,bodyData:A?null:g,queryData:A?g:{},authenticator:(n=v.authenticator)!==null&&n!==void 0?n:null,headers:E,host:x??null,streaming:T,settings:v.settings,usage:i}},_makeRequest(r,e,t){return new Promise((n,s)=>{var i;let o;try{o=this._getRequestOpts(r,e,t)}catch(f){s(f);return}function a(f,_){f?s(f):n(e.transformResponseData?e.transformResponseData(_):_)}let l=Object.keys(o.queryData).length===0,d=[o.requestPath,l?"":"?",er(o.queryData,Mn(o.requestPath))].join(""),{headers:c,settings:h}=o;this._stripe._requestSender._request(o.requestMethod,o.host,d,o.bodyData,o.authenticator,{headers:c,settings:h,streaming:o.streaming},o.usage,a,(i=this.requestDataProcessor)===null||i===void 0?void 0:i.bind(this))})}};function hc(r){let e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(c,h,f,_,g,v){try{this.signature.verifyHeader(c,h,f,_||e.DEFAULT_TOLERANCE,g,v)}catch(T){throw T instanceof Sn&&(T.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),T}return c instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(c)):JSON.parse(c)},async constructEventAsync(c,h,f,_,g,v){return await this.signature.verifyHeaderAsync(c,h,f,_||e.DEFAULT_TOLERANCE,g,v),c instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(c)):JSON.parse(c)},generateTestHeaderString:function(c){let h=d(c),f=h.signature||h.cryptoProvider.computeHMACSignature(h.payloadString,h.secret);return h.generateHeaderString(f)},generateTestHeaderStringAsync:async function(c){let h=d(c),f=h.signature||await h.cryptoProvider.computeHMACSignatureAsync(h.payloadString,h.secret);return h.generateHeaderString(f)}},t={EXPECTED_SCHEME:"v1",verifyHeader(c,h,f,_,g,v){let{decodedHeader:x,decodedPayload:T,details:M,suspectPayloadType:E}=s(c,h,this.EXPECTED_SCHEME),A=/\s/.test(f);g=g||l();let N=g.computeHMACSignature(n(T,M),f);return i(T,x,M,N,_,E,A,v),!0},async verifyHeaderAsync(c,h,f,_,g,v){let{decodedHeader:x,decodedPayload:T,details:M,suspectPayloadType:E}=s(c,h,this.EXPECTED_SCHEME),A=/\s/.test(f);g=g||l();let N=await g.computeHMACSignatureAsync(n(T,M),f);return i(T,x,M,N,_,E,A,v)}};function n(c,h){return`${h.timestamp}.${c}`}function s(c,h,f){if(!c)throw new gt(h,c,{message:"No webhook payload was provided."});let _=typeof c!="string"&&!(c instanceof Uint8Array),g=new TextDecoder("utf8"),v=c instanceof Uint8Array?g.decode(c):c;if(Array.isArray(h))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(h==null||h=="")throw new gt(h,c,{message:"No stripe-signature header value was provided."});let x=h instanceof Uint8Array?g.decode(h):h,T=o(x,f);if(!T||T.timestamp===-1)throw new gt(x,v,{message:"Unable to extract timestamp and signatures from header"});if(!T.signatures.length)throw new gt(x,v,{message:"No signatures found with expected scheme"});return{decodedPayload:v,decodedHeader:x,details:T,suspectPayloadType:_}}function i(c,h,f,_,g,v,x,T){let M=!!f.signatures.filter(r.secureCompare.bind(r,_)).length,E=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,A=x?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!M)throw v?new gt(h,c,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+E+`
`+A}):new gt(h,c,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+E+`
`+A});let N=Math.floor((typeof T=="number"?T:Date.now())/1e3)-f.timestamp;if(g>0&&N>g)throw new gt(h,c,{message:"Timestamp outside the tolerance zone"});return!0}function o(c,h){return typeof c!="string"?null:c.split(",").reduce((f,_)=>{let g=_.split("=");return g[0]==="t"&&(f.timestamp=parseInt(g[1],10)),g[0]===h&&f.signatures.push(g[1]),f},{timestamp:-1,signatures:[]})}let a=null;function l(){return a||(a=r.createDefaultCryptoProvider()),a}function d(c){if(!c)throw new xe({message:"Options are required"});let h=Math.floor(c.timestamp)||Math.floor(Date.now()/1e3),f=c.scheme||t.EXPECTED_SCHEME,_=c.cryptoProvider||l(),g=`${h}.${c.payload}`,v=x=>`t=${h},${f}=${x}`;return Object.assign(Object.assign({},c),{timestamp:h,scheme:f,cryptoProvider:_,payloadString:g,generateHeaderString:v})}return e.signature=t,e}var Sh="2025-02-24.acacia";var Un={};pa(Un,{Account:()=>Ec,AccountLinks:()=>sy,AccountSessions:()=>iy,Accounts:()=>Ec,ApplePayDomains:()=>oy,ApplicationFees:()=>ay,Apps:()=>kx,Balance:()=>ly,BalanceTransactions:()=>uy,Billing:()=>Ix,BillingPortal:()=>$x,Charges:()=>dy,Checkout:()=>Dx,Climate:()=>qx,ConfirmationTokens:()=>fy,CountrySpecs:()=>hy,Coupons:()=>my,CreditNotes:()=>yy,CustomerSessions:()=>gy,Customers:()=>vy,Disputes:()=>_y,Entitlements:()=>jx,EphemeralKeys:()=>Sy,Events:()=>Py,ExchangeRates:()=>xy,FileLinks:()=>Ey,Files:()=>Ay,FinancialConnections:()=>Fx,Forwarding:()=>Lx,Identity:()=>zx,InvoiceItems:()=>Cy,InvoiceRenderingTemplates:()=>Ry,Invoices:()=>Ny,Issuing:()=>Gx,Mandates:()=>My,OAuth:()=>Iy,PaymentIntents:()=>$y,PaymentLinks:()=>Dy,PaymentMethodConfigurations:()=>qy,PaymentMethodDomains:()=>jy,PaymentMethods:()=>Fy,Payouts:()=>Ly,Plans:()=>zy,Prices:()=>Gy,Products:()=>Uy,PromotionCodes:()=>By,Quotes:()=>Vy,Radar:()=>Ux,Refunds:()=>Qy,Reporting:()=>Bx,Reviews:()=>Ky,SetupAttempts:()=>Hy,SetupIntents:()=>Wy,ShippingRates:()=>Zy,Sigma:()=>Vx,Sources:()=>Jy,SubscriptionItems:()=>Yy,SubscriptionSchedules:()=>Xy,Subscriptions:()=>eg,Tax:()=>Qx,TaxCodes:()=>rg,TaxIds:()=>ng,TaxRates:()=>sg,Terminal:()=>Kx,TestHelpers:()=>Hx,Tokens:()=>og,Topups:()=>ag,Transfers:()=>lg,Treasury:()=>Wx,V2:()=>Zx,WebhookEndpoints:()=>cg});function cx(r,e){for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;let n=t[0].toLowerCase()+t.substring(1),s=new e[t](r);this[n]=s}}function Se(r,e){return function(t){return new cx(t,e)}}var Er=u.method,Th=u.extend({retrieve:Er({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Er({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Er({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Er({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Er({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Er({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Er({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})});var Ph=u.method,wh=u.extend({retrieve:Ph({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:Ph({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})});var In=u.method,xh=u.extend({create:In({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:In({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:In({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:In({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:In({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:In({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})});var Or=u.method,Eh=u.extend({create:Or({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Or({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Or({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:Or({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:Or({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:Or({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:Or({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})});var ei=u.method,Oh=u.extend({retrieve:ei({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:ei({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:ei({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:ei({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:ei({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})});var mc=u.method,Ah=u.extend({create:mc({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:mc({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:mc({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})});var zo=u.method,Ch=u.extend({create:zo({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:zo({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:zo({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:zo({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})});var ti=u.method,Rh=u.extend({deliverCard:ti({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:ti({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:ti({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:ti({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:ti({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})});var Go=u.method,Nh=u.extend({create:Go({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:Go({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:Go({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:Go({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})});var Uo=u.method,Mh=u.extend({create:Uo({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:Uo({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:Uo({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:Uo({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})});var ri=u.method,kh=u.extend({create:ri({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:ri({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:ri({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:ri({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:ri({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})});var ux=u.method,Ih=u.extend({create:ux({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})});var dx=u.method,$h=u.extend({create:dx({method:"POST",fullPath:"/v1/terminal/connection_tokens"})});var fx=u.method,Dh=u.extend({retrieve:fx({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})});var qh=u.method,jh=u.extend({retrieve:qh({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:qh({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})});var $n=u.method,Fh=u.extend({create:$n({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:$n({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:$n({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:$n({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:$n({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:$n({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})});var yc=u.method,Lh=u.extend({create:yc({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:yc({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:yc({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})});var px=u.method,zh=u.extend({fundCashBalance:px({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})});var gc=u.method,Gh=u.extend({create:gc({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:gc({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:gc({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})});var ni=u.method,Uh=u.extend({create:ni({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:ni({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:ni({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:ni({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:ni({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})});var Bh=u.method,Vh=u.extend({retrieve:Bh({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Bh({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})});var rr=u.method,Qh=u.extend({create:rr({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:rr({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:rr({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:rr({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:rr({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:rr({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:rr({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:rr({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})});var vc=u.method,Kh=u.extend({retrieve(...r){return vc({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:t=>this.addFetchRelatedObjectIfNeeded(t)}).apply(this,r)},list(...r){return vc({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:t=>Object.assign(Object.assign({},t),{data:t.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,r)},addFetchRelatedObjectIfNeeded(r){return!r.related_object||!r.related_object.url?r:Object.assign(Object.assign({},r),{fetchRelatedObject:()=>vc({method:"GET",fullPath:r.related_object.url}).apply(this,[{stripeAccount:r.context}])})}});var Bo=u.method,Hh=u.extend({create:Bo({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:Bo({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:Bo({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:Bo({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})});var Ar=u.method,Wh=u.extend({create:Ar({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:Ar({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:Ar({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:Ar({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:Ar({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:Ar({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:Ar({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})});var _c=u.method,Zh=u.extend({fail:_c({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:_c({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:_c({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})});var Vo=u.method,Jh=u.extend({create:Vo({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:Vo({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:Vo({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:Vo({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})});var si=u.method,Yh=u.extend({create:si({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:si({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:si({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:si({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:si({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})});var hx=u.method,Xh=u.extend({create:hx({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})});var mx=u.method,em=u.extend({create:mx({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})});var yx=u.method,tm=u.extend({create:yx({method:"POST",fullPath:"/v2/billing/meter_event_session"})});var gx=u.method,rm=u.extend({create:gx({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})});var vx=u.method,nm=u.extend({create:vx({method:"POST",fullPath:"/v1/billing/meter_events"})});var _x=u.method,sm=u.extend({create:_x({method:"POST",fullPath:"/v2/billing/meter_events"})});var Cr=u.method,im=u.extend({create:Cr({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Cr({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Cr({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Cr({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Cr({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Cr({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Cr({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})});var ii=u.method,om=u.extend({create:ii({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:ii({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:ii({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:ii({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:ii({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})});var Qo=u.method,am=u.extend({update:Qo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:Qo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:Qo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:Qo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})});var Ko=u.method,lm=u.extend({create:Ko({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:Ko({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:Ko({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:Ko({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})});var Ho=u.method,cm=u.extend({update:Ho({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:Ho({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:Ho({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:Ho({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})});var Wo=u.method,um=u.extend({create:Wo({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:Wo({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:Wo({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:Wo({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})});var bc=u.method,dm=u.extend({activate:bc({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:bc({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:bc({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})});var Zo=u.method,fm=u.extend({create:Zo({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:Zo({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:Zo({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:Zo({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})});var pm=u.method,hm=u.extend({retrieve:pm({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:pm({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})});var mm=u.method,ym=u.extend({retrieve:mm({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:mm({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})});var bx=u.method,gm=u.extend({presentPaymentMethod:bx({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})});var Ot=u.method,vm=u.extend({create:Ot({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:Ot({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:Ot({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:Ot({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:Ot({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:Ot({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:Ot({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:Ot({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:Ot({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:Ot({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})});var Sx=u.method,_m=u.extend({create:Sx({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})});var bm=u.method,Sm=u.extend({retrieve:bm({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:bm({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})});var Tx=u.method,Tm=u.extend({create:Tx({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})});var Pm=u.method,wm=u.extend({retrieve:Pm({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:Pm({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})});var Px=u.method,xm=u.extend({expire:Px({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})});var Jo=u.method,Em=u.extend({create:Jo({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:Jo({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:Jo({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:Jo({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})});var Sc=u.method,Om=u.extend({create:Sc({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Sc({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Sc({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})});var Am=u.method,Cm=u.extend({retrieve:Am({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:Am({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})});var Tc=u.method,Rm=u.extend({create:Tc({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:Tc({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:Tc({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})});var Nm=u.method,Mm=u.extend({retrieve:Nm({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:Nm({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})});var Yo=u.method,km=u.extend({create:Yo({method:"POST",fullPath:"/v1/apps/secrets"}),list:Yo({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:Yo({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:Yo({method:"GET",fullPath:"/v1/apps/secrets/find"})});var wx=u.method,Im=u.extend({create:wx({method:"POST",fullPath:"/v1/billing_portal/sessions"})});var Dn=u.method,$m=u.extend({create:Dn({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Dn({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Dn({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Dn({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Dn({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Dn({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})});var Dm=u.method,qm=u.extend({create:Dm({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:Dm({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})});var jm=u.method,Fm=u.extend({retrieve:jm({method:"GET",fullPath:"/v1/tax/settings"}),update:jm({method:"POST",fullPath:"/v1/tax/settings"})});var Lm=u.method,zm=u.extend({retrieve:Lm({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:Lm({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})});var oi=u.method,Gm=u.extend({create:oi({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:oi({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:oi({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:oi({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:oi({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})});var Pc=u.method,Um=u.extend({retrieve:Pc({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:Pc({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:Pc({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})});var Bm=u.method,Vm=u.extend({retrieve:Bm({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:Bm({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})});var wc=u.method,Qm=u.extend({createForceCapture:wc({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:wc({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:wc({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})});var Km=u.method,Hm=u.extend({retrieve:Km({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:Km({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})});var xc=u.method,Wm=u.extend({retrieve:xc({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:xc({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:xc({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})});var Xo=u.method,Zm=u.extend({retrieve:Xo({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:Xo({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:Xo({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:Xo({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})});var Jm=u.method,Ym=u.extend({retrieve:Jm({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:Jm({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})});var ea=u.method,Xm=u.extend({create:ea({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:ea({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:ea({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:ea({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})});var ai=u.method,ey=u.extend({create:ai({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:ai({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:ai({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:ai({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:ai({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})});var ty=u.method,ry=u.extend({retrieve:ty({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:ty({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})});var qn=u.method,ny=u.extend({create:qn({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:qn({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:qn({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:qn({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:qn({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:qn({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})});var Oe=u.method,Ec=u.extend({create:Oe({method:"POST",fullPath:"/v1/accounts"}),retrieve(r,...e){return typeof r=="string"?Oe({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[r,...e]):(r==null&&[].shift.apply([r,...e]),Oe({method:"GET",fullPath:"/v1/account"}).apply(this,[r,...e]))},update:Oe({method:"POST",fullPath:"/v1/accounts/{account}"}),list:Oe({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:Oe({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:Oe({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:Oe({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:Oe({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:Oe({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:Oe({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:Oe({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:Oe({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:Oe({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:Oe({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:Oe({method:"GET",fullPath:"/v1/account"}),retrieveCapability:Oe({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:Oe({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:Oe({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:Oe({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:Oe({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:Oe({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})});var xx=u.method,sy=u.extend({create:xx({method:"POST",fullPath:"/v1/account_links"})});var Ex=u.method,iy=u.extend({create:Ex({method:"POST",fullPath:"/v1/account_sessions"})});var ta=u.method,oy=u.extend({create:ta({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:ta({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:ta({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:ta({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})});var jn=u.method,ay=u.extend({retrieve:jn({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:jn({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:jn({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:jn({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:jn({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:jn({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})});var Ox=u.method,ly=u.extend({retrieve:Ox({method:"GET",fullPath:"/v1/balance"})});var cy=u.method,uy=u.extend({retrieve:cy({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:cy({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})});var Fn=u.method,dy=u.extend({create:Fn({method:"POST",fullPath:"/v1/charges"}),retrieve:Fn({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Fn({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Fn({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Fn({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Fn({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})});var Ax=u.method,fy=u.extend({retrieve:Ax({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})});var py=u.method,hy=u.extend({retrieve:py({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:py({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})});var li=u.method,my=u.extend({create:li({method:"POST",fullPath:"/v1/coupons"}),retrieve:li({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:li({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:li({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:li({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})});var nr=u.method,yy=u.extend({create:nr({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:nr({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:nr({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:nr({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:nr({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:nr({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:nr({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:nr({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})});var Cx=u.method,gy=u.extend({create:Cx({method:"POST",fullPath:"/v1/customer_sessions"})});var de=u.method,vy=u.extend({create:de({method:"POST",fullPath:"/v1/customers"}),retrieve:de({method:"GET",fullPath:"/v1/customers/{customer}"}),update:de({method:"POST",fullPath:"/v1/customers/{customer}"}),list:de({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:de({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:de({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:de({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:de({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:de({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:de({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:de({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:de({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:de({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:de({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:de({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:de({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:de({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:de({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:de({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:de({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:de({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:de({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:de({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:de({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:de({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:de({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:de({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:de({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})});var ra=u.method,_y=u.extend({retrieve:ra({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:ra({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:ra({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:ra({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})});var by=u.method,Sy=u.extend({create:by({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(r,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:by({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})});var Ty=u.method,Py=u.extend({retrieve:Ty({method:"GET",fullPath:"/v1/events/{id}"}),list:Ty({method:"GET",fullPath:"/v1/events",methodType:"list"})});var wy=u.method,xy=u.extend({retrieve:wy({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:wy({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})});var na=u.method,Ey=u.extend({create:na({method:"POST",fullPath:"/v1/file_links"}),retrieve:na({method:"GET",fullPath:"/v1/file_links/{link}"}),update:na({method:"POST",fullPath:"/v1/file_links/{link}"}),list:na({method:"GET",fullPath:"/v1/file_links",methodType:"list"})});var Rx=(r,e,t)=>{let n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();t["Content-Type"]=`multipart/form-data; boundary=${n}`;let s=new TextEncoder,i=new Uint8Array(0),o=s.encode(`\r
`);function a(c){let h=i,f=c instanceof Uint8Array?c:new Uint8Array(s.encode(c));i=new Uint8Array(h.length+f.length+2),i.set(h),i.set(f,h.length),i.set(o,i.length-2)}function l(c){return`"${c.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}let d=ph(e);for(let c in d){if(!Object.prototype.hasOwnProperty.call(d,c))continue;let h=d[c];if(a(`--${n}`),Object.prototype.hasOwnProperty.call(h,"data")){let f=h;a(`Content-Disposition: form-data; name=${l(c)}; filename=${l(f.name||"blob")}`),a(`Content-Type: ${f.type||"application/octet-stream"}`),a(""),a(f.data)}else a(`Content-Disposition: form-data; name=${l(c)}`),a(""),a(h)}return a(`--${n}--`),i};function Oy(r,e,t,n){if(e=e||{},r!=="POST")return n(null,er(e));this._stripe._platformFunctions.tryBufferData(e).then(s=>{let i=Rx(r,s,t);return n(null,i)}).catch(s=>n(s,null))}var Oc=u.method,Ay=u.extend({create:Oc({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:Oc({method:"GET",fullPath:"/v1/files/{file}"}),list:Oc({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:Oy});var ci=u.method,Cy=u.extend({create:ci({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:ci({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:ci({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:ci({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:ci({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})});var sa=u.method,Ry=u.extend({retrieve:sa({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:sa({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:sa({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:sa({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})});var De=u.method,Ny=u.extend({create:De({method:"POST",fullPath:"/v1/invoices"}),retrieve:De({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:De({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:De({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:De({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:De({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),createPreview:De({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:De({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:De({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:De({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:De({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:De({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:De({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),retrieveUpcoming:De({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:De({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:De({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:De({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:De({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:De({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})});var Nx=u.method,My=u.extend({retrieve:Nx({method:"GET",fullPath:"/v1/mandates/{mandate}"})});var ky=u.method,Ac="connect.stripe.com",Iy=u.extend({basePath:"/",authorizeUrl(r,e){r=r||{},e=e||{};let t="oauth/authorize";return e.express&&(t=`express/${t}`),r.response_type||(r.response_type="code"),r.client_id||(r.client_id=this._stripe.getClientId()),r.scope||(r.scope="read_write"),`https://${Ac}/${t}?${er(r)}`},token:ky({method:"POST",path:"oauth/token",host:Ac}),deauthorize(r,...e){return r.client_id||(r.client_id=this._stripe.getClientId()),ky({method:"POST",path:"oauth/deauthorize",host:Ac}).apply(this,[r,...e])}});var vt=u.method,$y=u.extend({create:vt({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:vt({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:vt({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:vt({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:vt({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:vt({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:vt({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:vt({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:vt({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:vt({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:vt({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})});var ui=u.method,Dy=u.extend({create:ui({method:"POST",fullPath:"/v1/payment_links"}),retrieve:ui({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:ui({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:ui({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:ui({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})});var ia=u.method,qy=u.extend({create:ia({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:ia({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:ia({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:ia({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})});var di=u.method,jy=u.extend({create:di({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:di({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:di({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:di({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:di({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})});var Ln=u.method,Fy=u.extend({create:Ln({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Ln({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Ln({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Ln({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Ln({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Ln({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})});var zn=u.method,Ly=u.extend({create:zn({method:"POST",fullPath:"/v1/payouts"}),retrieve:zn({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:zn({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:zn({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:zn({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:zn({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})});var fi=u.method,zy=u.extend({create:fi({method:"POST",fullPath:"/v1/plans"}),retrieve:fi({method:"GET",fullPath:"/v1/plans/{plan}"}),update:fi({method:"POST",fullPath:"/v1/plans/{plan}"}),list:fi({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:fi({method:"DELETE",fullPath:"/v1/plans/{plan}"})});var pi=u.method,Gy=u.extend({create:pi({method:"POST",fullPath:"/v1/prices"}),retrieve:pi({method:"GET",fullPath:"/v1/prices/{price}"}),update:pi({method:"POST",fullPath:"/v1/prices/{price}"}),list:pi({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:pi({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})});var At=u.method,Uy=u.extend({create:At({method:"POST",fullPath:"/v1/products"}),retrieve:At({method:"GET",fullPath:"/v1/products/{id}"}),update:At({method:"POST",fullPath:"/v1/products/{id}"}),list:At({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:At({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:At({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:At({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:At({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:At({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:At({method:"GET",fullPath:"/v1/products/search",methodType:"search"})});var oa=u.method,By=u.extend({create:oa({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:oa({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:oa({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:oa({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})});var Ct=u.method,Vy=u.extend({create:Ct({method:"POST",fullPath:"/v1/quotes"}),retrieve:Ct({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:Ct({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:Ct({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:Ct({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:Ct({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:Ct({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:Ct({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:Ct({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:Ct({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})});var hi=u.method,Qy=u.extend({create:hi({method:"POST",fullPath:"/v1/refunds"}),retrieve:hi({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:hi({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:hi({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:hi({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})});var Cc=u.method,Ky=u.extend({retrieve:Cc({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Cc({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Cc({method:"POST",fullPath:"/v1/reviews/{review}/approve"})});var Mx=u.method,Hy=u.extend({list:Mx({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})});var Rr=u.method,Wy=u.extend({create:Rr({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:Rr({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:Rr({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:Rr({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:Rr({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:Rr({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:Rr({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})});var aa=u.method,Zy=u.extend({create:aa({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:aa({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:aa({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:aa({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})});var mi=u.method,Jy=u.extend({create:mi({method:"POST",fullPath:"/v1/sources"}),retrieve:mi({method:"GET",fullPath:"/v1/sources/{source}"}),update:mi({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:mi({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:mi({method:"POST",fullPath:"/v1/sources/{source}/verify"})});var Nr=u.method,Yy=u.extend({create:Nr({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:Nr({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:Nr({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:Nr({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:Nr({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:Nr({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:Nr({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})});var Gn=u.method,Xy=u.extend({create:Gn({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:Gn({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:Gn({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:Gn({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:Gn({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:Gn({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})});var sr=u.method,eg=u.extend({create:sr({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:sr({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:sr({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:sr({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:sr({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:sr({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:sr({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:sr({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})});var tg=u.method,rg=u.extend({retrieve:tg({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:tg({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})});var la=u.method,ng=u.extend({create:la({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:la({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:la({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:la({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})});var ca=u.method,sg=u.extend({create:ca({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:ca({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:ca({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:ca({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})});var ig=u.method,og=u.extend({create:ig({method:"POST",fullPath:"/v1/tokens"}),retrieve:ig({method:"GET",fullPath:"/v1/tokens/{token}"})});var yi=u.method,ag=u.extend({create:yi({method:"POST",fullPath:"/v1/topups"}),retrieve:yi({method:"GET",fullPath:"/v1/topups/{topup}"}),update:yi({method:"POST",fullPath:"/v1/topups/{topup}"}),list:yi({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:yi({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})});var ir=u.method,lg=u.extend({create:ir({method:"POST",fullPath:"/v1/transfers"}),retrieve:ir({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:ir({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:ir({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:ir({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:ir({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:ir({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:ir({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})});var gi=u.method,cg=u.extend({create:gi({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:gi({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:gi({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:gi({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:gi({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})});var kx=Se("apps",{Secrets:km}),Ix=Se("billing",{Alerts:xh,CreditBalanceSummary:Dh,CreditBalanceTransactions:jh,CreditGrants:Fh,MeterEventAdjustments:Xh,MeterEvents:nm,Meters:im}),$x=Se("billingPortal",{Configurations:Mh,Sessions:Im}),Dx=Se("checkout",{Sessions:$m}),qx=Se("climate",{Orders:om,Products:ym,Suppliers:zm}),jx=Se("entitlements",{ActiveEntitlements:wh,Features:Hh}),Fx=Se("financialConnections",{Accounts:Th,Sessions:qm,Transactions:Hm}),Lx=Se("forwarding",{Requests:Rm}),zx=Se("identity",{VerificationReports:ry,VerificationSessions:ny}),Gx=Se("issuing",{Authorizations:Oh,Cardholders:Ch,Cards:Nh,Disputes:Uh,PersonalizationDesigns:fm,PhysicalBundles:hm,Tokens:Um,Transactions:Wm}),Ux=Se("radar",{EarlyFraudWarnings:Vh,ValueListItems:Xm,ValueLists:ey}),Bx=Se("reporting",{ReportRuns:Om,ReportTypes:Cm}),Vx=Se("sigma",{ScheduledQueryRuns:Mm}),Qx=Se("tax",{Calculations:Ah,Registrations:Em,Settings:Fm,Transactions:Zm}),Kx=Se("terminal",{Configurations:kh,ConnectionTokens:$h,Locations:Yh,Readers:vm}),Hx=Se("testHelpers",{ConfirmationTokens:Ih,Customers:zh,Refunds:xm,TestClocks:Gm,Issuing:Se("issuing",{Authorizations:Eh,Cards:Rh,PersonalizationDesigns:dm,Transactions:Qm}),Terminal:Se("terminal",{Readers:gm}),Treasury:Se("treasury",{InboundTransfers:Zh,OutboundPayments:am,OutboundTransfers:cm,ReceivedCredits:_m,ReceivedDebits:Tm})}),Wx=Se("treasury",{CreditReversals:Lh,DebitReversals:Gh,FinancialAccounts:Wh,InboundTransfers:Jh,OutboundPayments:lm,OutboundTransfers:um,ReceivedCredits:Sm,ReceivedDebits:wm,TransactionEntries:Vm,Transactions:Ym}),Zx=Se("v2",{Billing:Se("billing",{MeterEventAdjustments:em,MeterEventSession:tm,MeterEventStream:rm,MeterEvents:sm}),Core:Se("core",{EventDestinations:Qh,Events:Kh})});var ug="api.stripe.com",dg="443",fg="/v1/",pg=Sh,hg=8e4,mg=5,yg=.5,Jx=["name","version","url","partner_id"],gg=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],Yx=r=>new tr(r,u.MAX_BUFFERED_REQUEST_METRICS);function vg(r,e=Yx){n.PACKAGE_VERSION="17.7.0",n.USER_AGENT=Object.assign({bindings_version:n.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},hh()),n.StripeResource=u,n.resources=Un,n.HttpClient=Me,n.HttpClientResponse=Jt,n.CryptoProvider=Zt;function t(s=r){return hc(s)}n.webhooks=Object.assign(t,hc(r));function n(s,i={}){if(!(this instanceof n))return new n(s,i);let o=this._getPropsFromConfig(i);this._platformFunctions=r,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=n.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let a=o.httpAgent||null;this._api={host:o.host||ug,port:o.port||dg,protocol:o.protocol||"https",basePath:fg,version:o.apiVersion||pg,timeout:jo("timeout",o.timeout,hg),maxNetworkRetries:jo("maxNetworkRetries",o.maxNetworkRetries,2),agent:a,httpClient:o.httpClient||(a?this._platformFunctions.createNodeHttpClient(a):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:o.stripeAccount||null,stripeContext:o.stripeContext||null};let l=o.typescript||!1;l!==n.USER_AGENT.typescript&&(n.USER_AGENT.typescript=l),o.appInfo&&this._setAppInfo(o.appInfo),this._prepResources(),this._setAuthenticator(s,o.authenticator),this.errors=_o,this.webhooks=t(),this._prevRequestMetrics=[],this._enableTelemetry=o.telemetry!==!1,this._requestSender=e(this),this.StripeResource=n.StripeResource}return n.errors=_o,n.createNodeHttpClient=r.createNodeHttpClient,n.createFetchHttpClient=r.createFetchHttpClient,n.createNodeCryptoProvider=r.createNodeCryptoProvider,n.createSubtleCryptoProvider=r.createSubtleCryptoProvider,n.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(s,i,o,a){return this._requestSender._rawRequest(s,i,o,a)},_setAuthenticator(s,i){if(s&&i)throw new Error("Can't specify both apiKey and authenticator");if(!s&&!i)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=s?Io(s):i},_setAppInfo(s){if(s&&typeof s!="object")throw new Error("AppInfo must be an object.");if(s&&!s.name)throw new Error("AppInfo.name is required");s=s||{},this._appInfo=Jx.reduce((i,o)=>(typeof s[o]=="string"&&(i=i||{},i[o]=s[o]),i),void 0)},_setApiField(s,i){this._api[s]=i},getApiField(s){return this._api[s]},setClientId(s){this._clientId=s},getClientId(){return this._clientId},getConstant:s=>{switch(s){case"DEFAULT_HOST":return ug;case"DEFAULT_PORT":return dg;case"DEFAULT_BASE_PATH":return fg;case"DEFAULT_API_VERSION":return pg;case"DEFAULT_TIMEOUT":return hg;case"MAX_NETWORK_RETRY_DELAY_SEC":return mg;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return yg}return n[s]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(s,i,o){let a=jo(s,i,o);this._setApiField(s,a)},getMaxNetworkRetryDelay(){return mg},getInitialNetworkRetryDelay(){return yg},getClientUserAgent(s){return this.getClientUserAgentSeeded(n.USER_AGENT,s)},getClientUserAgentSeeded(s,i){this._platformFunctions.getUname().then(o=>{var a;let l={};for(let c in s)!Object.prototype.hasOwnProperty.call(s,c)||(l[c]=encodeURIComponent((a=s[c])!==null&&a!==void 0?a:"null"));l.uname=encodeURIComponent(o||"UNKNOWN");let d=this.getApiField("httpClient");d&&(l.httplib=encodeURIComponent(d.getClientName())),this._appInfo&&(l.application=this._appInfo),i(JSON.stringify(l))})},getAppInfoAsString(){if(!this._appInfo)return"";let s=this._appInfo.name;return this._appInfo.version&&(s+=`/${this._appInfo.version}`),this._appInfo.url&&(s+=` (${this._appInfo.url})`),s},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let s in Un)!Object.prototype.hasOwnProperty.call(Un,s)||(this[fh(s)]=new Un[s](this))},_getPropsFromConfig(s){if(!s)return{};let i=typeof s=="string";if(!(s===Object(s)&&!Array.isArray(s))&&!i)throw new Error("Config must either be an object or a string");if(i)return{apiVersion:s};if(Object.keys(s).filter(l=>!gg.includes(l)).length>0)throw new Error(`Config object may only contain the following: ${gg.join(", ")}`);return s},parseThinEvent(s,i,o,a,l,d){return this.webhooks.constructEvent(s,i,o,a,l,d)}},n}var Xx=vg(new Fo),_g=Xx;var bg=async(r,e)=>{try{return{statusCode:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token","Access-Control-Allow-Credentials":"true"},body:JSON.stringify({})}}catch(t){throw t}};var Sg=He(Tl(),1);var Tg=async(r,e)=>{try{let t=JSON.parse(r.body);switch(console.log(t),t.type){case"payment_intent.succeeded":let n=t.data.object;console.log({paymentIntent:n});break;case"payment_method.attached":let s=t.data.object;break;default:console.log(`Unhandled event type ${t.data.object}`)}return{statusCode:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token","Access-Control-Allow-Credentials":"true"},body:JSON.stringify({})}}catch(t){throw t instanceof qe?new Sg.BadRequestError(t.message,{context:t.errors}):t}};function Pg(){let r=jr(process.env.DATABASE_URL,{prepare:!1}),e=Yi({client:r,casing:"snake_case"}),t="sk_test_51QiMYvGUPCXDYpQ6Yq9Z7scA5L027SwwLeEoDqGLACg9YP2Rxf2ZYg9pA8ZGLAEZBsvRcz20yNYRCSzH8Ftr7GWX009Zf7ZLMs",n=new _g(t);return{service:new lo(e,kd,n),routes:[{method:"POST",path:"/start-payment-intent",handler:Vd},{method:"OPTIONS",path:"/start-payment-intent",handler:bg},{method:"POST",path:"/payment-service/webhook",handler:Tg}]}}var{routes:eE,service:tE}=Pg(),rE=async r=>{console.log("Incoming request:",r.httpMethod,r.path);let e=eE.find(t=>t.method===r.httpMethod&&t.path===r.path);if(!e)return{statusCode:404,body:JSON.stringify({error:"Route not found"})};try{return await e.handler(r,tE)}catch(t){return console.error("Error handling request:",t),{statusCode:t.statusCode??500,body:t?.errors?JSON.stringify(t.errors):"Internal Server Error"}}};0&&(module.exports={lambdaHandler});
//# sourceMappingURL=app.js.map
